import{a as d,p as e,w as k}from"./chunk-UIGDSWPH-CIt85NzU.js";import{A as N,C as g}from"./ClientOnly-Do3zMAaF.js";import{S as C,a as T,b as w,c as M,f as b,g as _,d as E}from"./select-CX23fl6z.js";import{c as j,m as S}from"./index-LQx0N5oG.js";import{B as L}from"./button-BQnWc8Z8.js";import{T as B,k as F,b as P}from"./tooltip-BicAPSV1.js";import{P as z}from"./PageHeader-DmSe1-NI.js";import"./index-BP1L8zXC.js";import"./Combination-BM3GwNwT.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M18.89 13.24a7 7 0 0 0-8.13-8.13",key:"1v9jrh"}],["path",{d:"M19 12h3",key:"osuazr"}],["path",{d:"M2 12h3",key:"1wrr53"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M7.05 7.05a7 7 0 0 0 9.9 9.9",key:"rc5l2e"}]],I=j("locate-off",D);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]],q=j("locate",V),{useEvent:A,useMap:O}=S;function v({location:c,onLocationSelect:l}){const{mapData:i}=O(),o=i.getByType("floor").sort((t,a)=>t.elevation-a.elevation),r=i.getByType("space").filter(({name:t})=>t.length),n=o.map(t=>({floor:t,spaces:r.filter(a=>a.floor.id===t.id).sort((a,s)=>a.name.localeCompare(s.name))})),[m,p]=d.useState(c?.__type==="space"?c.id:" "),[x,f]=d.useState(c?.__type==="coordinate"?c:void 0);function u(t){p(t),f(void 0);const a=r.find(({id:s})=>s===t);a&&l(a)}const[h,y]=d.useState(!1);return A("click",({spaces:t,coordinate:a})=>{h&&(t.length?u(t[0].id):(p(" "),f(a),l(a)),y(!1))}),e.jsxs("div",{className:"flex items-center gap-2 w-full *:min-w-0",children:[e.jsxs(C,{value:m,onValueChange:u,children:[e.jsx(T,{className:"grow",children:e.jsx(w,{placeholder:"Select a space",className:"truncate",children:x?x.latitude+" "+x.longitude:r.find(({id:t})=>t===m)?.name})}),e.jsx(M,{children:n.map(({floor:t,spaces:a})=>e.jsxs(b,{children:[e.jsx(_,{children:t.name}),a.map(s=>e.jsx(E,{value:s.id,children:s.name},s.id))]},t.id))})]}),e.jsxs(B,{children:[e.jsx(F,{asChild:!0,children:e.jsx(L,{size:"icon",variant:"ghost",className:"size-8 shrink-0",onClick:()=>y(!h),children:h?e.jsx(I,{}):e.jsx(q,{})})}),e.jsx(P,{side:"right",children:"Select on map"})]})]})}const{useMap:$}=S,Y=k(function(){const{mapData:l,mapView:i}=$(),{navigationFrom:o,setNavigationFrom:r,navigationTo:n,setNavigationTo:m}=d.useContext(N);return d.useEffect(()=>{if(o&&n){const p=l.getDirections(o,n);if(!p)return;i.Navigation.clear(),i.Navigation.draw(p)}},[o,n,l,i.Navigation]),e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Navigation"}),e.jsxs("div",{className:"space-y-2 py-2",children:[e.jsx(g,{children:e.jsx(v,{location:o,onLocationSelect:r})}),e.jsx(g,{children:e.jsx(v,{location:n,onLocationSelect:m})})]})]})});export{Y as default};
