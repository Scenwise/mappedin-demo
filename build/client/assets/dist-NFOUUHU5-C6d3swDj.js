import{g as o,F as oe,G as Me,Q as Oo,j as et,O as we,J as xs,R as ri,N as Os,L as ye,h as v,m as bP,k as Nu,M as yn,V as ce,T,U as IP}from"./index-Q-qB9Xut.js";import"./chunk-C37GKA54-Cea7C6Y9.js";import"./index-Ctv2K4ti.js";var pi=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=class{};o(t,"_CodeOrName");var r=t;e._CodeOrName=r,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var n=class extends r{constructor(P){if(super(),!e.IDENTIFIER.test(P))throw new Error("CodeGen: name must be a valid identifier");this.str=P}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};o(n,"Name");var i=n;e.Name=i;var a=class extends r{constructor(P){super(),this._items=typeof P=="string"?[P]:P}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let P=this._items[0];return P===""||P==='""'}get str(){var P;return(P=this._str)!==null&&P!==void 0?P:this._str=this._items.reduce((F,S)=>"".concat(F).concat(S),"")}get names(){var P;return(P=this._names)!==null&&P!==void 0?P:this._names=this._items.reduce((F,S)=>(S instanceof i&&(F[S.str]=(F[S.str]||0)+1),F),{})}};o(a,"_Code");var s=a;e._Code=s,e.nil=new s("");function l(x,...P){let F=[x[0]],S=0;for(;S<P.length;)p(F,P[S]),F.push(x[++S]);return new s(F)}o(l,"_"),e._=l;var d=new s("+");function c(x,...P){let F=[g(x[0])],S=0;for(;S<P.length;)F.push(d),p(F,P[S]),F.push(d,g(x[++S]));return f(F),new s(F)}o(c,"str"),e.str=c;function p(x,P){P instanceof s?x.push(...P._items):P instanceof i?x.push(P):x.push(k(P))}o(p,"addCodeArg"),e.addCodeArg=p;function f(x){let P=1;for(;P<x.length-1;){if(x[P]===d){let F=h(x[P-1],x[P+1]);if(F!==void 0){x.splice(P-1,3,F);continue}x[P++]="+"}P++}}o(f,"optimize");function h(x,P){if(P==='""')return x;if(x==='""')return P;if(typeof x=="string")return P instanceof i||x[x.length-1]!=='"'?void 0:typeof P!="string"?"".concat(x.slice(0,-1)).concat(P,'"'):P[0]==='"'?x.slice(0,-1)+P.slice(1):void 0;if(typeof P=="string"&&P[0]==='"'&&!(x instanceof i))return'"'.concat(x).concat(P.slice(1))}o(h,"mergeExprItems");var w;function N(x,P){return P.emptyStr()?x:x.emptyStr()?P:c(w||(w=T(["","",""])),x,P)}o(N,"strConcat"),e.strConcat=N;function k(x){return typeof x=="number"||typeof x=="boolean"||x===null?x:g(Array.isArray(x)?x.join(","):x)}o(k,"interpolate");function O(x){return new s(g(x))}o(O,"stringify"),e.stringify=O;function g(x){return JSON.stringify(x).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}o(g,"safeStringify"),e.safeStringify=g;var y;function I(x){return typeof x=="string"&&e.IDENTIFIER.test(x)?new s(".".concat(x)):l(y||(y=T(["[","]"])),x)}o(I,"getProperty"),e.getProperty=I;function m(x){if(typeof x=="string"&&e.IDENTIFIER.test(x))return new s("".concat(x));throw new Error("CodeGen: invalid export name: ".concat(x,", use explicit $id name mapping"))}o(m,"getEsmExportName"),e.getEsmExportName=m;function b(x){return new s(x.toString())}o(b,"regexpCode"),e.regexpCode=b}),lu=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t=pi(),r=class extends Error{constructor(y){super('CodeGen: "code" for '.concat(y," not defined")),this.value=y.value}};o(r,"ValueError");var n=r,i;(function(g){g[g.Started=0]="Started",g[g.Completed=1]="Completed"})(i||(e.UsedValueState=i={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};var a=class{constructor({prefixes:y,parent:I}={}){this._names={},this._prefixes=y,this._parent=I}toName(y){return y instanceof t.Name?y:this.name(y)}name(y){return new t.Name(this._newName(y))}_newName(y){let I=this._names[y]||this._nameGroup(y);return"".concat(y).concat(I.index++)}_nameGroup(y){var I,m;if(!((m=(I=this._parent)===null||I===void 0?void 0:I._prefixes)===null||m===void 0)&&m.has(y)||this._prefixes&&!this._prefixes.has(y))throw new Error('CodeGen: prefix "'.concat(y,'" is not allowed in this scope'));return this._names[y]={prefix:y,index:0}}};o(a,"Scope");var s=a;e.Scope=s;var l,d=class extends t.Name{constructor(y,I){super(I),this.prefix=y}setValue(y,{property:I,itemIndex:m}){this.value=y,this.scopePath=(0,t._)(l||(l=T([".","[","]"])),new t.Name(I),m)}};o(d,"ValueScopeName");var c=d;e.ValueScopeName=c;var p,f=(0,t._)(p||(p=T([`
`],["\\n"]))),h,w,N,k=class extends s{constructor(y){super(y),this._values={},this._scope=y.scope,this.opts=Me(oe({},y),{_n:y.lines?f:t.nil})}get(){return this._scope}name(y){return new c(y,this._newName(y))}value(y,I){var m;if(I.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let b=this.toName(y),{prefix:x}=b,P=(m=I.key)!==null&&m!==void 0?m:I.ref,F=this._values[x];if(F){let q=F.get(P);if(q)return q}else F=this._values[x]=new Map;F.set(P,b);let S=this._scope[x]||(this._scope[x]=[]),C=S.length;return S[C]=I.ref,b.setValue(I,{property:x,itemIndex:C}),b}getValue(y,I){let m=this._values[y];if(m)return m.get(I)}scopeRefs(y,I=this._values){return this._reduceValues(I,m=>{if(m.scopePath===void 0)throw new Error('CodeGen: name "'.concat(m,'" has no value'));return(0,t._)(h||(h=T(["","",""])),y,m.scopePath)})}scopeCode(y=this._values,I,m){return this._reduceValues(y,b=>{if(b.value===void 0)throw new Error('CodeGen: name "'.concat(b,'" has no value'));return b.value.code},I,m)}_reduceValues(y,I,m={},b){let x=t.nil;for(let P in y){let F=y[P];if(!F)continue;let S=m[P]=m[P]||new Map;F.forEach(C=>{if(S.has(C))return;S.set(C,i.Started);let q=I(C);if(q){let M=this.opts.es5?e.varKinds.var:e.varKinds.const;x=(0,t._)(w||(w=T(["",""," "," = ",";",""])),x,M,C,q,this.opts._n)}else if(q=b?.(C))x=(0,t._)(N||(N=T(["","","",""])),x,q,this.opts._n);else throw new n(C);S.set(C,i.Completed)})}return x}};o(k,"ValueScope");var O=k;e.ValueScope=O}),Ae=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=pi(),r=lu(),n=pi();Object.defineProperty(e,"_",{enumerable:!0,get:o(function(){return n._},"get")}),Object.defineProperty(e,"str",{enumerable:!0,get:o(function(){return n.str},"get")}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:o(function(){return n.strConcat},"get")}),Object.defineProperty(e,"nil",{enumerable:!0,get:o(function(){return n.nil},"get")}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:o(function(){return n.getProperty},"get")}),Object.defineProperty(e,"stringify",{enumerable:!0,get:o(function(){return n.stringify},"get")}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:o(function(){return n.regexpCode},"get")}),Object.defineProperty(e,"Name",{enumerable:!0,get:o(function(){return n.Name},"get")});var i=lu();Object.defineProperty(e,"Scope",{enumerable:!0,get:o(function(){return i.Scope},"get")}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:o(function(){return i.ValueScope},"get")}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:o(function(){return i.ValueScopeName},"get")}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:o(function(){return i.varKinds},"get")}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var a=class{optimizeNodes(){return this}optimizeNames(R,B){return this}};o(a,"Node");var s=a,l=class extends s{constructor(R,B,ue){super(),this.varKind=R,this.name=B,this.rhs=ue}render({es5:R,_n:B}){let ue=R?r.varKinds.var:this.varKind,ke=this.rhs===void 0?"":" = ".concat(this.rhs);return"".concat(ue," ").concat(this.name).concat(ke,";")+B}optimizeNames(R,B){if(R[this.name.str])return this.rhs&&(this.rhs=ge(this.rhs,R,B)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}};o(l,"Def");var d=l,c=class extends s{constructor(R,B,ue){super(),this.lhs=R,this.rhs=B,this.sideEffects=ue}render({_n:R}){return"".concat(this.lhs," = ").concat(this.rhs,";")+R}optimizeNames(R,B){if(!(this.lhs instanceof t.Name&&!R[this.lhs.str]&&!this.sideEffects))return this.rhs=ge(this.rhs,R,B),this}get names(){let R=this.lhs instanceof t.Name?{}:oe({},this.lhs.names);return Oe(R,this.rhs)}};o(c,"Assign");var p=c,f=class extends p{constructor(R,B,ue,ke){super(R,ue,ke),this.op=B}render({_n:R}){return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+R}};o(f,"AssignOp");var h=f,w=class extends s{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return"".concat(this.label,":")+R}};o(w,"Label");var N=w,k=class extends s{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){let B=this.label?" ".concat(this.label):"";return"break".concat(B,";")+R}};o(k,"Break");var O=k,g=class extends s{constructor(R){super(),this.error=R}render({_n:R}){return"throw ".concat(this.error,";")+R}get names(){return this.error.names}};o(g,"Throw");var y=g,I=class extends s{constructor(R){super(),this.code=R}render({_n:R}){return"".concat(this.code,";")+R}optimizeNodes(){return"".concat(this.code)?this:void 0}optimizeNames(R,B){return this.code=ge(this.code,R,B),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}};o(I,"AnyCode");var m=I,b=class extends s{constructor(R=[]){super(),this.nodes=R}render(R){return this.nodes.reduce((B,ue)=>B+ue.render(R),"")}optimizeNodes(){let{nodes:R}=this,B=R.length;for(;B--;){let ue=R[B].optimizeNodes();Array.isArray(ue)?R.splice(B,1,...ue):ue?R[B]=ue:R.splice(B,1)}return R.length>0?this:void 0}optimizeNames(R,B){let{nodes:ue}=this,ke=ue.length;for(;ke--;){let $e=ue[ke];$e.optimizeNames(R,B)||(Re(R,$e.names),ue.splice(ke,1))}return ue.length>0?this:void 0}get names(){return this.nodes.reduce((R,B)=>je(R,B.names),{})}};o(b,"ParentNode");var x=b,P=class extends x{render(R){return"{"+R._n+super.render(R)+"}"+R._n}};o(P,"BlockNode");var F=P,S=class extends x{};o(S,"Root");var C=S,q=class extends F{};o(q,"Else");var M=q;M.kind="else";var z=class ii extends F{constructor(R,B){super(B),this.condition=R}render(R){let B="if(".concat(this.condition,")")+super.render(R);return this.else&&(B+="else "+this.else.render(R)),B}optimizeNodes(){super.optimizeNodes();let R=this.condition;if(R===!0)return this.nodes;let B=this.else;if(B){let ue=B.optimizeNodes();B=this.else=Array.isArray(ue)?new M(ue):ue}if(B)return R===!1?B instanceof ii?B:B.nodes:this.nodes.length?this:new ii(We(R),B instanceof ii?[B]:B.nodes);if(!(R===!1||!this.nodes.length))return this}optimizeNames(R,B){var ue;if(this.else=(ue=this.else)===null||ue===void 0?void 0:ue.optimizeNames(R,B),!!(super.optimizeNames(R,B)||this.else))return this.condition=ge(this.condition,R,B),this}get names(){let R=super.names;return Oe(R,this.condition),this.else&&je(R,this.else.names),R}};o(z,"If");var Q=z;Q.kind="if";var ae=class extends F{};o(ae,"For");var Y=ae;Y.kind="for";var ne=class extends Y{constructor(R){super(),this.iteration=R}render(R){return"for(".concat(this.iteration,")")+super.render(R)}optimizeNames(R,B){if(super.optimizeNames(R,B))return this.iteration=ge(this.iteration,R,B),this}get names(){return je(super.names,this.iteration.names)}};o(ne,"ForLoop");var X=ne,J=class extends Y{constructor(R,B,ue,ke){super(),this.varKind=R,this.name=B,this.from=ue,this.to=ke}render(R){let B=R.es5?r.varKinds.var:this.varKind,{name:ue,from:ke,to:$e}=this;return"for(".concat(B," ").concat(ue,"=").concat(ke,"; ").concat(ue,"<").concat($e,"; ").concat(ue,"++)")+super.render(R)}get names(){let R=Oe(super.names,this.from);return Oe(R,this.to)}};o(J,"ForRange");var de=J,H=class extends Y{constructor(R,B,ue,ke){super(),this.loop=R,this.varKind=B,this.name=ue,this.iterable=ke}render(R){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+super.render(R)}optimizeNames(R,B){if(super.optimizeNames(R,B))return this.iterable=ge(this.iterable,R,B),this}get names(){return je(super.names,this.iterable.names)}};o(H,"ForIter");var $=H,D=class extends F{constructor(R,B,ue){super(),this.name=R,this.args=B,this.async=ue}render(R){let B=this.async?"async ":"";return"".concat(B,"function ").concat(this.name,"(").concat(this.args,")")+super.render(R)}};o(D,"Func");var _=D;_.kind="func";var j=class extends x{render(R){return"return "+super.render(R)}};o(j,"Return");var L=j;L.kind="return";var G=class extends F{render(R){let B="try"+super.render(R);return this.catch&&(B+=this.catch.render(R)),this.finally&&(B+=this.finally.render(R)),B}optimizeNodes(){var R,B;return super.optimizeNodes(),(R=this.catch)===null||R===void 0||R.optimizeNodes(),(B=this.finally)===null||B===void 0||B.optimizeNodes(),this}optimizeNames(R,B){var ue,ke;return super.optimizeNames(R,B),(ue=this.catch)===null||ue===void 0||ue.optimizeNames(R,B),(ke=this.finally)===null||ke===void 0||ke.optimizeNames(R,B),this}get names(){let R=super.names;return this.catch&&je(R,this.catch.names),this.finally&&je(R,this.finally.names),R}};o(G,"Try");var te=G,E=class extends F{constructor(R){super(),this.error=R}render(R){return"catch(".concat(this.error,")")+super.render(R)}};o(E,"Catch");var V=E;V.kind="catch";var A=class extends F{render(R){return"finally"+super.render(R)}};o(A,"Finally");var re=A;re.kind="finally";var ie,le,be,he=class{constructor(R,B={}){this._values={},this._blockStarts=[],this._constants={},this.opts=Me(oe({},B),{_n:B.lines?`
`:""}),this._extScope=R,this._scope=new r.Scope({parent:R}),this._nodes=[new C]}toString(){return this._root.render(this.opts)}name(R){return this._scope.name(R)}scopeName(R){return this._extScope.name(R)}scopeValue(R,B){let ue=this._extScope.value(R,B);return(this._values[ue.prefix]||(this._values[ue.prefix]=new Set)).add(ue),ue}getScopeValue(R,B){return this._extScope.getValue(R,B)}scopeRefs(R){return this._extScope.scopeRefs(R,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(R,B,ue,ke){let $e=this._scope.toName(B);return ue!==void 0&&ke&&(this._constants[$e.str]=ue),this._leafNode(new d(R,$e,ue)),$e}const(R,B,ue){return this._def(r.varKinds.const,R,B,ue)}let(R,B,ue){return this._def(r.varKinds.let,R,B,ue)}var(R,B,ue){return this._def(r.varKinds.var,R,B,ue)}assign(R,B,ue){return this._leafNode(new p(R,B,ue))}add(R,B){return this._leafNode(new h(R,e.operators.ADD,B))}code(R){return typeof R=="function"?R():R!==t.nil&&this._leafNode(new m(R)),this}object(...R){let B=["{"];for(let[ue,ke]of R)B.length>1&&B.push(","),B.push(ue),(ue!==ke||this.opts.es5)&&(B.push(":"),(0,t.addCodeArg)(B,ke));return B.push("}"),new t._Code(B)}if(R,B,ue){if(this._blockNode(new Q(R)),B&&ue)this.code(B).else().code(ue).endIf();else if(B)this.code(B).endIf();else if(ue)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(R){return this._elseNode(new Q(R))}else(){return this._elseNode(new M)}endIf(){return this._endBlockNode(Q,M)}_for(R,B){return this._blockNode(R),B&&this.code(B).endFor(),this}for(R,B){return this._for(new X(R),B)}forRange(R,B,ue,ke,$e=this.opts.es5?r.varKinds.var:r.varKinds.let){let ct=this._scope.toName(R);return this._for(new de($e,ct,B,ue),()=>ke(ct))}forOf(R,B,ue,ke=r.varKinds.const){let $e=this._scope.toName(R);if(this.opts.es5){let ct=B instanceof t.Name?B:this.var("_arr",B);return this.forRange("_i",0,(0,t._)(ie||(ie=T(["",".length"])),ct),An=>{this.var($e,(0,t._)(le||(le=T(["","[","]"])),ct,An)),ue($e)})}return this._for(new $("of",ke,$e,B),()=>ue($e))}forIn(R,B,ue,ke=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(R,(0,t._)(be||(be=T(["Object.keys(",")"])),B),ue);let $e=this._scope.toName(R);return this._for(new $("in",ke,$e,B),()=>ue($e))}endFor(){return this._endBlockNode(Y)}label(R){return this._leafNode(new N(R))}break(R){return this._leafNode(new O(R))}return(R){let B=new L;if(this._blockNode(B),this.code(R),B.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(L)}try(R,B,ue){if(!B&&!ue)throw new Error('CodeGen: "try" without "catch" and "finally"');let ke=new te;if(this._blockNode(ke),this.code(R),B){let $e=this.name("e");this._currNode=ke.catch=new V($e),B($e)}return ue&&(this._currNode=ke.finally=new re,this.code(ue)),this._endBlockNode(V,re)}throw(R){return this._leafNode(new y(R))}block(R,B){return this._blockStarts.push(this._nodes.length),R&&this.code(R).endBlock(B),this}endBlock(R){let B=this._blockStarts.pop();if(B===void 0)throw new Error("CodeGen: not in self-balancing block");let ue=this._nodes.length-B;if(ue<0||R!==void 0&&ue!==R)throw new Error("CodeGen: wrong number of nodes: ".concat(ue," vs ").concat(R," expected"));return this._nodes.length=B,this}func(R,B=t.nil,ue,ke){return this._blockNode(new _(R,B,ue)),ke&&this.code(ke).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(R=1){for(;R-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(R){return this._currNode.nodes.push(R),this}_blockNode(R){this._currNode.nodes.push(R),this._nodes.push(R)}_endBlockNode(R,B){let ue=this._currNode;if(ue instanceof R||B&&ue instanceof B)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(B?"".concat(R.kind,"/").concat(B.kind):R.kind,'"'))}_elseNode(R){let B=this._currNode;if(!(B instanceof Q))throw new Error('CodeGen: "else" without "if"');return this._currNode=B.else=R,this}get _root(){return this._nodes[0]}get _currNode(){let R=this._nodes;return R[R.length-1]}set _currNode(R){let B=this._nodes;B[B.length-1]=R}};o(he,"CodeGen");var ve=he;e.CodeGen=ve;function je(xe,R){for(let B in R)xe[B]=(xe[B]||0)+(R[B]||0);return xe}o(je,"addNames");function Oe(xe,R){return R instanceof t._CodeOrName?je(xe,R.names):xe}o(Oe,"addExprNames");function ge(xe,R,B){if(xe instanceof t.Name)return ue(xe);if(!ke(xe))return xe;return new t._Code(xe._items.reduce(($e,ct)=>(ct instanceof t.Name&&(ct=ue(ct)),ct instanceof t._Code?$e.push(...ct._items):$e.push(ct),$e),[]));function ue($e){let ct=B[$e.str];return ct===void 0||R[$e.str]!==1?$e:(delete R[$e.str],ct)}function ke($e){return $e instanceof t._Code&&$e._items.some(ct=>ct instanceof t.Name&&R[ct.str]===1&&B[ct.str]!==void 0)}}o(ge,"optimizeExpr");function Re(xe,R){for(let B in R)xe[B]=(xe[B]||0)-(R[B]||0)}o(Re,"subtractNames");var De;function We(xe){return typeof xe=="boolean"||typeof xe=="number"||xe===null?!xe:(0,t._)(De||(De=T(["!",""])),wr(xe))}o(We,"not"),e.not=We;var ir=Nr(e.operators.AND);function $t(...xe){return xe.reduce(ir)}o($t,"and"),e.and=$t;var Jr=Nr(e.operators.OR);function ar(...xe){return xe.reduce(Jr)}o(ar,"or"),e.or=ar;var Ar;function Nr(xe){return(R,B)=>R===t.nil?B:B===t.nil?R:(0,t._)(Ar||(Ar=T([""," "," ",""])),wr(R),xe,wr(B))}o(Nr,"mappend");var _r;function wr(xe){return xe instanceof t.Name?xe:(0,t._)(_r||(_r=T(["(",")"])),xe)}o(wr,"par")}),ze=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;var t=Ae(),r=pi();function n(_){let j={};for(let L of _)j[L]=!0;return j}o(n,"toHash"),e.toHash=n;function i(_,j){return typeof j=="boolean"?j:Object.keys(j).length===0?!0:(a(_,j),!s(j,_.self.RULES.all))}o(i,"alwaysValidSchema"),e.alwaysValidSchema=i;function a(_,j=_.schema){let{opts:L,self:G}=_;if(!L.strictSchema||typeof j=="boolean")return;let te=G.RULES.keywords;for(let E in j)te[E]||D(_,'unknown keyword: "'.concat(E,'"'))}o(a,"checkUnknownRules"),e.checkUnknownRules=a;function s(_,j){if(typeof _=="boolean")return!_;for(let L in _)if(j[L])return!0;return!1}o(s,"schemaHasRules"),e.schemaHasRules=s;function l(_,j){if(typeof _=="boolean")return!_;for(let L in _)if(L!=="$ref"&&j.all[L])return!0;return!1}o(l,"schemaHasRulesButRef"),e.schemaHasRulesButRef=l;var d,c;function p({topSchemaRef:_,schemaPath:j},L,G,te){if(!te){if(typeof L=="number"||typeof L=="boolean")return L;if(typeof L=="string")return(0,t._)(d||(d=T(["",""])),L)}return(0,t._)(c||(c=T(["","","",""])),_,j,(0,t.getProperty)(G))}o(p,"schemaRefOrVal"),e.schemaRefOrVal=p;function f(_){return N(decodeURIComponent(_))}o(f,"unescapeFragment"),e.unescapeFragment=f;function h(_){return encodeURIComponent(w(_))}o(h,"escapeFragment"),e.escapeFragment=h;function w(_){return typeof _=="number"?"".concat(_):_.replace(/~/g,"~0").replace(/\//g,"~1")}o(w,"escapeJsonPointer"),e.escapeJsonPointer=w;function N(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}o(N,"unescapeJsonPointer"),e.unescapeJsonPointer=N;function k(_,j){if(Array.isArray(_))for(let L of _)j(L);else j(_)}o(k,"eachItem"),e.eachItem=k;function O({mergeNames:_,mergeToName:j,mergeValues:L,resultToName:G}){return(te,E,V,A)=>{let re=V===void 0?E:V instanceof t.Name?(E instanceof t.Name?_(te,E,V):j(te,E,V),V):E instanceof t.Name?(j(te,V,E),E):L(E,V);return A===t.Name&&!(re instanceof t.Name)?G(te,re):re}}o(O,"makeMergeEvaluated");var g,y,I,m,b,x,P,F,S,C;e.mergeEvaluated={props:O({mergeNames:o((_,j,L)=>_.if((0,t._)(g||(g=T([""," !== true && "," !== undefined"])),L,j),()=>{_.if((0,t._)(y||(y=T([""," === true"])),j),()=>_.assign(L,!0),()=>_.assign(L,(0,t._)(I||(I=T([""," || {}"])),L)).code((0,t._)(m||(m=T(["Object.assign(",", ",")"])),L,j)))}),"mergeNames"),mergeToName:o((_,j,L)=>_.if((0,t._)(b||(b=T([""," !== true"])),L),()=>{j===!0?_.assign(L,!0):(_.assign(L,(0,t._)(x||(x=T([""," || {}"])),L)),Q(_,L,j))}),"mergeToName"),mergeValues:o((_,j)=>_===!0?!0:oe(oe({},_),j),"mergeValues"),resultToName:M}),items:O({mergeNames:o((_,j,L)=>_.if((0,t._)(P||(P=T([""," !== true && "," !== undefined"])),L,j),()=>_.assign(L,(0,t._)(F||(F=T([""," === true ? true : "," > "," ? "," : ",""])),j,L,j,L,j))),"mergeNames"),mergeToName:o((_,j,L)=>_.if((0,t._)(S||(S=T([""," !== true"])),L),()=>_.assign(L,j===!0?!0:(0,t._)(C||(C=T([""," > "," ? "," : ",""])),L,j,L,j))),"mergeToName"),mergeValues:o((_,j)=>_===!0?!0:Math.max(_,j),"mergeValues"),resultToName:o((_,j)=>_.var("items",j),"resultToName")})};var q;function M(_,j){if(j===!0)return _.var("props",!0);let L=_.var("props",(0,t._)(q||(q=T(["{}"]))));return j!==void 0&&Q(_,L,j),L}o(M,"evaluatedPropsToName"),e.evaluatedPropsToName=M;var z;function Q(_,j,L){Object.keys(L).forEach(G=>_.assign((0,t._)(z||(z=T(["","",""])),j,(0,t.getProperty)(G)),!0))}o(Q,"setEvaluated"),e.setEvaluated=Q;var ae={};function Y(_,j){return _.scopeValue("func",{ref:j,code:ae[j.code]||(ae[j.code]=new r._Code(j.code))})}o(Y,"useFunc"),e.useFunc=Y;var ne;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(ne||(e.Type=ne={}));var X,J,de,H;function $(_,j,L){if(_ instanceof t.Name){let G=j===ne.Num;return L?G?(0,t._)(X||(X=T(['"[" + ',' + "]"'])),_):(0,t._)(J||(J=T([`"['" + `,` + "']"`])),_):G?(0,t._)(de||(de=T(['"/" + ',""])),_):(0,t._)(H||(H=T(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),_)}return L?(0,t.getProperty)(_).toString():"/"+w(_)}o($,"getErrorPath"),e.getErrorPath=$;function D(_,j,L=_.opts.strictSchema){if(L){if(j="strict mode: ".concat(j),L===!0)throw new Error(j);_.self.logger.warn(j)}}o(D,"checkStrictMode"),e.checkStrictMode=D}),Xr=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};e.default=r}),Ri=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=Ae(),r=ze(),n=Xr(),i;e.keywordError={message:o(({keyword:j})=>(0,t.str)(i||(i=T(['must pass "','" keyword validation'])),j),"message")};var a,s;e.keyword$DataError={message:o(({keyword:j,schemaType:L})=>L?(0,t.str)(a||(a=T(['"','" keyword must be '," ($data)"])),j,L):(0,t.str)(s||(s=T(['"','" keyword is invalid ($data)'])),j),"message")};var l;function d(j,L=e.keywordError,G,te){let{it:E}=j,{gen:V,compositeRule:A,allErrors:re}=E,ie=ae(j,L,G);te??(A||re)?S(V,ie):M(E,(0,t._)(l||(l=T(["[","]"])),ie))}o(d,"reportError"),e.reportError=d;function c(j,L=e.keywordError,G){let{it:te}=j,{gen:E,compositeRule:V,allErrors:A}=te,re=ae(j,L,G);S(E,re),V||A||M(te,n.default.vErrors)}o(c,"reportExtraError"),e.reportExtraError=c;var p,f;function h(j,L){j.assign(n.default.errors,L),j.if((0,t._)(p||(p=T([""," !== null"])),n.default.vErrors),()=>j.if(L,()=>j.assign((0,t._)(f||(f=T(["",".length"])),n.default.vErrors),L),()=>j.assign(n.default.vErrors,null)))}o(h,"resetErrorsCount"),e.resetErrorsCount=h;var w,N,k,O,g,y,I;function m({gen:j,keyword:L,schemaValue:G,data:te,errsCount:E,it:V}){if(E===void 0)throw new Error("ajv implementation error");let A=j.name("err");j.forRange("i",E,n.default.errors,re=>{j.const(A,(0,t._)(w||(w=T(["","[","]"])),n.default.vErrors,re)),j.if((0,t._)(N||(N=T(["",".instancePath === undefined"])),A),()=>j.assign((0,t._)(k||(k=T(["",".instancePath"])),A),(0,t.strConcat)(n.default.instancePath,V.errorPath))),j.assign((0,t._)(O||(O=T(["",".schemaPath"])),A),(0,t.str)(g||(g=T(["","/",""])),V.errSchemaPath,L)),V.opts.verbose&&(j.assign((0,t._)(y||(y=T(["",".schema"])),A),G),j.assign((0,t._)(I||(I=T(["",".data"])),A),te))})}o(m,"extendErrors"),e.extendErrors=m;var b,x,P,F;function S(j,L){let G=j.const("err",L);j.if((0,t._)(b||(b=T([""," === null"])),n.default.vErrors),()=>j.assign(n.default.vErrors,(0,t._)(x||(x=T(["[","]"])),G)),(0,t._)(P||(P=T(["",".push(",")"])),n.default.vErrors,G)),j.code((0,t._)(F||(F=T(["","++"])),n.default.errors))}o(S,"addError");var C,q;function M(j,L){let{gen:G,validateName:te,schemaEnv:E}=j;E.$async?G.throw((0,t._)(C||(C=T(["new ","(",")"])),j.ValidationError,L)):(G.assign((0,t._)(q||(q=T(["",".errors"])),te),L),G.return(!1))}o(M,"returnErrors");var z={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")},Q;function ae(j,L,G){let{createErrors:te}=j.it;return te===!1?(0,t._)(Q||(Q=T(["{}"]))):Y(j,L,G)}o(ae,"errorObjectCode");function Y(j,L,G={}){let{gen:te,it:E}=j,V=[X(E,G),H(j,G)];return _(j,L,V),te.object(...V)}o(Y,"errorObject");var ne;function X({errorPath:j},{instancePath:L}){let G=L?(0,t.str)(ne||(ne=T(["","",""])),j,(0,r.getErrorPath)(L,r.Type.Str)):j;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,G)]}o(X,"errorInstancePath");var J,de;function H({keyword:j,it:{errSchemaPath:L}},{schemaPath:G,parentSchema:te}){let E=te?L:(0,t.str)(J||(J=T(["","/",""])),L,j);return G&&(E=(0,t.str)(de||(de=T(["","",""])),E,(0,r.getErrorPath)(G,r.Type.Str))),[z.schemaPath,E]}o(H,"errorSchemaPath");var $,D;function _(j,{params:L,message:G},te){let{keyword:E,data:V,schemaValue:A,it:re}=j,{opts:ie,propertyName:le,topSchemaRef:be,schemaPath:he}=re;te.push([z.keyword,E],[z.params,typeof L=="function"?L(j):L||(0,t._)($||($=T(["{}"])))]),ie.messages&&te.push([z.message,typeof G=="function"?G(j):G]),ie.verbose&&te.push([z.schema,A],[z.parentSchema,(0,t._)(D||(D=T(["","",""])),be,he)],[n.default.data,V]),le&&te.push([z.propertyName,le])}o(_,"extraErrorProps")}),wP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;var t=Ri(),r=Ae(),n=Xr(),i={message:"boolean schema is false"},a;function s(c){let{gen:p,schema:f,validateName:h}=c;f===!1?d(c,!1):typeof f=="object"&&f.$async===!0?p.return(n.default.data):(p.assign((0,r._)(a||(a=T(["",".errors"])),h),null),p.return(!0))}o(s,"topBoolOrEmptySchema"),e.topBoolOrEmptySchema=s;function l(c,p){let{gen:f,schema:h}=c;h===!1?(f.var(p,!1),d(c)):f.var(p,!0)}o(l,"boolOrEmptySchema"),e.boolOrEmptySchema=l;function d(c,p){let{gen:f,data:h}=c,w={gen:f,keyword:"false schema",data:h,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:c};(0,t.reportError)(w,i,void 0,p)}o(d,"falseSchemaError")}),_u=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;var t=["string","number","integer","boolean","null","object","array"],r=new Set(t);function n(a){return typeof a=="string"&&r.has(a)}o(n,"isJSONType"),e.isJSONType=n;function i(){let a={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:Me(oe({},a),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},a.number,a.string,a.array,a.object],post:{rules:[]},all:{},keywords:{}}}o(i,"getRules"),e.getRules=i}),$u=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0;function t({schema:i,self:a},s){let l=a.RULES.types[s];return l&&l!==!0&&r(i,l)}o(t,"schemaHasRulesForType"),e.schemaHasRulesForType=t;function r(i,a){return a.rules.some(s=>n(i,s))}o(r,"shouldUseGroup"),e.shouldUseGroup=r;function n(i,a){var s;return i[a.keyword]!==void 0||((s=a.definition.implements)===null||s===void 0?void 0:s.some(l=>i[l]!==void 0))}o(n,"shouldUseRule"),e.shouldUseRule=n}),mi=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;var t=_u(),r=$u(),n=Ri(),i=Ae(),a=ze(),s;(function(he){he[he.Correct=0]="Correct",he[he.Wrong=1]="Wrong"})(s||(e.DataType=s={}));function l(he){let ve=d(he.type);if(ve.includes("null")){if(he.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!ve.length&&he.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');he.nullable===!0&&ve.push("null")}return ve}o(l,"getSchemaTypes"),e.getSchemaTypes=l;function d(he){let ve=Array.isArray(he)?he:he?[he]:[];if(ve.every(t.isJSONType))return ve;throw new Error("type must be JSONType or JSONType[]: "+ve.join(","))}o(d,"getJSONTypes"),e.getJSONTypes=d;function c(he,ve){let{gen:je,data:Oe,opts:ge}=he,Re=f(ve,ge.coerceTypes),De=ve.length>0&&!(Re.length===0&&ve.length===1&&(0,r.schemaHasRulesForType)(he,ve[0]));if(De){let We=V(ve,Oe,ge.strictNumbers,s.Wrong);je.if(We,()=>{Re.length?Y(he,ve,Re):le(he)})}return De}o(c,"coerceAndCheckDataType"),e.coerceAndCheckDataType=c;var p=new Set(["string","number","integer","boolean","null"]);function f(he,ve){return ve?he.filter(je=>p.has(je)||ve==="array"&&je==="array"):[]}o(f,"coerceToTypes");var h,w,N,k,O,g,y,I,m,b,x,P,F,S,C,q,M,z,Q,ae;function Y(he,ve,je){let{gen:Oe,data:ge,opts:Re}=he,De=Oe.let("dataType",(0,i._)(h||(h=T(["typeof ",""])),ge)),We=Oe.let("coerced",(0,i._)(w||(w=T(["undefined"]))));Re.coerceTypes==="array"&&Oe.if((0,i._)(N||(N=T([""," == 'object' && Array.isArray(",") && ",".length == 1"])),De,ge,ge),()=>Oe.assign(ge,(0,i._)(k||(k=T(["","[0]"])),ge)).assign(De,(0,i._)(O||(O=T(["typeof ",""])),ge)).if(V(ve,ge,Re.strictNumbers),()=>Oe.assign(We,ge))),Oe.if((0,i._)(g||(g=T([""," !== undefined"])),We));for(let $t of je)(p.has($t)||$t==="array"&&Re.coerceTypes==="array")&&ir($t);Oe.else(),le(he),Oe.endIf(),Oe.if((0,i._)(y||(y=T([""," !== undefined"])),We),()=>{Oe.assign(ge,We),J(he,We)});function ir($t){switch($t){case"string":Oe.elseIf((0,i._)(I||(I=T(["",' == "number" || ',' == "boolean"'])),De,De)).assign(We,(0,i._)(m||(m=T(['"" + ',""])),ge)).elseIf((0,i._)(b||(b=T([""," === null"])),ge)).assign(We,(0,i._)(x||(x=T(['""']))));return;case"number":Oe.elseIf((0,i._)(P||(P=T(["",' == "boolean" || ',` === null
              || (`,' == "string" && '," && "," == +",")"])),De,ge,De,ge,ge,ge)).assign(We,(0,i._)(F||(F=T(["+",""])),ge));return;case"integer":Oe.elseIf((0,i._)(S||(S=T(["",' === "boolean" || ',` === null
              || (`,' === "string" && '," && "," == +"," && !("," % 1))"])),De,ge,De,ge,ge,ge,ge)).assign(We,(0,i._)(C||(C=T(["+",""])),ge));return;case"boolean":Oe.elseIf((0,i._)(q||(q=T(["",' === "false" || '," === 0 || "," === null"])),ge,ge,ge)).assign(We,!1).elseIf((0,i._)(M||(M=T(["",' === "true" || '," === 1"])),ge,ge)).assign(We,!0);return;case"null":Oe.elseIf((0,i._)(z||(z=T(["",' === "" || '," === 0 || "," === false"])),ge,ge,ge)),Oe.assign(We,null);return;case"array":Oe.elseIf((0,i._)(Q||(Q=T(["",' === "string" || ',` === "number"
              || `,' === "boolean" || '," === null"])),De,De,De,ge)).assign(We,(0,i._)(ae||(ae=T(["[","]"])),ge))}}o(ir,"coerceSpecificType")}o(Y,"coerceData");var ne,X;function J({gen:he,parentData:ve,parentDataProperty:je},Oe){he.if((0,i._)(ne||(ne=T([""," !== undefined"])),ve),()=>he.assign((0,i._)(X||(X=T(["","[","]"])),ve,je),Oe))}o(J,"assignParentData");var de,H,$,D,_,j,L;function G(he,ve,je,Oe=s.Correct){let ge=Oe===s.Correct?i.operators.EQ:i.operators.NEQ,Re;switch(he){case"null":return(0,i._)(de||(de=T([""," "," null"])),ve,ge);case"array":Re=(0,i._)(H||(H=T(["Array.isArray(",")"])),ve);break;case"object":Re=(0,i._)($||($=T([""," && typeof ",' == "object" && !Array.isArray(',")"])),ve,ve,ve);break;case"integer":Re=De((0,i._)(D||(D=T(["!("," % 1) && !isNaN(",")"])),ve,ve));break;case"number":Re=De();break;default:return(0,i._)(_||(_=T(["typeof "," "," ",""])),ve,ge,he)}return Oe===s.Correct?Re:(0,i.not)(Re);function De(We=i.nil){return(0,i.and)((0,i._)(j||(j=T(["typeof ",' == "number"'])),ve),We,je?(0,i._)(L||(L=T(["isFinite(",")"])),ve):i.nil)}}o(G,"checkDataType"),e.checkDataType=G;var te,E;function V(he,ve,je,Oe){if(he.length===1)return G(he[0],ve,je,Oe);let ge,Re=(0,a.toHash)(he);if(Re.array&&Re.object){let De=(0,i._)(te||(te=T(["typeof ",' != "object"'])),ve);ge=Re.null?De:(0,i._)(E||(E=T(["!"," || ",""])),ve,De),delete Re.null,delete Re.array,delete Re.object}else ge=i.nil;Re.number&&delete Re.integer;for(let De in Re)ge=(0,i.and)(ge,G(De,ve,je,Oe));return ge}o(V,"checkDataTypes"),e.checkDataTypes=V;var A,re,ie={message:o(({schema:he})=>"must be ".concat(he),"message"),params:o(({schema:he,schemaValue:ve})=>typeof he=="string"?(0,i._)(A||(A=T(["{type: ","}"])),he):(0,i._)(re||(re=T(["{type: ","}"])),ve),"params")};function le(he){let ve=be(he);(0,n.reportError)(ve,ie)}o(le,"reportTypeError"),e.reportTypeError=le;function be(he){let{gen:ve,data:je,schema:Oe}=he,ge=(0,a.schemaRefOrVal)(he,Oe,"type");return{gen:ve,keyword:"type",data:je,schema:Oe.type,schemaCode:ge,schemaValue:ge,parentSchema:Oe,params:{},it:he}}o(be,"getTypeErrorContext")}),xP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;var t=Ae(),r=ze();function n(c,p){let{properties:f,items:h}=c.schema;if(p==="object"&&f)for(let w in f)d(c,w,f[w].default);else p==="array"&&Array.isArray(h)&&h.forEach((w,N)=>d(c,N,w.default))}o(n,"assignDefaults"),e.assignDefaults=n;var i,a,s,l;function d(c,p,f){let{gen:h,compositeRule:w,data:N,opts:k}=c;if(f===void 0)return;let O=(0,t._)(i||(i=T(["","",""])),N,(0,t.getProperty)(p));if(w){(0,r.checkStrictMode)(c,"default is ignored for: ".concat(O));return}let g=(0,t._)(a||(a=T([""," === undefined"])),O);k.useDefaults==="empty"&&(g=(0,t._)(s||(s=T([""," || "," === null || ",' === ""'])),g,O,O)),h.if(g,(0,t._)(l||(l=T([""," = ",""])),O,(0,t.stringify)(f)))}o(d,"assignDefault")}),hr=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateUnion=e.validateArray=e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.isOwnProperty=e.hasPropFunc=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;var t=Ae(),r=ze(),n=Xr(),i=ze(),a;function s(X,J){let{gen:de,data:H,it:$}=X;de.if(y(de,H,J,$.opts.ownProperties),()=>{X.setParams({missingProperty:(0,t._)(a||(a=T(["",""])),J)},!0),X.error()})}o(s,"checkReportMissingProp"),e.checkReportMissingProp=s;var l;function d({gen:X,data:J,it:{opts:de}},H,$){return(0,t.or)(...H.map(D=>(0,t.and)(y(X,J,D,de.ownProperties),(0,t._)(l||(l=T([""," = ",""])),$,D))))}o(d,"checkMissingProp"),e.checkMissingProp=d;function c(X,J){X.setParams({missingProperty:J},!0),X.error()}o(c,"reportMissingProp"),e.reportMissingProp=c;var p;function f(X){return X.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)(p||(p=T(["Object.prototype.hasOwnProperty"])))})}o(f,"hasPropFunc"),e.hasPropFunc=f;var h;function w(X,J,de){return(0,t._)(h||(h=T(["",".call(",", ",")"])),f(X),J,de)}o(w,"isOwnProperty"),e.isOwnProperty=w;var N,k;function O(X,J,de,H){let $=(0,t._)(N||(N=T(["",""," !== undefined"])),J,(0,t.getProperty)(de));return H?(0,t._)(k||(k=T([""," && ",""])),$,w(X,J,de)):$}o(O,"propertyInData"),e.propertyInData=O;var g;function y(X,J,de,H){let $=(0,t._)(g||(g=T(["",""," === undefined"])),J,(0,t.getProperty)(de));return H?(0,t.or)($,(0,t.not)(w(X,J,de))):$}o(y,"noPropertyInData"),e.noPropertyInData=y;function I(X){return X?Object.keys(X).filter(J=>J!=="__proto__"):[]}o(I,"allSchemaProperties"),e.allSchemaProperties=I;function m(X,J){return I(J).filter(de=>!(0,r.alwaysValidSchema)(X,J[de]))}o(m,"schemaProperties"),e.schemaProperties=m;var b,x,P,F;function S({schemaCode:X,data:J,it:{gen:de,topSchemaRef:H,schemaPath:$,errorPath:D},it:_},j,L,G){let te=G?(0,t._)(b||(b=T(["",", ",", ","",""])),X,J,H,$):J,E=[[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,D)],[n.default.parentData,_.parentData],[n.default.parentDataProperty,_.parentDataProperty],[n.default.rootData,n.default.rootData]];_.opts.dynamicRef&&E.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);let V=(0,t._)(x||(x=T(["",", ",""])),te,de.object(...E));return L!==t.nil?(0,t._)(P||(P=T(["",".call(",", ",")"])),j,L,V):(0,t._)(F||(F=T(["","(",")"])),j,V)}o(S,"callValidateCode"),e.callValidateCode=S;var C,q=(0,t._)(C||(C=T(["new RegExp"]))),M;function z({gen:X,it:{opts:J}},de){let H=J.unicodeRegExp?"u":"",{regExp:$}=J.code,D=$(de,H);return X.scopeValue("pattern",{key:D.toString(),ref:D,code:(0,t._)(M||(M=T(["","(",", ",")"])),$.code==="new RegExp"?q:(0,i.useFunc)(X,$),de,H)})}o(z,"usePattern"),e.usePattern=z;var Q;function ae(X){let{gen:J,data:de,keyword:H,it:$}=X,D=J.name("valid");if($.allErrors){let j=J.let("valid",!0);return _(()=>J.assign(j,!1)),j}return J.var(D,!0),_(()=>J.break()),D;function _(j){let L=J.const("len",(0,t._)(Q||(Q=T(["",".length"])),de));J.forRange("i",0,L,G=>{X.subschema({keyword:H,dataProp:G,dataPropType:r.Type.Num},D),J.if((0,t.not)(D),j)})}}o(ae,"validateArray"),e.validateArray=ae;var Y;function ne(X){let{gen:J,schema:de,keyword:H,it:$}=X;if(!Array.isArray(de))throw new Error("ajv implementation error");if(de.some(j=>(0,r.alwaysValidSchema)($,j))&&!$.opts.unevaluated)return;let D=J.let("valid",!1),_=J.name("_valid");J.block(()=>de.forEach((j,L)=>{let G=X.subschema({keyword:H,schemaProp:L,compositeRule:!0},_);J.assign(D,(0,t._)(Y||(Y=T([""," || ",""])),D,_)),X.mergeValidEvaluated(G,_)||J.if((0,t.not)(D))})),X.result(D,()=>X.reset(),()=>X.error(!0))}o(ne,"validateUnion"),e.validateUnion=ne}),OP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateKeywordUsage=e.validSchemaType=e.funcKeywordCode=e.macroKeywordCode=void 0;var t=Ae(),r=Xr(),n=hr(),i=Ri();function a(P,F){let{gen:S,keyword:C,schema:q,parentSchema:M,it:z}=P,Q=F.macro.call(z.self,q,M,z),ae=m(S,C,Q);z.opts.validateSchema!==!1&&z.self.validateSchema(Q,!0);let Y=S.name("valid");P.subschema({schema:Q,schemaPath:t.nil,errSchemaPath:"".concat(z.errSchemaPath,"/").concat(C),topSchemaRef:ae,compositeRule:!0},Y),P.pass(Y,()=>P.error(!0))}o(a,"macroKeywordCode"),e.macroKeywordCode=a;var s,l,d,c,p,f;function h(P,F){var S;let{gen:C,keyword:q,schema:M,parentSchema:z,$data:Q,it:ae}=P;I(ae,F);let Y=!Q&&F.compile?F.compile.call(ae.self,M,z,ae):F.validate,ne=m(C,q,Y),X=C.let("valid");P.block$data(X,J),P.ok((S=F.valid)!==null&&S!==void 0?S:X);function J(){if(F.errors===!1)$(),F.modifying&&N(P),D(()=>P.error());else{let _=F.async?de():H();F.modifying&&N(P),D(()=>y(P,_))}}o(J,"validateKeyword");function de(){let _=C.let("ruleErrs",null);return C.try(()=>$((0,t._)(s||(s=T(["await "])))),j=>C.assign(X,!1).if((0,t._)(l||(l=T([""," instanceof ",""])),j,ae.ValidationError),()=>C.assign(_,(0,t._)(d||(d=T(["",".errors"])),j)),()=>C.throw(j))),_}o(de,"validateAsync");function H(){let _=(0,t._)(c||(c=T(["",".errors"])),ne);return C.assign(_,null),$(t.nil),_}o(H,"validateSync");function $(_=F.async?(0,t._)(p||(p=T(["await "]))):t.nil){let j=ae.opts.passContext?r.default.this:r.default.self,L=!("compile"in F&&!Q||F.schema===!1);C.assign(X,(0,t._)(f||(f=T(["","",""])),_,(0,n.callValidateCode)(P,ne,j,L)),F.modifying)}o($,"assignValid");function D(_){var j;C.if((0,t.not)((j=F.valid)!==null&&j!==void 0?j:X),_)}o(D,"reportErrs")}o(h,"funcKeywordCode"),e.funcKeywordCode=h;var w;function N(P){let{gen:F,data:S,it:C}=P;F.if(C.parentData,()=>F.assign(S,(0,t._)(w||(w=T(["","[","]"])),C.parentData,C.parentDataProperty)))}o(N,"modifyData");var k,O,g;function y(P,F){let{gen:S}=P;S.if((0,t._)(k||(k=T(["Array.isArray(",")"])),F),()=>{S.assign(r.default.vErrors,(0,t._)(O||(O=T([""," === null ? "," : ",".concat(",")"])),r.default.vErrors,F,r.default.vErrors,F)).assign(r.default.errors,(0,t._)(g||(g=T(["",".length"])),r.default.vErrors)),(0,i.extendErrors)(P)},()=>P.error())}o(y,"addErrs");function I({schemaEnv:P},F){if(F.async&&!P.$async)throw new Error("async keyword in sync schema")}o(I,"checkAsyncKeyword");function m(P,F,S){if(S===void 0)throw new Error('keyword "'.concat(F,'" failed to compile'));return P.scopeValue("keyword",typeof S=="function"?{ref:S}:{ref:S,code:(0,t.stringify)(S)})}o(m,"useKeyword");function b(P,F,S=!1){return!F.length||F.some(C=>C==="array"?Array.isArray(P):C==="object"?P&&typeof P=="object"&&!Array.isArray(P):typeof P==C||S&&typeof P>"u")}o(b,"validSchemaType"),e.validSchemaType=b;function x({schema:P,opts:F,self:S,errSchemaPath:C},q,M){if(Array.isArray(q.keyword)?!q.keyword.includes(M):q.keyword!==M)throw new Error("ajv implementation error");let z=q.dependencies;if(z!=null&&z.some(Q=>!Object.prototype.hasOwnProperty.call(P,Q)))throw new Error("parent schema must have dependencies of ".concat(M,": ").concat(z.join(",")));if(q.validateSchema&&!q.validateSchema(P[M])){let Q='keyword "'.concat(M,'" value is invalid at path "').concat(C,'": ')+S.errorsText(q.validateSchema.errors);if(F.validateSchema==="log")S.logger.error(Q);else throw new Error(Q)}}o(x,"validateKeywordUsage"),e.validateKeywordUsage=x}),PP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.extendSubschemaMode=e.extendSubschemaData=e.getSubschema=void 0;var t=Ae(),r=ze(),n,i;function a(f,{keyword:h,schemaProp:w,schema:N,schemaPath:k,errSchemaPath:O,topSchemaRef:g}){if(h!==void 0&&N!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(h!==void 0){let y=f.schema[h];return w===void 0?{schema:y,schemaPath:(0,t._)(n||(n=T(["","",""])),f.schemaPath,(0,t.getProperty)(h)),errSchemaPath:"".concat(f.errSchemaPath,"/").concat(h)}:{schema:y[w],schemaPath:(0,t._)(i||(i=T(["","","",""])),f.schemaPath,(0,t.getProperty)(h),(0,t.getProperty)(w)),errSchemaPath:"".concat(f.errSchemaPath,"/").concat(h,"/").concat((0,r.escapeFragment)(w))}}if(N!==void 0){if(k===void 0||O===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:N,schemaPath:k,topSchemaRef:g,errSchemaPath:O}}throw new Error('either "keyword" or "schema" must be passed')}o(a,"getSubschema"),e.getSubschema=a;var s,l,d;function c(f,h,{dataProp:w,dataPropType:N,data:k,dataTypes:O,propertyName:g}){if(k!==void 0&&w!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:y}=h;if(w!==void 0){let{errorPath:m,dataPathArr:b,opts:x}=h,P=y.let("data",(0,t._)(s||(s=T(["","",""])),h.data,(0,t.getProperty)(w)),!0);I(P),f.errorPath=(0,t.str)(l||(l=T(["","",""])),m,(0,r.getErrorPath)(w,N,x.jsPropertySyntax)),f.parentDataProperty=(0,t._)(d||(d=T(["",""])),w),f.dataPathArr=[...b,f.parentDataProperty]}if(k!==void 0){let m=k instanceof t.Name?k:y.let("data",k,!0);I(m),g!==void 0&&(f.propertyName=g)}O&&(f.dataTypes=O);function I(m){f.data=m,f.dataLevel=h.dataLevel+1,f.dataTypes=[],h.definedProperties=new Set,f.parentData=h.data,f.dataNames=[...h.dataNames,m]}o(I,"dataContextProps")}o(c,"extendSubschemaData"),e.extendSubschemaData=c;function p(f,{jtdDiscriminator:h,jtdMetadata:w,compositeRule:N,createErrors:k,allErrors:O}){N!==void 0&&(f.compositeRule=N),k!==void 0&&(f.createErrors=k),O!==void 0&&(f.allErrors=O),f.jtdDiscriminator=h,f.jtdMetadata=w}o(p,"extendSubschemaMode"),e.extendSubschemaMode=p}),Ru=ye((e,t)=>{v(),t.exports=o(function r(n,i){if(n===i)return!0;if(n&&i&&typeof n=="object"&&typeof i=="object"){if(n.constructor!==i.constructor)return!1;var a,s,l;if(Array.isArray(n)){if(a=n.length,a!=i.length)return!1;for(s=a;s--!==0;)if(!r(n[s],i[s]))return!1;return!0}if(n.constructor===RegExp)return n.source===i.source&&n.flags===i.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===i.toString();if(l=Object.keys(n),a=l.length,a!==Object.keys(i).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(i,l[s]))return!1;for(s=a;s--!==0;){var d=l[s];if(!r(n[d],i[d]))return!1}return!0}return n!==n&&i!==i},"equal")}),EP=ye((e,t)=>{v();var r=t.exports=function(a,s,l){typeof s=="function"&&(l=s,s={}),l=s.cb||l;var d=typeof l=="function"?l:l.pre||function(){},c=l.post||function(){};n(s,d,c,a,"",a)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function n(a,s,l,d,c,p,f,h,w,N){if(d&&typeof d=="object"&&!Array.isArray(d)){s(d,c,p,f,h,w,N);for(var k in d){var O=d[k];if(Array.isArray(O)){if(k in r.arrayKeywords)for(var g=0;g<O.length;g++)n(a,s,l,O[g],c+"/"+k+"/"+g,p,c,k,d,g)}else if(k in r.propsKeywords){if(O&&typeof O=="object")for(var y in O)n(a,s,l,O[y],c+"/"+k+"/"+i(y),p,c,k,d,y)}else(k in r.keywords||a.allKeys&&!(k in r.skipKeywords))&&n(a,s,l,O,c+"/"+k,p,c,k,d)}l(d,c,p,f,h,w,N)}}o(n,"_traverse");function i(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}o(i,"escapeJsonPtr")}),Ci=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;var t=ze(),r=Ru(),n=EP(),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function a(O,g=!0){return typeof O=="boolean"?!0:g===!0?!l(O):g?d(O)<=g:!1}o(a,"inlineRef"),e.inlineRef=a;var s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(O){for(let g in O){if(s.has(g))return!0;let y=O[g];if(Array.isArray(y)&&y.some(l)||typeof y=="object"&&l(y))return!0}return!1}o(l,"hasRef");function d(O){let g=0;for(let y in O)if(y==="$ref"||(g++,!i.has(y)&&(typeof O[y]=="object"&&(0,t.eachItem)(O[y],I=>g+=d(I)),g===1/0)))return 1/0;return g}o(d,"countKeys");function c(O,g="",y){y!==!1&&(g=h(g));let I=O.parse(g);return p(O,I)}o(c,"getFullPath"),e.getFullPath=c;function p(O,g){return O.serialize(g).split("#")[0]+"#"}o(p,"_getFullPath"),e._getFullPath=p;var f=/#\/?$/;function h(O){return O?O.replace(f,""):""}o(h,"normalizeId"),e.normalizeId=h;function w(O,g,y){return y=h(y),O.resolve(g,y)}o(w,"resolveUrl"),e.resolveUrl=w;var N=/^[a-z_][-a-z0-9._]*$/i;function k(O,g){if(typeof O=="boolean")return{};let{schemaId:y,uriResolver:I}=this.opts,m=h(O[y]||g),b={"":m},x=c(I,m,!1),P={},F=new Set;return n(O,{allKeys:!0},(q,M,z,Q)=>{if(Q===void 0)return;let ae=x+M,Y=b[Q];typeof q[y]=="string"&&(Y=ne.call(this,q[y])),X.call(this,q.$anchor),X.call(this,q.$dynamicAnchor),b[M]=Y;function ne(J){let de=this.opts.uriResolver.resolve;if(J=h(Y?de(Y,J):J),F.has(J))throw C(J);F.add(J);let H=this.refs[J];return typeof H=="string"&&(H=this.refs[H]),typeof H=="object"?S(q,H.schema,J):J!==h(ae)&&(J[0]==="#"?(S(q,P[J],J),P[J]=q):this.refs[J]=ae),J}o(ne,"addRef");function X(J){if(typeof J=="string"){if(!N.test(J))throw new Error('invalid anchor "'.concat(J,'"'));ne.call(this,"#".concat(J))}}o(X,"addAnchor")}),P;function S(q,M,z){if(M!==void 0&&!r(q,M))throw C(z)}function C(q){return new Error('reference "'.concat(q,'" resolves to more than one schema'))}}o(k,"getSchemaRefs"),e.getSchemaRefs=k}),Mi=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.KeywordCxt=e.validateFunctionCode=void 0;var t=wP(),r=mi(),n=$u(),i=mi(),a=xP(),s=OP(),l=PP(),d=Ae(),c=Xr(),p=Ci(),f=ze(),h=Ri();function w(K){if(te(K)&&(A(K),G(K))){ae(K);return}g(K,()=>(0,t.topBoolOrEmptySchema)(K))}o(w,"validateFunctionCode"),e.validateFunctionCode=w;var N,k,O;function g({gen:K,validateName:W,schema:se,schemaEnv:pe,opts:Pe},Be){Pe.code.es5?K.func(W,(0,d._)(N||(N=T(["",", ",""])),c.default.data,c.default.valCxt),pe.$async,()=>{K.code((0,d._)(k||(k=T(['"use strict"; ',""])),j(se,Pe))),Q(K,Pe),K.code(Be)}):K.func(W,(0,d._)(O||(O=T(["",", ",""])),c.default.data,m(Pe)),pe.$async,()=>K.code(j(se,Pe)).code(Be))}o(g,"validateFunction");var y,I;function m(K){return(0,d._)(I||(I=T(["{",'="", ',", ",", ","=","","}={}"])),c.default.instancePath,c.default.parentData,c.default.parentDataProperty,c.default.rootData,c.default.data,K.dynamicRef?(0,d._)(y||(y=T([", ","={}"])),c.default.dynamicAnchors):d.nil)}o(m,"destructureValCxt");var b,x,P,F,S,C,q,M,z;function Q(K,W){K.if(c.default.valCxt,()=>{K.var(c.default.instancePath,(0,d._)(b||(b=T(["",".",""])),c.default.valCxt,c.default.instancePath)),K.var(c.default.parentData,(0,d._)(x||(x=T(["",".",""])),c.default.valCxt,c.default.parentData)),K.var(c.default.parentDataProperty,(0,d._)(P||(P=T(["",".",""])),c.default.valCxt,c.default.parentDataProperty)),K.var(c.default.rootData,(0,d._)(F||(F=T(["",".",""])),c.default.valCxt,c.default.rootData)),W.dynamicRef&&K.var(c.default.dynamicAnchors,(0,d._)(S||(S=T(["",".",""])),c.default.valCxt,c.default.dynamicAnchors))},()=>{K.var(c.default.instancePath,(0,d._)(C||(C=T(['""'])))),K.var(c.default.parentData,(0,d._)(q||(q=T(["undefined"])))),K.var(c.default.parentDataProperty,(0,d._)(M||(M=T(["undefined"])))),K.var(c.default.rootData,c.default.data),W.dynamicRef&&K.var(c.default.dynamicAnchors,(0,d._)(z||(z=T(["{}"]))))})}o(Q,"destructureValCxtES5");function ae(K){let{schema:W,opts:se,gen:pe}=K;g(K,()=>{se.$comment&&W.$comment&&ge(K),le(K),pe.let(c.default.vErrors,null),pe.let(c.default.errors,0),se.unevaluated&&D(K),re(K),$t(K)})}o(ae,"topSchemaObjCode");var Y,ne,X,J,de,H,$;function D(K){let{gen:W,validateName:se}=K;K.evaluated=W.const("evaluated",(0,d._)(Y||(Y=T(["",".evaluated"])),se)),W.if((0,d._)(ne||(ne=T(["",".dynamicProps"])),K.evaluated),()=>W.assign((0,d._)(X||(X=T(["",".props"])),K.evaluated),(0,d._)(J||(J=T(["undefined"]))))),W.if((0,d._)(de||(de=T(["",".dynamicItems"])),K.evaluated),()=>W.assign((0,d._)(H||(H=T(["",".items"])),K.evaluated),(0,d._)($||($=T(["undefined"])))))}o(D,"resetEvaluated");var _;function j(K,W){let se=typeof K=="object"&&K[W.schemaId];return se&&(W.code.source||W.code.process)?(0,d._)(_||(_=T(["/*# sourceURL="," */"])),se):d.nil}o(j,"funcSourceUrl");function L(K,W){if(te(K)&&(A(K),G(K))){V(K,W);return}(0,t.boolOrEmptySchema)(K,W)}o(L,"subschemaCode");function G({schema:K,self:W}){if(typeof K=="boolean")return!K;for(let se in K)if(W.RULES.all[se])return!0;return!1}o(G,"schemaCxtHasRules");function te(K){return typeof K.schema!="boolean"}o(te,"isSchemaObj");var E;function V(K,W){let{schema:se,gen:pe,opts:Pe}=K;Pe.$comment&&se.$comment&&ge(K),be(K),he(K);let Be=pe.const("_errs",c.default.errors);re(K,Be),pe.var(W,(0,d._)(E||(E=T([""," === ",""])),Be,c.default.errors))}o(V,"subSchemaObjCode");function A(K){(0,f.checkUnknownRules)(K),ie(K)}o(A,"checkKeywords");function re(K,W){if(K.opts.jtd)return _r(K,[],!1,W);let se=(0,r.getSchemaTypes)(K.schema),pe=(0,r.coerceAndCheckDataType)(K,se);_r(K,se,!pe,W)}o(re,"typeAndKeywords");function ie(K){let{schema:W,errSchemaPath:se,opts:pe,self:Pe}=K;W.$ref&&pe.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(W,Pe.RULES)&&Pe.logger.warn('$ref: keywords ignored in schema at path "'.concat(se,'"'))}o(ie,"checkRefsAndKeywords");function le(K){let{schema:W,opts:se}=K;W.default!==void 0&&se.useDefaults&&se.strictSchema&&(0,f.checkStrictMode)(K,"default is ignored in the schema root")}o(le,"checkNoDefault");function be(K){let W=K.schema[K.opts.schemaId];W&&(K.baseId=(0,p.resolveUrl)(K.opts.uriResolver,K.baseId,W))}o(be,"updateContext");function he(K){if(K.schema.$async&&!K.schemaEnv.$async)throw new Error("async schema in sync schema")}o(he,"checkAsyncSchema");var ve,je,Oe;function ge({gen:K,schemaEnv:W,schema:se,errSchemaPath:pe,opts:Pe}){let Be=se.$comment;if(Pe.$comment===!0)K.code((0,d._)(ve||(ve=T(["",".logger.log(",")"])),c.default.self,Be));else if(typeof Pe.$comment=="function"){let Gt=(0,d.str)(je||(je=T(["","/$comment"])),pe),ln=K.scopeValue("root",{ref:W.root});K.code((0,d._)(Oe||(Oe=T(["",".opts.$comment(",", ",", ",".schema)"])),c.default.self,Be,Gt,ln))}}o(ge,"commentKeyword");var Re,De,We,ir;function $t(K){let{gen:W,schemaEnv:se,validateName:pe,ValidationError:Pe,opts:Be}=K;se.$async?W.if((0,d._)(Re||(Re=T([""," === 0"])),c.default.errors),()=>W.return(c.default.data),()=>W.throw((0,d._)(De||(De=T(["new ","(",")"])),Pe,c.default.vErrors))):(W.assign((0,d._)(We||(We=T(["",".errors"])),pe),c.default.vErrors),Be.unevaluated&&Ar(K),W.return((0,d._)(ir||(ir=T([""," === 0"])),c.default.errors)))}o($t,"returnResults");var Jr,ar;function Ar({gen:K,evaluated:W,props:se,items:pe}){se instanceof d.Name&&K.assign((0,d._)(Jr||(Jr=T(["",".props"])),W),se),pe instanceof d.Name&&K.assign((0,d._)(ar||(ar=T(["",".items"])),W),pe)}o(Ar,"assignEvaluated");var Nr;function _r(K,W,se,pe){let{gen:Pe,schema:Be,data:Gt,allErrors:ln,opts:xr,self:Or}=K,{RULES:Ht}=Or;if(Be.$ref&&(xr.ignoreKeywordsWithRef||!(0,f.schemaHasRulesButRef)(Be,Ht))){Pe.block(()=>Ta(K,"$ref",Ht.all.$ref.definition));return}xr.jtd||xe(K,W),Pe.block(()=>{for(let Zr of Ht.rules)ka(Zr);ka(Ht.post)});function ka(Zr){(0,n.shouldUseGroup)(Be,Zr)&&(Zr.type?(Pe.if((0,i.checkDataType)(Zr.type,Gt,xr.strictNumbers)),wr(K,Zr),W.length===1&&W[0]===Zr.type&&se&&(Pe.else(),(0,i.reportTypeError)(K)),Pe.endIf()):wr(K,Zr),ln||Pe.if((0,d._)(Nr||(Nr=T([""," === ",""])),c.default.errors,pe||0)))}o(ka,"groupKeywords")}o(_r,"schemaKeywords");function wr(K,W){let{gen:se,schema:pe,opts:{useDefaults:Pe}}=K;Pe&&(0,a.assignDefaults)(K,W.type),se.block(()=>{for(let Be of W.rules)(0,n.shouldUseRule)(pe,Be)&&Ta(K,Be.keyword,Be.definition,W.type)})}o(wr,"iterateKeywords");function xe(K,W){K.schemaEnv.meta||!K.opts.strictTypes||(R(K,W),K.opts.allowUnionTypes||B(K,W),ue(K,K.dataTypes))}o(xe,"checkStrictTypes");function R(K,W){if(W.length){if(!K.dataTypes.length){K.dataTypes=W;return}W.forEach(se=>{$e(K.dataTypes,se)||An(K,'type "'.concat(se,'" not allowed by context "').concat(K.dataTypes.join(","),'"'))}),ct(K,W)}}o(R,"checkContextTypes");function B(K,W){W.length>1&&!(W.length===2&&W.includes("null"))&&An(K,"use allowUnionTypes to allow union type keyword")}o(B,"checkMultipleTypes");function ue(K,W){let se=K.self.RULES.all;for(let pe in se){let Pe=se[pe];if(typeof Pe=="object"&&(0,n.shouldUseRule)(K.schema,Pe)){let{type:Be}=Pe.definition;Be.length&&!Be.some(Gt=>ke(W,Gt))&&An(K,'missing type "'.concat(Be.join(","),'" for keyword "').concat(pe,'"'))}}}o(ue,"checkKeywordTypes");function ke(K,W){return K.includes(W)||W==="number"&&K.includes("integer")}o(ke,"hasApplicableType");function $e(K,W){return K.includes(W)||W==="integer"&&K.includes("number")}o($e,"includesType");function ct(K,W){let se=[];for(let pe of K.dataTypes)$e(W,pe)?se.push(pe):W.includes("integer")&&pe==="number"&&se.push("integer");K.dataTypes=se}o(ct,"narrowSchemaTypes");function An(K,W){let se=K.schemaEnv.baseId+K.errSchemaPath;W+=' at "'.concat(se,'" (strictTypes)'),(0,f.checkStrictMode)(K,W,K.opts.strictTypes)}o(An,"strictTypesError");var eu,tu,ru,nu,ou=class{constructor(W,se,pe){if((0,s.validateKeywordUsage)(W,se,pe),this.gen=W.gen,this.allErrors=W.allErrors,this.keyword=pe,this.data=W.data,this.schema=W.schema[pe],this.$data=se.$data&&W.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(W,this.schema,pe,this.$data),this.schemaType=se.schemaType,this.parentSchema=W.schema,this.params={},this.it=W,this.def=se,this.$data)this.schemaCode=W.gen.const("vSchema",ja(this.$data,W));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,se.schemaType,se.allowUndefined))throw new Error("".concat(pe," value must be ").concat(JSON.stringify(se.schemaType)));("code"in se?se.trackErrors:se.errors!==!1)&&(this.errsCount=W.gen.const("_errs",c.default.errors))}result(W,se,pe){this.failResult((0,d.not)(W),se,pe)}failResult(W,se,pe){this.gen.if(W),pe?pe():this.error(),se?(this.gen.else(),se(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(W,se){this.failResult((0,d.not)(W),void 0,se)}fail(W){if(W===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(W),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(W){if(!this.$data)return this.fail(W);let{schemaCode:se}=this;this.fail((0,d._)(eu||(eu=T([""," !== undefined && (",")"])),se,(0,d.or)(this.invalid$data(),W)))}error(W,se,pe){if(se){this.setParams(se),this._error(W,pe),this.setParams({});return}this._error(W,pe)}_error(W,se){(W?h.reportExtraError:h.reportError)(this,this.def.error,se)}$dataError(){(0,h.reportError)(this,this.def.$dataError||h.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,h.resetErrorsCount)(this.gen,this.errsCount)}ok(W){this.allErrors||this.gen.if(W)}setParams(W,se){se?Object.assign(this.params,W):this.params=W}block$data(W,se,pe=d.nil){this.gen.block(()=>{this.check$data(W,pe),se()})}check$data(W=d.nil,se=d.nil){if(!this.$data)return;let{gen:pe,schemaCode:Pe,schemaType:Be,def:Gt}=this;pe.if((0,d.or)((0,d._)(tu||(tu=T([""," === undefined"])),Pe),se)),W!==d.nil&&pe.assign(W,!0),(Be.length||Gt.validateSchema)&&(pe.elseIf(this.invalid$data()),this.$dataError(),W!==d.nil&&pe.assign(W,!1)),pe.else()}invalid$data(){let{gen:W,schemaCode:se,schemaType:pe,def:Pe,it:Be}=this;return(0,d.or)(Gt(),ln());function Gt(){if(pe.length){if(!(se instanceof d.Name))throw new Error("ajv implementation error");let xr=Array.isArray(pe)?pe:[pe];return(0,d._)(ru||(ru=T(["",""])),(0,i.checkDataTypes)(xr,se,Be.opts.strictNumbers,i.DataType.Wrong))}return d.nil}function ln(){if(Pe.validateSchema){let xr=W.scopeValue("validate$data",{ref:Pe.validateSchema});return(0,d._)(nu||(nu=T(["!","(",")"])),xr,se)}return d.nil}}subschema(W,se){let pe=(0,l.getSubschema)(this.it,W);(0,l.extendSubschemaData)(pe,this.it,W),(0,l.extendSubschemaMode)(pe,W);let Pe=Me(oe(oe({},this.it),pe),{items:void 0,props:void 0});return L(Pe,se),Pe}mergeEvaluated(W,se){let{it:pe,gen:Pe}=this;pe.opts.unevaluated&&(pe.props!==!0&&W.props!==void 0&&(pe.props=f.mergeEvaluated.props(Pe,W.props,pe.props,se)),pe.items!==!0&&W.items!==void 0&&(pe.items=f.mergeEvaluated.items(Pe,W.items,pe.items,se)))}mergeValidEvaluated(W,se){let{it:pe,gen:Pe}=this;if(pe.opts.unevaluated&&(pe.props!==!0||pe.items!==!0))return Pe.if(se,()=>this.mergeEvaluated(W,d.Name)),!0}};o(ou,"KeywordCxt");var iu=ou;e.KeywordCxt=iu;function Ta(K,W,se,pe){let Pe=new iu(K,se,W);"code"in se?se.code(Pe,pe):Pe.$data&&se.validate?(0,s.funcKeywordCode)(Pe,se):"macro"in se?(0,s.macroKeywordCode)(Pe,se):(se.compile||se.validate)&&(0,s.funcKeywordCode)(Pe,se)}o(Ta,"keywordCode");var gP=/^\/(?:[^~]|~0|~1)*$/,vP=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/,au,su;function ja(K,{dataLevel:W,dataNames:se,dataPathArr:pe}){let Pe,Be;if(K==="")return c.default.rootData;if(K[0]==="/"){if(!gP.test(K))throw new Error("Invalid JSON-pointer: ".concat(K));Pe=K,Be=c.default.rootData}else{let Or=vP.exec(K);if(!Or)throw new Error("Invalid JSON-pointer: ".concat(K));let Ht=+Or[1];if(Pe=Or[2],Pe==="#"){if(Ht>=W)throw new Error(xr("property/index",Ht));return pe[W-Ht]}if(Ht>W)throw new Error(xr("data",Ht));if(Be=se[W-Ht],!Pe)return Be}let Gt=Be,ln=Pe.split("/");for(let Or of ln)Or&&(Be=(0,d._)(au||(au=T(["","",""])),Be,(0,d.getProperty)((0,f.unescapeJsonPointer)(Or))),Gt=(0,d._)(su||(su=T([""," && ",""])),Gt,Be));return Gt;function xr(Or,Ht){return"Cannot access ".concat(Or," ").concat(Ht," levels up, current level is ").concat(W)}}o(ja,"getData"),e.getData=ja}),Ps=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=class extends Error{constructor(i){super("validation failed"),this.errors=i,this.ajv=this.validation=!0}};o(t,"ValidationError");var r=t;e.default=r}),Li=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ci(),r=class extends Error{constructor(a,s,l,d){super(d||"can't resolve reference ".concat(l," from id ").concat(s)),this.missingRef=(0,t.resolveUrl)(a,s,l),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(a,this.missingRef))}};o(r,"MissingRefError");var n=r;e.default=n}),Es=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.getCompilingSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;var t=Ae(),r=Ps(),n=Xr(),i=Ci(),a=ze(),s=Mi(),l=class{constructor(b){var x;this.refs={},this.dynamicAnchors={};let P;typeof b.schema=="object"&&(P=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(x=b.baseId)!==null&&x!==void 0?x:(0,i.normalizeId)(P?.[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=P?.$async,this.refs={}}};o(l,"SchemaEnv");var d=l;e.SchemaEnv=d;var c,p;function f(m){let b=N.call(this,m);if(b)return b;let x=(0,i.getFullPath)(this.opts.uriResolver,m.root.baseId),{es5:P,lines:F}=this.opts.code,{ownProperties:S}=this.opts,C=new t.CodeGen(this.scope,{es5:P,lines:F,ownProperties:S}),q;m.$async&&(q=C.scopeValue("Error",{ref:r.default,code:(0,t._)(c||(c=T(['require("ajv/dist/runtime/validation_error").default'])))}));let M=C.scopeName("validate");m.validateName=M;let z={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:m.schema,code:(0,t.stringify)(m.schema)}:{ref:m.schema}),validateName:M,ValidationError:q,schema:m.schema,schemaEnv:m,rootId:x,baseId:m.baseId||x,schemaPath:t.nil,errSchemaPath:m.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)(p||(p=T(['""']))),opts:this.opts,self:this},Q;try{this._compilations.add(m),(0,s.validateFunctionCode)(z),C.optimize(this.opts.code.optimize);let ae=C.toString();Q="".concat(C.scopeRefs(n.default.scope),"return ").concat(ae),this.opts.code.process&&(Q=this.opts.code.process(Q,m));let Y=new Function("".concat(n.default.self),"".concat(n.default.scope),Q)(this,this.scope.get());if(this.scope.value(M,{ref:Y}),Y.errors=null,Y.schema=m.schema,Y.schemaEnv=m,m.$async&&(Y.$async=!0),this.opts.code.source===!0&&(Y.source={validateName:M,validateCode:ae,scopeValues:C._values}),this.opts.unevaluated){let{props:ne,items:X}=z;Y.evaluated={props:ne instanceof t.Name?void 0:ne,items:X instanceof t.Name?void 0:X,dynamicProps:ne instanceof t.Name,dynamicItems:X instanceof t.Name},Y.source&&(Y.source.evaluated=(0,t.stringify)(Y.evaluated))}return m.validate=Y,m}catch(ae){throw delete m.validate,delete m.validateName,Q&&this.logger.error("Error compiling schema, function code:",Q),ae}finally{this._compilations.delete(m)}}o(f,"compileSchema"),e.compileSchema=f;function h(m,b,x){var P;x=(0,i.resolveUrl)(this.opts.uriResolver,b,x);let F=m.refs[x];if(F)return F;let S=O.call(this,m,x);if(S===void 0){let C=(P=m.localRefs)===null||P===void 0?void 0:P[x],{schemaId:q}=this.opts;C&&(S=new d({schema:C,schemaId:q,root:m,baseId:b}))}if(S!==void 0)return m.refs[x]=w.call(this,S)}o(h,"resolveRef"),e.resolveRef=h;function w(m){return(0,i.inlineRef)(m.schema,this.opts.inlineRefs)?m.schema:m.validate?m:f.call(this,m)}o(w,"inlineOrCompile");function N(m){for(let b of this._compilations)if(k(b,m))return b}o(N,"getCompilingSchema"),e.getCompilingSchema=N;function k(m,b){return m.schema===b.schema&&m.root===b.root&&m.baseId===b.baseId}o(k,"sameSchemaEnv");function O(m,b){let x;for(;typeof(x=this.refs[b])=="string";)b=x;return x||this.schemas[b]||g.call(this,m,b)}o(O,"resolve");function g(m,b){let x=this.opts.uriResolver.parse(b),P=(0,i._getFullPath)(this.opts.uriResolver,x),F=(0,i.getFullPath)(this.opts.uriResolver,m.baseId,void 0);if(Object.keys(m.schema).length>0&&P===F)return I.call(this,x,m);let S=(0,i.normalizeId)(P),C=this.refs[S]||this.schemas[S];if(typeof C=="string"){let q=g.call(this,m,C);return typeof q?.schema!="object"?void 0:I.call(this,x,q)}if(typeof C?.schema=="object"){if(C.validate||f.call(this,C),S===(0,i.normalizeId)(b)){let{schema:q}=C,{schemaId:M}=this.opts,z=q[M];return z&&(F=(0,i.resolveUrl)(this.opts.uriResolver,F,z)),new d({schema:q,schemaId:M,root:m,baseId:F})}return I.call(this,x,C)}}o(g,"resolveSchema"),e.resolveSchema=g;var y=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function I(m,{baseId:b,schema:x,root:P}){var F;if(((F=m.fragment)===null||F===void 0?void 0:F[0])!=="/")return;for(let q of m.fragment.slice(1).split("/")){if(typeof x=="boolean")return;let M=x[(0,a.unescapeFragment)(q)];if(M===void 0)return;x=M;let z=typeof x=="object"&&x[this.opts.schemaId];!y.has(q)&&z&&(b=(0,i.resolveUrl)(this.opts.uriResolver,b,z))}let S;if(typeof x!="boolean"&&x.$ref&&!(0,a.schemaHasRulesButRef)(x,this.RULES)){let q=(0,i.resolveUrl)(this.opts.uriResolver,b,x.$ref);S=g.call(this,P,q)}let{schemaId:C}=this.opts;if(S=S||new d({schema:x,schemaId:C,root:P,baseId:b}),S.schema!==S.root.schema)return S}o(I,"getJsonPointer")}),SP=ye((e,t)=>{t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),FP=ye((e,t)=>{v();var r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};t.exports={HEX:r}}),TP=ye((e,t)=>{v();var{HEX:r}=FP(),n=new RegExp("^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$","u");function i(g){if(c(g,".")<3)return{host:g,isIPV4:!1};let y=g.match(n)||[],[I]=y;return I?{host:d(I,"."),isIPV4:!0}:{host:g,isIPV4:!1}}o(i,"normalizeIPv4");function a(g,y=!1){let I="",m=!0;for(let b of g){if(r[b]===void 0)return;b!=="0"&&m===!0&&(m=!1),m||(I+=b)}return y&&I.length===0&&(I="0"),I}o(a,"stringArrayToHexStripped");function s(g){let y=0,I={error:!1,address:"",zone:""},m=[],b=[],x=!1,P=!1,F=!1;function S(){if(b.length){if(x===!1){let C=a(b);if(C!==void 0)m.push(C);else return I.error=!0,!1}b.length=0}return!0}o(S,"consume");for(let C=0;C<g.length;C++){let q=g[C];if(!(q==="["||q==="]"))if(q===":"){if(P===!0&&(F=!0),!S())break;if(y++,m.push(":"),y>7){I.error=!0;break}C-1>=0&&g[C-1]===":"&&(P=!0);continue}else if(q==="%"){if(!S())break;x=!0}else{b.push(q);continue}}return b.length&&(x?I.zone=b.join(""):F?m.push(b.join("")):m.push(a(b))),I.address=m.join(""),I}o(s,"getIPV6");function l(g){if(c(g,":")<2)return{host:g,isIPV6:!1};let y=s(g);if(y.error)return{host:g,isIPV6:!1};{let I=y.address,m=y.address;return y.zone&&(I+="%"+y.zone,m+="%25"+y.zone),{host:I,escapedHost:m,isIPV6:!0}}}o(l,"normalizeIPv6");function d(g,y){let I="",m=!0,b=g.length;for(let x=0;x<b;x++){let P=g[x];P==="0"&&m?(x+1<=b&&g[x+1]===y||x+1===b)&&(I+=P,m=!1):(P===y?m=!0:m=!1,I+=P)}return I}o(d,"stripLeadingZeros");function c(g,y){let I=0;for(let m=0;m<g.length;m++)g[m]===y&&I++;return I}o(c,"findToken");var p=new RegExp("^\\.\\.?\\/","u"),f=new RegExp("^\\/\\.(?:\\/|$)","u"),h=new RegExp("^\\/\\.\\.(?:\\/|$)","u"),w=new RegExp("^\\/?(?:.|\\n)*?(?=\\/|$)","u");function N(g){let y=[];for(;g.length;)if(g.match(p))g=g.replace(p,"");else if(g.match(f))g=g.replace(f,"/");else if(g.match(h))g=g.replace(h,"/"),y.pop();else if(g==="."||g==="..")g="";else{let I=g.match(w);if(I){let m=I[0];g=g.slice(m.length),y.push(m)}else throw new Error("Unexpected dot segment condition")}return y.join("")}o(N,"removeDotSegments");function k(g,y){let I=y!==!0?escape:unescape;return g.scheme!==void 0&&(g.scheme=I(g.scheme)),g.userinfo!==void 0&&(g.userinfo=I(g.userinfo)),g.host!==void 0&&(g.host=I(g.host)),g.path!==void 0&&(g.path=I(g.path)),g.query!==void 0&&(g.query=I(g.query)),g.fragment!==void 0&&(g.fragment=I(g.fragment)),g}o(k,"normalizeComponentEncoding");function O(g){let y=[];if(g.userinfo!==void 0&&(y.push(g.userinfo),y.push("@")),g.host!==void 0){let I=unescape(g.host),m=i(I);if(m.isIPV4)I=m.host;else{let b=l(m.host);b.isIPV6===!0?I="[".concat(b.escapedHost,"]"):I=g.host}y.push(I)}return(typeof g.port=="number"||typeof g.port=="string")&&(y.push(":"),y.push(String(g.port))),y.length?y.join(""):void 0}o(O,"recomposeAuthority"),t.exports={recomposeAuthority:O,normalizeComponentEncoding:k,removeDotSegments:N,normalizeIPv4:i,normalizeIPv6:l,stringArrayToHexStripped:a}}),jP=ye((e,t)=>{v();var r=new RegExp("^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$","iu"),n=new RegExp("([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)","iu");function i(m){return typeof m.secure=="boolean"?m.secure:String(m.scheme).toLowerCase()==="wss"}o(i,"isSecure");function a(m){return m.host||(m.error=m.error||"HTTP URIs must have a host."),m}o(a,"httpParse");function s(m){let b=String(m.scheme).toLowerCase()==="https";return(m.port===(b?443:80)||m.port==="")&&(m.port=void 0),m.path||(m.path="/"),m}o(s,"httpSerialize");function l(m){return m.secure=i(m),m.resourceName=(m.path||"/")+(m.query?"?"+m.query:""),m.path=void 0,m.query=void 0,m}o(l,"wsParse");function d(m){if((m.port===(i(m)?443:80)||m.port==="")&&(m.port=void 0),typeof m.secure=="boolean"&&(m.scheme=m.secure?"wss":"ws",m.secure=void 0),m.resourceName){let[b,x]=m.resourceName.split("?");m.path=b&&b!=="/"?b:void 0,m.query=x,m.resourceName=void 0}return m.fragment=void 0,m}o(d,"wsSerialize");function c(m,b){if(!m.path)return m.error="URN can not be parsed",m;let x=m.path.match(n);if(x){let P=b.scheme||m.scheme||"urn";m.nid=x[1].toLowerCase(),m.nss=x[2];let F="".concat(P,":").concat(b.nid||m.nid),S=I[F];m.path=void 0,S&&(m=S.parse(m,b))}else m.error=m.error||"URN can not be parsed.";return m}o(c,"urnParse");function p(m,b){let x=b.scheme||m.scheme||"urn",P=m.nid.toLowerCase(),F="".concat(x,":").concat(b.nid||P),S=I[F];S&&(m=S.serialize(m,b));let C=m,q=m.nss;return C.path="".concat(P||b.nid,":").concat(q),b.skipEscape=!0,C}o(p,"urnSerialize");function f(m,b){let x=m;return x.uuid=x.nss,x.nss=void 0,!b.tolerant&&(!x.uuid||!r.test(x.uuid))&&(x.error=x.error||"UUID is not valid."),x}o(f,"urnuuidParse");function h(m){let b=m;return b.nss=(m.uuid||"").toLowerCase(),b}o(h,"urnuuidSerialize");var w={scheme:"http",domainHost:!0,parse:a,serialize:s},N={scheme:"https",domainHost:w.domainHost,parse:a,serialize:s},k={scheme:"ws",domainHost:!0,parse:l,serialize:d},O={scheme:"wss",domainHost:k.domainHost,parse:k.parse,serialize:k.serialize},g={scheme:"urn",parse:c,serialize:p,skipNormalize:!0},y={scheme:"urn:uuid",parse:f,serialize:h,skipNormalize:!0},I={http:w,https:N,ws:k,wss:O,urn:g,"urn:uuid":y};t.exports=I}),kP=ye((e,t)=>{v();var{normalizeIPv6:r,normalizeIPv4:n,removeDotSegments:i,recomposeAuthority:a,normalizeComponentEncoding:s}=TP(),l=jP();function d(y,I){return typeof y=="string"?y=h(O(y,I),I):typeof y=="object"&&(y=O(h(y,I),I)),y}o(d,"normalize");function c(y,I,m){let b=Object.assign({scheme:"null"},m),x=p(O(y,b),O(I,b),b,!0);return h(x,Me(oe({},b),{skipEscape:!0}))}o(c,"resolve");function p(y,I,m,b){let x={};return b||(y=O(h(y,m),m),I=O(h(I,m),m)),m=m||{},!m.tolerant&&I.scheme?(x.scheme=I.scheme,x.userinfo=I.userinfo,x.host=I.host,x.port=I.port,x.path=i(I.path||""),x.query=I.query):(I.userinfo!==void 0||I.host!==void 0||I.port!==void 0?(x.userinfo=I.userinfo,x.host=I.host,x.port=I.port,x.path=i(I.path||""),x.query=I.query):(I.path?(I.path.charAt(0)==="/"?x.path=i(I.path):((y.userinfo!==void 0||y.host!==void 0||y.port!==void 0)&&!y.path?x.path="/"+I.path:y.path?x.path=y.path.slice(0,y.path.lastIndexOf("/")+1)+I.path:x.path=I.path,x.path=i(x.path)),x.query=I.query):(x.path=y.path,I.query!==void 0?x.query=I.query:x.query=y.query),x.userinfo=y.userinfo,x.host=y.host,x.port=y.port),x.scheme=y.scheme),x.fragment=I.fragment,x}o(p,"resolveComponents");function f(y,I,m){return typeof y=="string"?(y=unescape(y),y=h(s(O(y,m),!0),Me(oe({},m),{skipEscape:!0}))):typeof y=="object"&&(y=h(s(y,!0),Me(oe({},m),{skipEscape:!0}))),typeof I=="string"?(I=unescape(I),I=h(s(O(I,m),!0),Me(oe({},m),{skipEscape:!0}))):typeof I=="object"&&(I=h(s(I,!0),Me(oe({},m),{skipEscape:!0}))),y.toLowerCase()===I.toLowerCase()}o(f,"equal");function h(y,I){let m={host:y.host,scheme:y.scheme,userinfo:y.userinfo,port:y.port,path:y.path,query:y.query,nid:y.nid,nss:y.nss,uuid:y.uuid,fragment:y.fragment,reference:y.reference,resourceName:y.resourceName,secure:y.secure,error:""},b=Object.assign({},I),x=[],P=l[(b.scheme||m.scheme||"").toLowerCase()];P&&P.serialize&&P.serialize(m,b),m.path!==void 0&&(b.skipEscape?m.path=unescape(m.path):(m.path=escape(m.path),m.scheme!==void 0&&(m.path=m.path.split("%3A").join(":")))),b.reference!=="suffix"&&m.scheme&&x.push(m.scheme,":");let F=a(m);if(F!==void 0&&(b.reference!=="suffix"&&x.push("//"),x.push(F),m.path&&m.path.charAt(0)!=="/"&&x.push("/")),m.path!==void 0){let S=m.path;!b.absolutePath&&(!P||!P.absolutePath)&&(S=i(S)),F===void 0&&(S=S.replace(new RegExp("^\\/\\/","u"),"/%2F")),x.push(S)}return m.query!==void 0&&x.push("?",m.query),m.fragment!==void 0&&x.push("#",m.fragment),x.join("")}o(h,"serialize");var w=Array.from({length:127},(y,I)=>new RegExp("[^!\"$&'()*+,\\-.;=_`a-z{}~]","u").test(String.fromCharCode(I)));function N(y){let I=0;for(let m=0,b=y.length;m<b;++m)if(I=y.charCodeAt(m),I>126||w[I])return!0;return!1}o(N,"nonSimpleDomain");var k=new RegExp("^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?","u");function O(y,I){let m=Object.assign({},I),b={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},x=y.indexOf("%")!==-1,P=!1;m.reference==="suffix"&&(y=(m.scheme?m.scheme+":":"")+"//"+y);let F=y.match(k);if(F){if(b.scheme=F[1],b.userinfo=F[3],b.host=F[4],b.port=parseInt(F[5],10),b.path=F[6]||"",b.query=F[7],b.fragment=F[8],isNaN(b.port)&&(b.port=F[5]),b.host){let C=n(b.host);if(C.isIPV4===!1){let q=r(C.host);b.host=q.host.toLowerCase(),P=q.isIPV6}else b.host=C.host,P=!0}b.scheme===void 0&&b.userinfo===void 0&&b.host===void 0&&b.port===void 0&&b.query===void 0&&!b.path?b.reference="same-document":b.scheme===void 0?b.reference="relative":b.fragment===void 0?b.reference="absolute":b.reference="uri",m.reference&&m.reference!=="suffix"&&m.reference!==b.reference&&(b.error=b.error||"URI is not a "+m.reference+" reference.");let S=l[(m.scheme||b.scheme||"").toLowerCase()];if(!m.unicodeSupport&&(!S||!S.unicodeSupport)&&b.host&&(m.domainHost||S&&S.domainHost)&&P===!1&&N(b.host))try{b.host=URL.domainToASCII(b.host.toLowerCase())}catch(C){b.error=b.error||"Host's domain name can not be converted to ASCII: "+C}(!S||S&&!S.skipNormalize)&&(x&&b.scheme!==void 0&&(b.scheme=unescape(b.scheme)),x&&b.host!==void 0&&(b.host=unescape(b.host)),b.path&&(b.path=escape(unescape(b.path))),b.fragment&&(b.fragment=encodeURI(decodeURIComponent(b.fragment)))),S&&S.parse&&S.parse(b,m)}else b.error=b.error||"URI can not be parsed.";return b}o(O,"parse");var g={SCHEMES:l,normalize:d,resolve:c,resolveComponents:p,equal:f,serialize:h,parse:O};t.exports=g,t.exports.default=g,t.exports.fastUri=g}),AP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=kP();t.code='require("ajv/dist/runtime/uri").default',e.default=t}),NP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Mi();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:o(function(){return t.KeywordCxt},"get")});var r=Ae();Object.defineProperty(e,"_",{enumerable:!0,get:o(function(){return r._},"get")}),Object.defineProperty(e,"str",{enumerable:!0,get:o(function(){return r.str},"get")}),Object.defineProperty(e,"stringify",{enumerable:!0,get:o(function(){return r.stringify},"get")}),Object.defineProperty(e,"nil",{enumerable:!0,get:o(function(){return r.nil},"get")}),Object.defineProperty(e,"Name",{enumerable:!0,get:o(function(){return r.Name},"get")}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:o(function(){return r.CodeGen},"get")});var n=Ps(),i=Li(),a=_u(),s=Es(),l=Ae(),d=Ci(),c=mi(),p=ze(),f=SP(),h=AP(),w=o((H,$)=>new RegExp(H,$),"defaultRegExp");w.code="new RegExp";var N=["removeAdditional","useDefaults","coerceTypes"],k=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),O={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function I(H){var $,D,_,j,L,G,te,E,V,A,re,ie,le,be,he,ve,je,Oe,ge,Re,De,We,ir,$t,Jr;let ar=H.strict,Ar=($=H.code)===null||$===void 0?void 0:$.optimize,Nr=Ar===!0||Ar===void 0?1:Ar||0,_r=(_=(D=H.code)===null||D===void 0?void 0:D.regExp)!==null&&_!==void 0?_:w,wr=(j=H.uriResolver)!==null&&j!==void 0?j:h.default;return{strictSchema:(G=(L=H.strictSchema)!==null&&L!==void 0?L:ar)!==null&&G!==void 0?G:!0,strictNumbers:(E=(te=H.strictNumbers)!==null&&te!==void 0?te:ar)!==null&&E!==void 0?E:!0,strictTypes:(A=(V=H.strictTypes)!==null&&V!==void 0?V:ar)!==null&&A!==void 0?A:"log",strictTuples:(ie=(re=H.strictTuples)!==null&&re!==void 0?re:ar)!==null&&ie!==void 0?ie:"log",strictRequired:(be=(le=H.strictRequired)!==null&&le!==void 0?le:ar)!==null&&be!==void 0?be:!1,code:H.code?Me(oe({},H.code),{optimize:Nr,regExp:_r}):{optimize:Nr,regExp:_r},loopRequired:(he=H.loopRequired)!==null&&he!==void 0?he:y,loopEnum:(ve=H.loopEnum)!==null&&ve!==void 0?ve:y,meta:(je=H.meta)!==null&&je!==void 0?je:!0,messages:(Oe=H.messages)!==null&&Oe!==void 0?Oe:!0,inlineRefs:(ge=H.inlineRefs)!==null&&ge!==void 0?ge:!0,schemaId:(Re=H.schemaId)!==null&&Re!==void 0?Re:"$id",addUsedSchema:(De=H.addUsedSchema)!==null&&De!==void 0?De:!0,validateSchema:(We=H.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ir=H.validateFormats)!==null&&ir!==void 0?ir:!0,unicodeRegExp:($t=H.unicodeRegExp)!==null&&$t!==void 0?$t:!0,int32range:(Jr=H.int32range)!==null&&Jr!==void 0?Jr:!0,uriResolver:wr}}o(I,"requiredOptions");var m=class{constructor($={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,$=this.opts=oe(oe({},$),I($));let{es5:D,lines:_}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:k,es5:D,lines:_}),this.logger=z($.logger);let j=$.validateFormats;$.validateFormats=!1,this.RULES=(0,a.getRules)(),x.call(this,O,$,"NOT SUPPORTED"),x.call(this,g,$,"DEPRECATED","warn"),this._metaOpts=q.call(this),$.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),$.keywords&&C.call(this,$.keywords),typeof $.meta=="object"&&this.addMetaSchema($.meta),F.call(this),$.validateFormats=j}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:$,meta:D,schemaId:_}=this.opts,j=f;_==="id"&&(j=oe({},f),j.id=j.$id,delete j.$id),D&&$&&this.addMetaSchema(j,j[_],!1)}defaultMeta(){let{meta:$,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof $=="object"?$[D]||$:void 0}validate($,D){let _;if(typeof $=="string"){if(_=this.getSchema($),!_)throw new Error('no schema with key or ref "'.concat($,'"'))}else _=this.compile($);let j=_(D);return"$async"in _||(this.errors=_.errors),j}compile($,D){let _=this._addSchema($,D);return _.validate||this._compileSchemaEnv(_)}compileAsync($,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:_}=this.opts;return j.call(this,$,D);async function j(A,re){await L.call(this,A.$schema);let ie=this._addSchema(A,re);return ie.validate||G.call(this,ie)}async function L(A){A&&!this.getSchema(A)&&await j.call(this,{$ref:A},!0)}async function G(A){try{return this._compileSchemaEnv(A)}catch(re){if(!(re instanceof i.default))throw re;return te.call(this,re),await E.call(this,re.missingSchema),G.call(this,A)}}function te({missingSchema:A,missingRef:re}){if(this.refs[A])throw new Error("AnySchema ".concat(A," is loaded but ").concat(re," cannot be resolved"))}async function E(A){let re=await V.call(this,A);this.refs[A]||await L.call(this,re.$schema),this.refs[A]||this.addSchema(re,A,D)}async function V(A){let re=this._loading[A];if(re)return re;try{return await(this._loading[A]=_(A))}finally{delete this._loading[A]}}}addSchema($,D,_,j=this.opts.validateSchema){if(Array.isArray($)){for(let G of $)this.addSchema(G,void 0,_,j);return this}let L;if(typeof $=="object"){let{schemaId:G}=this.opts;if(L=$[G],L!==void 0&&typeof L!="string")throw new Error("schema ".concat(G," must be string"))}return D=(0,d.normalizeId)(D||L),this._checkUnique(D),this.schemas[D]=this._addSchema($,_,D,j,!0),this}addMetaSchema($,D,_=this.opts.validateSchema){return this.addSchema($,D,!0,_),this}validateSchema($,D){if(typeof $=="boolean")return!0;let _;if(_=$.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let j=this.validate(_,$);if(!j&&D){let L="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(L);else throw new Error(L)}return j}getSchema($){let D;for(;typeof(D=P.call(this,$))=="string";)$=D;if(D===void 0){let{schemaId:_}=this.opts,j=new s.SchemaEnv({schema:{},schemaId:_});if(D=s.resolveSchema.call(this,j,$),!D)return;this.refs[$]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema($){if($ instanceof RegExp)return this._removeAllSchemas(this.schemas,$),this._removeAllSchemas(this.refs,$),this;switch(typeof $){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let D=P.call(this,$);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[$],delete this.refs[$],this}case"object":{let D=$;this._cache.delete(D);let _=$[this.opts.schemaId];return _&&(_=(0,d.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary($){for(let D of $)this.addKeyword(D);return this}addKeyword($,D){let _;if(typeof $=="string")_=$,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=_);else if(typeof $=="object"&&D===void 0){if(D=$,_=D.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ae.call(this,_,D),!D)return(0,p.eachItem)(_,L=>Y.call(this,L)),this;X.call(this,D);let j=Me(oe({},D),{type:(0,c.getJSONTypes)(D.type),schemaType:(0,c.getJSONTypes)(D.schemaType)});return(0,p.eachItem)(_,j.type.length===0?L=>Y.call(this,L,j):L=>j.type.forEach(G=>Y.call(this,L,j,G))),this}getKeyword($){let D=this.RULES.all[$];return typeof D=="object"?D.definition:!!D}removeKeyword($){let{RULES:D}=this;delete D.keywords[$],delete D.all[$];for(let _ of D.rules){let j=_.rules.findIndex(L=>L.keyword===$);j>=0&&_.rules.splice(j,1)}return this}addFormat($,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[$]=D,this}errorsText($=this.errors,{separator:D=", ",dataVar:_="data"}={}){return!$||$.length===0?"No errors":$.map(j=>"".concat(_).concat(j.instancePath," ").concat(j.message)).reduce((j,L)=>j+D+L)}$dataMetaSchema($,D){let _=this.RULES.all;$=JSON.parse(JSON.stringify($));for(let j of D){let L=j.split("/").slice(1),G=$;for(let te of L)G=G[te];for(let te in _){let E=_[te];if(typeof E!="object")continue;let{$data:V}=E.definition,A=G[te];V&&A&&(G[te]=de(A))}}return $}_removeAllSchemas($,D){for(let _ in $){let j=$[_];(!D||D.test(_))&&(typeof j=="string"?delete $[_]:j&&!j.meta&&(this._cache.delete(j.schema),delete $[_]))}}_addSchema($,D,_,j=this.opts.validateSchema,L=this.opts.addUsedSchema){let G,{schemaId:te}=this.opts;if(typeof $=="object")G=$[te];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof $!="boolean")throw new Error("schema must be object or boolean")}let E=this._cache.get($);if(E!==void 0)return E;_=(0,d.normalizeId)(G||_);let V=d.getSchemaRefs.call(this,$,_);return E=new s.SchemaEnv({schema:$,schemaId:te,meta:D,baseId:_,localRefs:V}),this._cache.set(E.schema,E),L&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=E),j&&this.validateSchema($,!0),E}_checkUnique($){if(this.schemas[$]||this.refs[$])throw new Error('schema with key or id "'.concat($,'" already exists'))}_compileSchemaEnv($){if($.meta?this._compileMetaSchema($):s.compileSchema.call(this,$),!$.validate)throw new Error("ajv implementation error");return $.validate}_compileMetaSchema($){let D=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,$)}finally{this.opts=D}}};o(m,"Ajv");var b=m;b.ValidationError=n.default,b.MissingRefError=i.default,e.default=b;function x(H,$,D,_="error"){for(let j in H){let L=j;L in $&&this.logger[_]("".concat(D,": option ").concat(j,". ").concat(H[L]))}}o(x,"checkOptions");function P(H){return H=(0,d.normalizeId)(H),this.schemas[H]||this.refs[H]}o(P,"getSchEnv");function F(){let H=this.opts.schemas;if(H)if(Array.isArray(H))this.addSchema(H);else for(let $ in H)this.addSchema(H[$],$)}o(F,"addInitialSchemas");function S(){for(let H in this.opts.formats){let $=this.opts.formats[H];$&&this.addFormat(H,$)}}o(S,"addInitialFormats");function C(H){if(Array.isArray(H)){this.addVocabulary(H);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let $ in H){let D=H[$];D.keyword||(D.keyword=$),this.addKeyword(D)}}o(C,"addInitialKeywords");function q(){let H=oe({},this.opts);for(let $ of N)delete H[$];return H}o(q,"getMetaSchemaOptions");var M={log(){},warn(){},error(){}};function z(H){if(H===!1)return M;if(H===void 0)return console;if(H.log&&H.warn&&H.error)return H;throw new Error("logger must implement log, warn and error methods")}o(z,"getLogger");var Q=/^[a-z_$][a-z0-9_$:-]*$/i;function ae(H,$){let{RULES:D}=this;if((0,p.eachItem)(H,_=>{if(D.keywords[_])throw new Error("Keyword ".concat(_," is already defined"));if(!Q.test(_))throw new Error("Keyword ".concat(_," has invalid name"))}),!!$&&$.$data&&!("code"in $||"validate"in $))throw new Error('$data keyword must have "code" or "validate" function')}o(ae,"checkKeyword");function Y(H,$,D){var _;let j=$?.post;if(D&&j)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:L}=this,G=j?L.post:L.rules.find(({type:E})=>E===D);if(G||(G={type:D,rules:[]},L.rules.push(G)),L.keywords[H]=!0,!$)return;let te={keyword:H,definition:Me(oe({},$),{type:(0,c.getJSONTypes)($.type),schemaType:(0,c.getJSONTypes)($.schemaType)})};$.before?ne.call(this,G,te,$.before):G.rules.push(te),L.all[H]=te,(_=$.implements)===null||_===void 0||_.forEach(E=>this.addKeyword(E))}o(Y,"addRule");function ne(H,$,D){let _=H.rules.findIndex(j=>j.keyword===D);_>=0?H.rules.splice(_,0,$):(H.rules.push($),this.logger.warn("rule ".concat(D," is not defined")))}o(ne,"addBeforeRule");function X(H){let{metaSchema:$}=H;$!==void 0&&(H.$data&&this.opts.$data&&($=de($)),H.validateSchema=this.compile($,!0))}o(X,"keywordMetaschema");var J={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function de(H){return{anyOf:[H,J]}}o(de,"schemaOrData")}),_P=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=t}),$P=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;var t=Li(),r=hr(),n=Ae(),i=Xr(),a=Es(),s=ze(),l,d={keyword:"$ref",schemaType:"string",code(I){let{gen:m,schema:b,it:x}=I,{baseId:P,schemaEnv:F,validateName:S,opts:C,self:q}=x,{root:M}=F;if((b==="#"||b==="#/")&&P===M.baseId)return Q();let z=a.resolveRef.call(q,M,P,b);if(z===void 0)throw new t.default(x.opts.uriResolver,P,b);if(z instanceof a.SchemaEnv)return ae(z);return Y(z);function Q(){if(F===M)return y(I,S,F,F.$async);let ne=m.scopeValue("root",{ref:M});return y(I,(0,n._)(l||(l=T(["",".validate"])),ne),M,M.$async)}function ae(ne){let X=p(I,ne);y(I,X,ne,ne.$async)}function Y(ne){let X=m.scopeValue("schema",C.code.source===!0?{ref:ne,code:(0,n.stringify)(ne)}:{ref:ne}),J=m.name("valid"),de=I.subschema({schema:ne,dataTypes:[],schemaPath:n.nil,topSchemaRef:X,errSchemaPath:b},J);I.mergeEvaluated(de),I.ok(J)}}},c;function p(I,m){let{gen:b}=I;return m.validate?b.scopeValue("validate",{ref:m.validate}):(0,n._)(c||(c=T(["",".validate"])),b.scopeValue("wrapper",{ref:m}))}o(p,"getValidate"),e.getValidate=p;var f,h,w,N,k,O,g;function y(I,m,b,x){let{gen:P,it:F}=I,{allErrors:S,schemaEnv:C,opts:q}=F,M=q.passContext?i.default.this:n.nil;x?z():Q();function z(){if(!C.$async)throw new Error("async schema referenced by sync schema");let ne=P.let("valid");P.try(()=>{P.code((0,n._)(f||(f=T(["await ",""])),(0,r.callValidateCode)(I,m,M))),Y(m),S||P.assign(ne,!0)},X=>{P.if((0,n._)(h||(h=T(["!("," instanceof ",")"])),X,F.ValidationError),()=>P.throw(X)),ae(X),S||P.assign(ne,!1)}),I.ok(ne)}o(z,"callAsyncRef");function Q(){I.result((0,r.callValidateCode)(I,m,M),()=>Y(m),()=>ae(m))}o(Q,"callSyncRef");function ae(ne){let X=(0,n._)(w||(w=T(["",".errors"])),ne);P.assign(i.default.vErrors,(0,n._)(N||(N=T([""," === null ? "," : ",".concat(",")"])),i.default.vErrors,X,i.default.vErrors,X)),P.assign(i.default.errors,(0,n._)(k||(k=T(["",".length"])),i.default.vErrors))}o(ae,"addErrorsFrom");function Y(ne){var X;if(!F.opts.unevaluated)return;let J=(X=b?.validate)===null||X===void 0?void 0:X.evaluated;if(F.props!==!0)if(J&&!J.dynamicProps)J.props!==void 0&&(F.props=s.mergeEvaluated.props(P,J.props,F.props));else{let de=P.var("props",(0,n._)(O||(O=T(["",".evaluated.props"])),ne));F.props=s.mergeEvaluated.props(P,de,F.props,n.Name)}if(F.items!==!0)if(J&&!J.dynamicItems)J.items!==void 0&&(F.items=s.mergeEvaluated.items(P,J.items,F.items));else{let de=P.var("items",(0,n._)(g||(g=T(["",".evaluated.items"])),ne));F.items=s.mergeEvaluated.items(P,de,F.items,n.Name)}}o(Y,"addEvaluatedFrom")}o(y,"callRef"),e.callRef=y,e.default=d}),RP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=_P(),r=$P(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,r.default];e.default=n}),CP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=t.operators,n={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i,a,s={message:o(({keyword:c,schemaCode:p})=>(0,t.str)(i||(i=T(["must be "," ",""])),n[c].okStr,p),"message"),params:o(({keyword:c,schemaCode:p})=>(0,t._)(a||(a=T(["{comparison: ",", limit: ","}"])),n[c].okStr,p),"params")},l,d={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:s,code(c){let{keyword:p,data:f,schemaCode:h}=c;c.fail$data((0,t._)(l||(l=T([""," "," "," || isNaN(",")"])),f,n[p].fail,h,f))}};e.default=d}),MP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r,n,i={message:o(({schemaCode:c})=>(0,t.str)(r||(r=T(["must be multiple of ",""])),c),"message"),params:o(({schemaCode:c})=>(0,t._)(n||(n=T(["{multipleOf: ","}"])),c),"params")},a,s,l,d={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:i,code(c){let{gen:p,data:f,schemaCode:h,it:w}=c,N=w.opts.multipleOfPrecision,k=p.let("res"),O=N?(0,t._)(a||(a=T(["Math.abs(Math.round(",") - ",") > 1e-",""])),k,k,N):(0,t._)(s||(s=T([""," !== parseInt(",")"])),k,k);c.fail$data((0,t._)(l||(l=T(["("," === 0 || ("," = ","/",", ","))"])),h,k,f,h,O))}};e.default=d}),LP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});function t(r){let n=r.length,i=0,a=0,s;for(;a<n;)i++,s=r.charCodeAt(a++),s>=55296&&s<=56319&&a<n&&(s=r.charCodeAt(a),(s&64512)===56320&&a++);return i}o(t,"ucs2length"),e.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'}),UP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n=LP(),i,a,s={message({keyword:f,schemaCode:h}){let w=f==="maxLength"?"more":"fewer";return(0,t.str)(i||(i=T(["must NOT have "," than "," characters"])),w,h)},params:o(({schemaCode:f})=>(0,t._)(a||(a=T(["{limit: ","}"])),f),"params")},l,d,c,p={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s,code(f){let{keyword:h,data:w,schemaCode:N,it:k}=f,O=h==="maxLength"?t.operators.GT:t.operators.LT,g=k.opts.unicode===!1?(0,t._)(l||(l=T(["",".length"])),w):(0,t._)(d||(d=T(["","(",")"])),(0,r.useFunc)(f.gen,n.default),w);f.fail$data((0,t._)(c||(c=T([""," "," ",""])),g,O,N))}};e.default=p}),DP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=hr(),r=Ae(),n,i,a={message:o(({schemaCode:c})=>(0,r.str)(n||(n=T(['must match pattern "','"'])),c),"message"),params:o(({schemaCode:c})=>(0,r._)(i||(i=T(["{pattern: ","}"])),c),"params")},s,l,d={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:a,code(c){let{data:p,$data:f,schema:h,schemaCode:w,it:N}=c,k=N.opts.unicodeRegExp?"u":"",O=f?(0,r._)(s||(s=T(["(new RegExp(",", ","))"])),w,k):(0,t.usePattern)(c,h);c.fail$data((0,r._)(l||(l=T(["!",".test(",")"])),O,p))}};e.default=d}),BP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r,n,i={message({keyword:l,schemaCode:d}){let c=l==="maxProperties"?"more":"fewer";return(0,t.str)(r||(r=T(["must NOT have "," than "," properties"])),c,d)},params:o(({schemaCode:l})=>(0,t._)(n||(n=T(["{limit: ","}"])),l),"params")},a,s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:i,code(l){let{keyword:d,data:c,schemaCode:p}=l,f=d==="maxProperties"?t.operators.GT:t.operators.LT;l.fail$data((0,t._)(a||(a=T(["Object.keys(",").length "," ",""])),c,f,p))}};e.default=s}),qP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=hr(),r=Ae(),n=ze(),i,a,s={message:o(({params:{missingProperty:d}})=>(0,r.str)(i||(i=T(["must have required property '","'"])),d),"message"),params:o(({params:{missingProperty:d}})=>(0,r._)(a||(a=T(["{missingProperty: ","}"])),d),"params")},l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:s,code(d){let{gen:c,schema:p,schemaCode:f,data:h,$data:w,it:N}=d,{opts:k}=N;if(!w&&p.length===0)return;let O=p.length>=k.loopRequired;if(N.allErrors?g():y(),k.strictRequired){let b=d.parentSchema.properties,{definedProperties:x}=d.it;for(let P of p)if(b?.[P]===void 0&&!x.has(P)){let F=N.schemaEnv.baseId+N.errSchemaPath,S='required property "'.concat(P,'" is not defined at "').concat(F,'" (strictRequired)');(0,n.checkStrictMode)(N,S,N.opts.strictRequired)}}function g(){if(O||w)d.block$data(r.nil,I);else for(let b of p)(0,t.checkReportMissingProp)(d,b)}o(g,"allErrorsMode");function y(){let b=c.let("missing");if(O||w){let x=c.let("valid",!0);d.block$data(x,()=>m(b,x)),d.ok(x)}else c.if((0,t.checkMissingProp)(d,p,b)),(0,t.reportMissingProp)(d,b),c.else()}o(y,"exitOnErrorMode");function I(){c.forOf("prop",f,b=>{d.setParams({missingProperty:b}),c.if((0,t.noPropertyInData)(c,h,b,k.ownProperties),()=>d.error())})}o(I,"loopAllRequired");function m(b,x){d.setParams({missingProperty:b}),c.forOf(b,f,()=>{c.assign(x,(0,t.propertyInData)(c,h,b,k.ownProperties)),c.if((0,r.not)(x),()=>{d.error(),c.break()})},r.nil)}o(m,"loopUntilMissing")}};e.default=l}),zP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r,n,i={message({keyword:l,schemaCode:d}){let c=l==="maxItems"?"more":"fewer";return(0,t.str)(r||(r=T(["must NOT have "," than "," items"])),c,d)},params:o(({schemaCode:l})=>(0,t._)(n||(n=T(["{limit: ","}"])),l),"params")},a,s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:i,code(l){let{keyword:d,data:c,schemaCode:p}=l,f=d==="maxItems"?t.operators.GT:t.operators.LT;l.fail$data((0,t._)(a||(a=T(["",".length "," ",""])),c,f,p))}};e.default=s}),Ss=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ru();t.code='require("ajv/dist/runtime/equal").default',e.default=t}),VP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=mi(),r=Ae(),n=ze(),i=Ss(),a,s,l={message:o(({params:{i:F,j:S}})=>(0,r.str)(a||(a=T(["must NOT have duplicate items (items ## "," and "," are identical)"])),S,F),"message"),params:o(({params:{i:F,j:S}})=>(0,r._)(s||(s=T(["{i: ",", j: ","}"])),F,S),"params")},d,c,p,f,h,w,N,k,O,g,y,I,m,b,x,P={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:l,code(F){let{gen:S,data:C,$data:q,schema:M,parentSchema:z,schemaCode:Q,it:ae}=F;if(!q&&!M)return;let Y=S.let("valid"),ne=z.items?(0,t.getSchemaTypes)(z.items):[];F.block$data(Y,X,(0,r._)(d||(d=T([""," === false"])),Q)),F.ok(Y);function X(){let $=S.let("i",(0,r._)(c||(c=T(["",".length"])),C)),D=S.let("j");F.setParams({i:$,j:D}),S.assign(Y,!0),S.if((0,r._)(p||(p=T([""," > 1"])),$),()=>(J()?de:H)($,D))}o(X,"validateUniqueItems");function J(){return ne.length>0&&!ne.some($=>$==="object"||$==="array")}o(J,"canOptimize");function de($,D){let _=S.name("item"),j=(0,t.checkDataTypes)(ne,_,ae.opts.strictNumbers,t.DataType.Wrong),L=S.const("indices",(0,r._)(f||(f=T(["{}"]))));S.for((0,r._)(h||(h=T([";","--;"])),$),()=>{S.let(_,(0,r._)(w||(w=T(["","[","]"])),C,$)),S.if(j,(0,r._)(N||(N=T(["continue"])))),ne.length>1&&S.if((0,r._)(k||(k=T(["typeof ",' == "string"'])),_),(0,r._)(O||(O=T(["",' += "_"'])),_)),S.if((0,r._)(g||(g=T(["typeof ","[",'] == "number"'])),L,_),()=>{S.assign(D,(0,r._)(y||(y=T(["","[","]"])),L,_)),F.error(),S.assign(Y,!1).break()}).code((0,r._)(I||(I=T(["","[","] = ",""])),L,_,$))})}o(de,"loopN");function H($,D){let _=(0,n.useFunc)(S,i.default),j=S.name("outer");S.label(j).for((0,r._)(m||(m=T([";","--;"])),$),()=>S.for((0,r._)(b||(b=T([""," = ","; ","--;"])),D,$,D),()=>S.if((0,r._)(x||(x=T(["","(","[","], ","[","])"])),_,C,$,C,D),()=>{F.error(),S.assign(Y,!1).break(j)})))}o(H,"loopN2")}};e.default=P}),KP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n=Ss(),i,a={message:"must be equal to constant",params:o(({schemaCode:c})=>(0,t._)(i||(i=T(["{allowedValue: ","}"])),c),"params")},s,l,d={keyword:"const",$data:!0,error:a,code(c){let{gen:p,data:f,$data:h,schemaCode:w,schema:N}=c;h||N&&typeof N=="object"?c.fail$data((0,t._)(s||(s=T(["!","(",", ",")"])),(0,r.useFunc)(p,n.default),f,w)):c.fail((0,t._)(l||(l=T([""," !== ",""])),N,f))}};e.default=d}),GP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n=Ss(),i,a={message:"must be equal to one of the allowed values",params:o(({schemaCode:p})=>(0,t._)(i||(i=T(["{allowedValues: ","}"])),p),"params")},s,l,d,c={keyword:"enum",schemaType:"array",$data:!0,error:a,code(p){let{gen:f,data:h,$data:w,schema:N,schemaCode:k,it:O}=p;if(!w&&N.length===0)throw new Error("enum must have non-empty array");let g=N.length>=O.opts.loopEnum,y,I=o(()=>y??(y=(0,r.useFunc)(f,n.default)),"getEql"),m;if(g||w)m=f.let("valid"),p.block$data(m,b);else{if(!Array.isArray(N))throw new Error("ajv implementation error");let P=f.const("vSchema",k);m=(0,t.or)(...N.map((F,S)=>x(P,S)))}p.pass(m);function b(){f.assign(m,!1),f.forOf("v",k,P=>f.if((0,t._)(s||(s=T(["","(",", ",")"])),I(),h,P),()=>f.assign(m,!0).break()))}o(b,"loopEnum");function x(P,F){let S=N[F];return typeof S=="object"&&S!==null?(0,t._)(l||(l=T(["","(",", ","[","])"])),I(),h,P,F):(0,t._)(d||(d=T([""," === ",""])),h,S)}o(x,"equalCode")}};e.default=c}),HP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=CP(),r=MP(),n=UP(),i=DP(),a=BP(),s=qP(),l=zP(),d=VP(),c=KP(),p=GP(),f=[t.default,r.default,n.default,i.default,a.default,s.default,l.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,p.default];e.default=f}),Cu=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateAdditionalItems=void 0;var t=Ae(),r=ze(),n,i,a={message:o(({params:{len:f}})=>(0,t.str)(n||(n=T(["must NOT have more than "," items"])),f),"message"),params:o(({params:{len:f}})=>(0,t._)(i||(i=T(["{limit: ","}"])),f),"params")},s={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:a,code(f){let{parentSchema:h,it:w}=f,{items:N}=h;if(!Array.isArray(N)){(0,r.checkStrictMode)(w,'"additionalItems" is ignored when "items" is not an array of schemas');return}p(f,N)}},l,d,c;function p(f,h){let{gen:w,schema:N,data:k,keyword:O,it:g}=f;g.items=!0;let y=w.const("len",(0,t._)(l||(l=T(["",".length"])),k));if(N===!1)f.setParams({len:h.length}),f.pass((0,t._)(d||(d=T([""," <= ",""])),y,h.length));else if(typeof N=="object"&&!(0,r.alwaysValidSchema)(g,N)){let m=w.var("valid",(0,t._)(c||(c=T([""," <= ",""])),y,h.length));w.if((0,t.not)(m),()=>I(m)),f.ok(m)}function I(m){w.forRange("i",h.length,y,b=>{f.subschema({keyword:O,dataProp:b,dataPropType:r.Type.Num},m),g.allErrors||w.if((0,t.not)(m),()=>w.break())})}o(I,"validateItems")}o(p,"validateAdditionalItems"),e.validateAdditionalItems=p,e.default=s}),Mu=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTuple=void 0;var t=Ae(),r=ze(),n=hr(),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(d){let{schema:c,it:p}=d;if(Array.isArray(c))return l(d,"additionalItems",c);p.items=!0,!(0,r.alwaysValidSchema)(p,c)&&d.ok((0,n.validateArray)(d))}},a,s;function l(d,c,p=d.schema){let{gen:f,parentSchema:h,data:w,keyword:N,it:k}=d;y(h),k.opts.unevaluated&&p.length&&k.items!==!0&&(k.items=r.mergeEvaluated.items(f,p.length,k.items));let O=f.name("valid"),g=f.const("len",(0,t._)(a||(a=T(["",".length"])),w));p.forEach((I,m)=>{(0,r.alwaysValidSchema)(k,I)||(f.if((0,t._)(s||(s=T([""," > ",""])),g,m),()=>d.subschema({keyword:N,schemaProp:m,dataProp:m},O)),d.ok(O))});function y(I){let{opts:m,errSchemaPath:b}=k,x=p.length,P=x===I.minItems&&(x===I.maxItems||I[c]===!1);if(m.strictTuples&&!P){let F='"'.concat(N,'" is ').concat(x,"-tuple, but minItems or maxItems/").concat(c,' are not specified or different at path "').concat(b,'"');(0,r.checkStrictMode)(k,F,m.strictTuples)}}o(y,"checkStrictTuple")}o(l,"validateTuple"),e.validateTuple=l,e.default=i}),WP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Mu(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:o(n=>(0,t.validateTuple)(n,"items"),"code")};e.default=r}),JP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n=hr(),i=Cu(),a,s,l={message:o(({params:{len:c}})=>(0,t.str)(a||(a=T(["must NOT have more than "," items"])),c),"message"),params:o(({params:{len:c}})=>(0,t._)(s||(s=T(["{limit: ","}"])),c),"params")},d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:l,code(c){let{schema:p,parentSchema:f,it:h}=c,{prefixItems:w}=f;h.items=!0,!(0,r.alwaysValidSchema)(h,p)&&(w?(0,i.validateAdditionalItems)(c,w):c.ok((0,n.validateArray)(c)))}};e.default=d}),ZP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n,i,a,s,l={message:o(({params:{min:g,max:y}})=>y===void 0?(0,t.str)(n||(n=T(["must contain at least "," valid item(s)"])),g):(0,t.str)(i||(i=T(["must contain at least "," and no more than "," valid item(s)"])),g,y),"message"),params:o(({params:{min:g,max:y}})=>y===void 0?(0,t._)(a||(a=T(["{minContains: ","}"])),g):(0,t._)(s||(s=T(["{minContains: ",", maxContains: ","}"])),g,y),"params")},d,c,p,f,h,w,N,k,O={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:l,code(g){let{gen:y,schema:I,parentSchema:m,data:b,it:x}=g,P,F,{minContains:S,maxContains:C}=m;x.opts.next?(P=S===void 0?1:S,F=C):P=1;let q=y.const("len",(0,t._)(d||(d=T(["",".length"])),b));if(g.setParams({min:P,max:F}),F===void 0&&P===0){(0,r.checkStrictMode)(x,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(F!==void 0&&P>F){(0,r.checkStrictMode)(x,'"minContains" > "maxContains" is always invalid'),g.fail();return}if((0,r.alwaysValidSchema)(x,I)){let Y=(0,t._)(c||(c=T([""," >= ",""])),q,P);F!==void 0&&(Y=(0,t._)(p||(p=T([""," && "," <= ",""])),Y,q,F)),g.pass(Y);return}x.items=!0;let M=y.name("valid");F===void 0&&P===1?Q(M,()=>y.if(M,()=>y.break())):P===0?(y.let(M,!0),F!==void 0&&y.if((0,t._)(f||(f=T(["",".length > 0"])),b),z)):(y.let(M,!1),z()),g.result(M,()=>g.reset());function z(){let Y=y.name("_valid"),ne=y.let("count",0);Q(Y,()=>y.if(Y,()=>ae(ne)))}o(z,"validateItemsWithCount");function Q(Y,ne){y.forRange("i",0,q,X=>{g.subschema({keyword:"contains",dataProp:X,dataPropType:r.Type.Num,compositeRule:!0},Y),ne()})}o(Q,"validateItems");function ae(Y){y.code((0,t._)(h||(h=T(["","++"])),Y)),F===void 0?y.if((0,t._)(w||(w=T([""," >= ",""])),Y,P),()=>y.assign(M,!0).break()):(y.if((0,t._)(N||(N=T([""," > ",""])),Y,F),()=>y.assign(M,!1).break()),P===1?y.assign(M,!0):y.if((0,t._)(k||(k=T([""," >= ",""])),Y,P),()=>y.assign(M,!0)))}o(ae,"checkLimits")}};e.default=O}),YP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=Ae(),r=ze(),n=hr(),i,a;e.error={message:o(({params:{property:f,depsCount:h,deps:w}})=>{let N=h===1?"property":"properties";return(0,t.str)(i||(i=T(["must have "," "," when property "," is present"])),N,w,f)},"message"),params:o(({params:{property:f,depsCount:h,deps:w,missingProperty:N}})=>(0,t._)(a||(a=T(["{property: ",`,
    missingProperty: `,`,
    depsCount: `,`,
    deps: `,"}"])),f,N,h,w),"params")};var s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(f){let[h,w]=l(f);c(f,h),p(f,w)}};function l({schema:f}){let h={},w={};for(let N in f){if(N==="__proto__")continue;let k=Array.isArray(f[N])?h:w;k[N]=f[N]}return[h,w]}o(l,"splitDependencies");var d;function c(f,h=f.schema){let{gen:w,data:N,it:k}=f;if(Object.keys(h).length===0)return;let O=w.let("missing");for(let g in h){let y=h[g];if(y.length===0)continue;let I=(0,n.propertyInData)(w,N,g,k.opts.ownProperties);f.setParams({property:g,depsCount:y.length,deps:y.join(", ")}),k.allErrors?w.if(I,()=>{for(let m of y)(0,n.checkReportMissingProp)(f,m)}):(w.if((0,t._)(d||(d=T([""," && (",")"])),I,(0,n.checkMissingProp)(f,y,O))),(0,n.reportMissingProp)(f,O),w.else())}}o(c,"validatePropertyDeps"),e.validatePropertyDeps=c;function p(f,h=f.schema){let{gen:w,data:N,keyword:k,it:O}=f,g=w.name("valid");for(let y in h)(0,r.alwaysValidSchema)(O,h[y])||(w.if((0,n.propertyInData)(w,N,y,O.opts.ownProperties),()=>{let I=f.subschema({keyword:k,schemaProp:y},g);f.mergeValidEvaluated(I,g)},()=>w.var(g,!0)),f.ok(g))}o(p,"validateSchemaDeps"),e.validateSchemaDeps=p,e.default=s}),QP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n,i={message:"property name must be valid",params:o(({params:s})=>(0,t._)(n||(n=T(["{propertyName: ","}"])),s.propertyName),"params")},a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:i,code(s){let{gen:l,schema:d,data:c,it:p}=s;if((0,r.alwaysValidSchema)(p,d))return;let f=l.name("valid");l.forIn("key",c,h=>{s.setParams({propertyName:h}),s.subschema({keyword:"propertyNames",data:h,dataTypes:["string"],propertyName:h,compositeRule:!0},f),l.if((0,t.not)(f),()=>{s.error(!0),p.allErrors||l.break()})}),s.ok(f)}};e.default=a}),Lu=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=hr(),r=Ae(),n=Xr(),i=ze(),a,s={message:"must NOT have additional properties",params:o(({params:h})=>(0,r._)(a||(a=T(["{additionalProperty: ","}"])),h.additionalProperty),"params")},l,d,c,p,f={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:s,code(h){let{gen:w,schema:N,parentSchema:k,data:O,errsCount:g,it:y}=h;if(!g)throw new Error("ajv implementation error");let{allErrors:I,opts:m}=y;if(y.props=!0,m.removeAdditional!=="all"&&(0,i.alwaysValidSchema)(y,N))return;let b=(0,t.allSchemaProperties)(k.properties),x=(0,t.allSchemaProperties)(k.patternProperties);P(),h.ok((0,r._)(l||(l=T([""," === ",""])),g,n.default.errors));function P(){w.forIn("key",O,M=>{!b.length&&!x.length?C(M):w.if(F(M),()=>C(M))})}o(P,"checkAdditionalProperties");function F(M){let z;if(b.length>8){let Q=(0,i.schemaRefOrVal)(y,k.properties,"properties");z=(0,t.isOwnProperty)(w,Q,M)}else b.length?z=(0,r.or)(...b.map(Q=>(0,r._)(d||(d=T([""," === ",""])),M,Q))):z=r.nil;return x.length&&(z=(0,r.or)(z,...x.map(Q=>(0,r._)(c||(c=T(["",".test(",")"])),(0,t.usePattern)(h,Q),M)))),(0,r.not)(z)}o(F,"isAdditional");function S(M){w.code((0,r._)(p||(p=T(["delete ","[","]"])),O,M))}o(S,"deleteAdditional");function C(M){if(m.removeAdditional==="all"||m.removeAdditional&&N===!1){S(M);return}if(N===!1){h.setParams({additionalProperty:M}),h.error(),I||w.break();return}if(typeof N=="object"&&!(0,i.alwaysValidSchema)(y,N)){let z=w.name("valid");m.removeAdditional==="failing"?(q(M,z,!1),w.if((0,r.not)(z),()=>{h.reset(),S(M)})):(q(M,z),I||w.if((0,r.not)(z),()=>w.break()))}}o(C,"additionalPropertyCode");function q(M,z,Q){let ae={keyword:"additionalProperties",dataProp:M,dataPropType:i.Type.Str};Q===!1&&Object.assign(ae,{compositeRule:!0,createErrors:!1,allErrors:!1}),h.subschema(ae,z)}o(q,"applyAdditionalSchema")}};e.default=f}),XP=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Mi(),r=hr(),n=ze(),i=Lu(),a={keyword:"properties",type:"object",schemaType:"object",code(s){let{gen:l,schema:d,parentSchema:c,data:p,it:f}=s;f.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&i.default.code(new t.KeywordCxt(f,i.default,"additionalProperties"));let h=(0,r.allSchemaProperties)(d);for(let g of h)f.definedProperties.add(g);f.opts.unevaluated&&h.length&&f.props!==!0&&(f.props=n.mergeEvaluated.props(l,(0,n.toHash)(h),f.props));let w=h.filter(g=>!(0,n.alwaysValidSchema)(f,d[g]));if(w.length===0)return;let N=l.name("valid");for(let g of w)k(g)?O(g):(l.if((0,r.propertyInData)(l,p,g,f.opts.ownProperties)),O(g),f.allErrors||l.else().var(N,!0),l.endIf()),s.it.definedProperties.add(g),s.ok(N);function k(g){return f.opts.useDefaults&&!f.compositeRule&&d[g].default!==void 0}o(k,"hasDefault");function O(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},N)}o(O,"applyPropertySchema")}};e.default=a}),eE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=hr(),r=Ae(),n=ze(),i=ze(),a,s,l={keyword:"patternProperties",type:"object",schemaType:"object",code(d){let{gen:c,schema:p,data:f,parentSchema:h,it:w}=d,{opts:N}=w,k=(0,t.allSchemaProperties)(p),O=k.filter(P=>(0,n.alwaysValidSchema)(w,p[P]));if(k.length===0||O.length===k.length&&(!w.opts.unevaluated||w.props===!0))return;let g=N.strictSchema&&!N.allowMatchingProperties&&h.properties,y=c.name("valid");w.props!==!0&&!(w.props instanceof r.Name)&&(w.props=(0,i.evaluatedPropsToName)(c,w.props));let{props:I}=w;m();function m(){for(let P of k)g&&b(P),w.allErrors?x(P):(c.var(y,!0),x(P),c.if(y))}o(m,"validatePatternProperties");function b(P){for(let F in g)new RegExp(P).test(F)&&(0,n.checkStrictMode)(w,"property ".concat(F," matches pattern ").concat(P," (use allowMatchingProperties)"))}o(b,"checkMatchingProperties");function x(P){c.forIn("key",f,F=>{c.if((0,r._)(a||(a=T(["",".test(",")"])),(0,t.usePattern)(d,P),F),()=>{let S=O.includes(P);S||d.subschema({keyword:"patternProperties",schemaProp:P,dataProp:F,dataPropType:i.Type.Str},y),w.opts.unevaluated&&I!==!0?c.assign((0,r._)(s||(s=T(["","[","]"])),I,F),!0):!S&&!w.allErrors&&c.if((0,r.not)(y),()=>c.break())})})}o(x,"validateProperties")}};e.default=l}),tE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=ze(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){let{gen:i,schema:a,it:s}=n;if((0,t.alwaysValidSchema)(s,a)){n.fail();return}let l=i.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),n.failResult(l,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};e.default=r}),rE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=hr(),r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:t.validateUnion,error:{message:"must match a schema in anyOf"}};e.default=r}),nE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n,i={message:"must match exactly one schema in oneOf",params:o(({params:d})=>(0,t._)(n||(n=T(["{passingSchemas: ","}"])),d.passing),"params")},a,s,l={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:i,code(d){let{gen:c,schema:p,parentSchema:f,it:h}=d;if(!Array.isArray(p))throw new Error("ajv implementation error");if(h.opts.discriminator&&f.discriminator)return;let w=p,N=c.let("valid",!1),k=c.let("passing",null),O=c.name("_valid");d.setParams({passing:k}),c.block(g),d.result(N,()=>d.reset(),()=>d.error(!0));function g(){w.forEach((y,I)=>{let m;(0,r.alwaysValidSchema)(h,y)?c.var(O,!0):m=d.subschema({keyword:"oneOf",schemaProp:I,compositeRule:!0},O),I>0&&c.if((0,t._)(a||(a=T([""," && ",""])),O,N)).assign(N,!1).assign(k,(0,t._)(s||(s=T(["[",", ","]"])),k,I)).else(),c.if(O,()=>{c.assign(N,!0),c.assign(k,I),m&&d.mergeEvaluated(m,t.Name)})})}o(g,"validateOneOf")}};e.default=l}),oE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=ze(),r={keyword:"allOf",schemaType:"array",code(n){let{gen:i,schema:a,it:s}=n;if(!Array.isArray(a))throw new Error("ajv implementation error");let l=i.name("valid");a.forEach((d,c)=>{if((0,t.alwaysValidSchema)(s,d))return;let p=n.subschema({keyword:"allOf",schemaProp:c},l);n.ok(l),n.mergeEvaluated(p)})}};e.default=r}),iE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=ze(),n,i,a={message:o(({params:c})=>(0,t.str)(n||(n=T(['must match "','" schema'])),c.ifClause),"message"),params:o(({params:c})=>(0,t._)(i||(i=T(["{failingKeyword: ","}"])),c.ifClause),"params")},s,l={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:a,code(c){let{gen:p,parentSchema:f,it:h}=c;f.then===void 0&&f.else===void 0&&(0,r.checkStrictMode)(h,'"if" without "then" and "else" is ignored');let w=d(h,"then"),N=d(h,"else");if(!w&&!N)return;let k=p.let("valid",!0),O=p.name("_valid");if(g(),c.reset(),w&&N){let I=p.let("ifClause");c.setParams({ifClause:I}),p.if(O,y("then",I),y("else",I))}else w?p.if(O,y("then")):p.if((0,t.not)(O),y("else"));c.pass(k,()=>c.error(!0));function g(){let I=c.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},O);c.mergeEvaluated(I)}o(g,"validateIf");function y(I,m){return()=>{let b=c.subschema({keyword:I},O);p.assign(k,O),c.mergeValidEvaluated(b,k),m?p.assign(m,(0,t._)(s||(s=T(["",""])),I)):c.setParams({ifClause:I})}}o(y,"validateClause")}};function d(c,p){let f=c.schema[p];return f!==void 0&&!(0,r.alwaysValidSchema)(c,f)}o(d,"hasSchema"),e.default=l}),aE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=ze(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:i,it:a}){i.if===void 0&&(0,t.checkStrictMode)(a,'"'.concat(n,'" without "if" is ignored'))}};e.default=r}),sE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Cu(),r=WP(),n=Mu(),i=JP(),a=ZP(),s=YP(),l=QP(),d=Lu(),c=XP(),p=eE(),f=tE(),h=rE(),w=nE(),N=oE(),k=iE(),O=aE();function g(y=!1){let I=[f.default,h.default,w.default,N.default,k.default,O.default,l.default,d.default,s.default,c.default,p.default];return y?I.push(r.default,i.default):I.push(t.default,n.default),I.push(a.default),I}o(g,"getApplicator"),e.default=g}),lE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r,n,i={message:o(({schemaCode:b})=>(0,t.str)(r||(r=T(['must match format "','"'])),b),"message"),params:o(({schemaCode:b})=>(0,t._)(n||(n=T(["{format: ","}"])),b),"params")},a,s,l,d,c,p,f,h,w,N,k,O,g,y,I,m={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:i,code(b,x){let{gen:P,data:F,$data:S,schema:C,schemaCode:q,it:M}=b,{opts:z,errSchemaPath:Q,schemaEnv:ae,self:Y}=M;if(!z.validateFormats)return;S?ne():X();function ne(){let J=P.scopeValue("formats",{ref:Y.formats,code:z.code.formats}),de=P.const("fDef",(0,t._)(a||(a=T(["","[","]"])),J,q)),H=P.let("fType"),$=P.let("format");P.if((0,t._)(s||(s=T(["typeof ",' == "object" && !('," instanceof RegExp)"])),de,de),()=>P.assign(H,(0,t._)(l||(l=T(["",'.type || "string"'])),de)).assign($,(0,t._)(d||(d=T(["",".validate"])),de)),()=>P.assign(H,(0,t._)(c||(c=T(['"string"'])))).assign($,de)),b.fail$data((0,t.or)(D(),_()));function D(){return z.strictSchema===!1?t.nil:(0,t._)(p||(p=T([""," && !",""])),q,$)}o(D,"unknownFmt");function _(){let j=ae.$async?(0,t._)(f||(f=T(["(",".async ? await ","(",") : ","(","))"])),de,$,F,$,F):(0,t._)(h||(h=T(["","(",")"])),$,F),L=(0,t._)(w||(w=T(["(typeof ",' == "function" ? '," : ",".test(","))"])),$,j,$,F);return(0,t._)(N||(N=T([""," && "," !== true && "," === "," && !",""])),$,$,H,x,L)}o(_,"invalidFmt")}o(ne,"validate$DataFormat");function X(){let J=Y.formats[C];if(!J){D();return}if(J===!0)return;let[de,H,$]=_(J);de===x&&b.pass(j());function D(){if(z.strictSchema===!1){Y.logger.warn(L());return}throw new Error(L());function L(){return'unknown format "'.concat(C,'" ignored in schema at path "').concat(Q,'"')}}o(D,"unknownFormat");function _(L){let G=L instanceof RegExp?(0,t.regexpCode)(L):z.code.formats?(0,t._)(k||(k=T(["","",""])),z.code.formats,(0,t.getProperty)(C)):void 0,te=P.scopeValue("formats",{key:C,ref:L,code:G});return typeof L=="object"&&!(L instanceof RegExp)?[L.type||"string",L.validate,(0,t._)(O||(O=T(["",".validate"])),te)]:["string",L,te]}o(_,"getFormat");function j(){if(typeof J=="object"&&!(J instanceof RegExp)&&J.async){if(!ae.$async)throw new Error("async format in sync schema");return(0,t._)(g||(g=T(["await ","(",")"])),$,F)}return typeof H=="function"?(0,t._)(y||(y=T(["","(",")"])),$,F):(0,t._)(I||(I=T(["",".test(",")"])),$,F)}o(j,"validCondition")}o(X,"validateFormat")}};e.default=m}),cE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=lE(),r=[t.default];e.default=r}),uE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),dE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=RP(),r=HP(),n=sE(),i=cE(),a=uE(),s=[t.default,r.default,(0,n.default)(),i.default,a.metadataVocabulary,a.contentVocabulary];e.default=s}),fE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0;var t;(function(r){r.Tag="tag",r.Mapping="mapping"})(t||(e.DiscrError=t={}))}),pE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ae(),r=fE(),n=Es(),i=Li(),a=ze(),s,l={message:o(({params:{discrError:h,tagName:w}})=>h===r.DiscrError.Tag?'tag "'.concat(w,'" must be string'):'value of tag "'.concat(w,'" must be in oneOf'),"message"),params:o(({params:{discrError:h,tag:w,tagName:N}})=>(0,t._)(s||(s=T(["{error: ",", tag: ",", tagValue: ","}"])),h,N,w),"params")},d,c,p,f={keyword:"discriminator",type:"object",schemaType:"object",error:l,code(h){let{gen:w,data:N,schema:k,parentSchema:O,it:g}=h,{oneOf:y}=O;if(!g.opts.discriminator)throw new Error("discriminator: requires discriminator option");let I=k.propertyName;if(typeof I!="string")throw new Error("discriminator: requires propertyName");if(k.mapping)throw new Error("discriminator: mapping is not supported");if(!y)throw new Error("discriminator: requires oneOf keyword");let m=w.let("valid",!1),b=w.const("tag",(0,t._)(d||(d=T(["","",""])),N,(0,t.getProperty)(I)));w.if((0,t._)(c||(c=T(["typeof ",' == "string"'])),b),()=>x(),()=>h.error(!1,{discrError:r.DiscrError.Tag,tag:b,tagName:I})),h.ok(m);function x(){let S=F();w.if(!1);for(let C in S)w.elseIf((0,t._)(p||(p=T([""," === ",""])),b,C)),w.assign(m,P(S[C]));w.else(),h.error(!1,{discrError:r.DiscrError.Mapping,tag:b,tagName:I}),w.endIf()}o(x,"validateMapping");function P(S){let C=w.name("valid"),q=h.subschema({keyword:"oneOf",schemaProp:S},C);return h.mergeEvaluated(q,t.Name),C}o(P,"applyTagSchema");function F(){var S;let C={},q=z(O),M=!0;for(let Y=0;Y<y.length;Y++){let ne=y[Y];if(ne!=null&&ne.$ref&&!(0,a.schemaHasRulesButRef)(ne,g.self.RULES)){let J=ne.$ref;if(ne=n.resolveRef.call(g.self,g.schemaEnv.root,g.baseId,J),ne instanceof n.SchemaEnv&&(ne=ne.schema),ne===void 0)throw new i.default(g.opts.uriResolver,g.baseId,J)}let X=(S=ne?.properties)===null||S===void 0?void 0:S[I];if(typeof X!="object")throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(I,'"'));M=M&&(q||z(ne)),Q(X,Y)}if(!M)throw new Error('discriminator: "'.concat(I,'" must be required'));return C;function z({required:Y}){return Array.isArray(Y)&&Y.includes(I)}function Q(Y,ne){if(Y.const)ae(Y.const,ne);else if(Y.enum)for(let X of Y.enum)ae(X,ne);else throw new Error('discriminator: "properties/'.concat(I,'" must have "const" or "enum"'))}function ae(Y,ne){if(typeof Y!="string"||Y in C)throw new Error('discriminator: "'.concat(I,'" values must be unique strings'));C[Y]=ne}}o(F,"getMapping")}};e.default=f}),mE=ye((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),Uu=ye((e,t)=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;var r=NP(),n=dE(),i=pE(),a=mE(),s=["/properties"],l="http://json-schema.org/draft-07/schema",d=class extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(k=>this.addVocabulary(k)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let k=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(k,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}};o(d,"Ajv");var c=d;e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var p=Mi();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:o(function(){return p.KeywordCxt},"get")});var f=Ae();Object.defineProperty(e,"_",{enumerable:!0,get:o(function(){return f._},"get")}),Object.defineProperty(e,"str",{enumerable:!0,get:o(function(){return f.str},"get")}),Object.defineProperty(e,"stringify",{enumerable:!0,get:o(function(){return f.stringify},"get")}),Object.defineProperty(e,"nil",{enumerable:!0,get:o(function(){return f.nil},"get")}),Object.defineProperty(e,"Name",{enumerable:!0,get:o(function(){return f.Name},"get")}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:o(function(){return f.CodeGen},"get")});var h=Ps();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:o(function(){return h.default},"get")});var w=Li();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:o(function(){return w.default},"get")})}),hE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(S,C){return{validate:S,compare:C}}o(t,"fmtDef"),e.fullFormats={date:t(a,s),time:t(d,c),"date-time":t(f,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:k,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:new RegExp("^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$","iu"),email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:F,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:g,int32:{type:"number",validate:m},int64:{type:"number",validate:b},float:{type:"number",validate:x},double:{type:"number",validate:x},password:!0,binary:!0},e.fastFormats=Me(oe({},e.fullFormats),{date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i}),e.formatNames=Object.keys(e.fullFormats);function r(S){return S%4===0&&(S%100!==0||S%400===0)}o(r,"isLeapYear");var n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(S){let C=n.exec(S);if(!C)return!1;let q=+C[1],M=+C[2],z=+C[3];return M>=1&&M<=12&&z>=1&&z<=(M===2&&r(q)?29:i[M])}o(a,"date");function s(S,C){if(S&&C)return S>C?1:S<C?-1:0}o(s,"compareDate");var l=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function d(S,C){let q=l.exec(S);if(!q)return!1;let M=+q[1],z=+q[2],Q=+q[3],ae=q[5];return(M<=23&&z<=59&&Q<=59||M===23&&z===59&&Q===60)&&(!C||ae!=="")}o(d,"time");function c(S,C){if(!(S&&C))return;let q=l.exec(S),M=l.exec(C);if(q&&M)return S=q[1]+q[2]+q[3]+(q[4]||""),C=M[1]+M[2]+M[3]+(M[4]||""),S>C?1:S<C?-1:0}o(c,"compareTime");var p=/t|\s/i;function f(S){let C=S.split(p);return C.length===2&&a(C[0])&&d(C[1],!0)}o(f,"date_time");function h(S,C){if(!(S&&C))return;let[q,M]=S.split(p),[z,Q]=C.split(p),ae=s(q,z);if(ae!==void 0)return ae||c(M,Q)}o(h,"compareDateTime");var w=/\/|:/,N=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function k(S){return w.test(S)&&N.test(S)}o(k,"uri");var O=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function g(S){return O.lastIndex=0,O.test(S)}o(g,"byte");var y=-2147483648,I=2**31-1;function m(S){return Number.isInteger(S)&&S<=I&&S>=y}o(m,"validateInt32");function b(S){return Number.isInteger(S)}o(b,"validateInt64");function x(){return!0}o(x,"validateNumber");var P=/[^\\]\\Z/;function F(S){if(P.test(S))return!1;try{return new RegExp(S),!0}catch{return!1}}o(F,"regex")}),yE=ye(e=>{v(),Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;var t=Uu(),r=Ae(),n=r.operators,i={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},a,s,l={message:o(({keyword:k,schemaCode:O})=>r.str(a||(a=T(["should be "," ",""])),i[k].okStr,O),"message"),params:o(({keyword:k,schemaCode:O})=>r._(s||(s=T(["{comparison: ",", limit: ","}"])),i[k].okStr,O),"params")},d,c,p,f,h,w;e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:l,code(k){let{gen:O,data:g,schemaCode:y,keyword:I,it:m}=k,{opts:b,self:x}=m;if(!b.validateFormats)return;let P=new t.KeywordCxt(m,x.RULES.all.format.definition,"format");P.$data?F():S();function F(){let q=O.scopeValue("formats",{ref:x.formats,code:b.code.formats}),M=O.const("fmt",r._(d||(d=T(["","[","]"])),q,P.schemaCode));k.fail$data(r.or(r._(c||(c=T(["typeof ",' != "object"'])),M),r._(p||(p=T([""," instanceof RegExp"])),M),r._(f||(f=T(["typeof ",'.compare != "function"'])),M),C(M)))}o(F,"validate$DataFormat");function S(){let q=P.schema,M=x.formats[q];if(!M||M===!0)return;if(typeof M!="object"||M instanceof RegExp||typeof M.compare!="function")throw new Error('"'.concat(I,'": format "').concat(q,'" does not define "compare" function'));let z=O.scopeValue("formats",{key:q,ref:M,code:b.code.formats?r._(h||(h=T(["","",""])),b.code.formats,r.getProperty(q)):void 0});k.fail$data(C(z))}o(S,"validateFormat");function C(q){return r._(w||(w=T(["",".compare(",", ",") "," 0"])),q,g,y,i[I].fail)}o(C,"compareCode")},dependencies:["format"]};var N=o(k=>(k.addKeyword(e.formatLimitDefinition),k),"formatLimitPlugin");e.default=N}),gE=ye((e,t)=>{v(),Object.defineProperty(e,"__esModule",{value:!0});var r=hE(),n=yE(),i=Ae(),a=new i.Name("fullFormats"),s=new i.Name("fastFormats"),l=o((p,f={keywords:!0})=>{if(Array.isArray(f))return c(p,f,r.fullFormats,a),p;let[h,w]=f.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,a],N=f.formats||r.formatNames;return c(p,N,h,w),f.keywords&&n.default(p),p},"formatsPlugin");l.get=(p,f="full")=>{let h=(f==="fast"?r.fastFormats:r.fullFormats)[p];if(!h)throw new Error('Unknown format "'.concat(p,'"'));return h};var d;function c(p,f,h,w){var N,k;(N=(k=p.opts.code).formats)!==null&&N!==void 0||(k.formats=i._(d||(d=T(['require("ajv-formats/dist/formats").',""])),w));for(let O of f)p.addFormat(O,h[O])}o(c,"addFormats"),t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l}),vE=ye((e,t)=>{v();var r=bP();r.default&&(r=r.default),t.exports=n,t.exports.default=n;function n(c,p,f){p=p||1;for(var h,w,N,k,O=0;O<c[0].length;O++){var g=c[0][O];(!O||g[0]<h)&&(h=g[0]),(!O||g[1]<w)&&(w=g[1]),(!O||g[0]>N)&&(N=g[0]),(!O||g[1]>k)&&(k=g[1])}var y=N-h,I=k-w,m=Math.min(y,I),b=m/2;if(m===0){var x=[h,w];return x.distance=0,x}for(var P=new r(void 0,i),F=h;F<N;F+=m)for(var S=w;S<k;S+=m)P.push(new a(F+b,S+b,b,c));var C=l(c),q=new a(h+y/2,w+I/2,0,c);q.d>C.d&&(C=q);for(var M=P.length;P.length;){var z=P.pop();z.d>C.d&&(C=z,f&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,M)),!(z.max-C.d<=p)&&(b=z.h/2,P.push(new a(z.x-b,z.y-b,b,c)),P.push(new a(z.x+b,z.y-b,b,c)),P.push(new a(z.x-b,z.y+b,b,c)),P.push(new a(z.x+b,z.y+b,b,c)),M+=4)}f&&(console.log("num probes: "+M),console.log("best distance: "+C.d));var Q=[C.x,C.y];return Q.distance=C.d,Q}o(n,"polylabel");function i(c,p){return p.max-c.max}o(i,"compareMax");function a(c,p,f,h){this.x=c,this.y=p,this.h=f,this.d=s(c,p,h),this.max=this.d+this.h*Math.SQRT2}o(a,"Cell");function s(c,p,f){for(var h=!1,w=1/0,N=0;N<f.length;N++)for(var k=f[N],O=0,g=k.length,y=g-1;O<g;y=O++){var I=k[O],m=k[y];I[1]>p!=m[1]>p&&c<(m[0]-I[0])*(p-I[1])/(m[1]-I[1])+I[0]&&(h=!h),w=Math.min(w,d(c,p,I,m))}return w===0?0:(h?1:-1)*Math.sqrt(w)}o(s,"pointToPolygonDist");function l(c){for(var p=0,f=0,h=0,w=c[0],N=0,k=w.length,O=k-1;N<k;O=N++){var g=w[N],y=w[O],I=g[0]*y[1]-y[0]*g[1];f+=(g[0]+y[0])*I,h+=(g[1]+y[1])*I,p+=I*3}return p===0?new a(w[0][0],w[0][1],0,c):new a(f/p,h/p,0,c)}o(l,"getCentroidCell");function d(c,p,f,h){var w=f[0],N=f[1],k=h[0]-w,O=h[1]-N;if(k!==0||O!==0){var g=((c-w)*k+(p-N)*O)/(k*k+O*O);g>1?(w=h[0],N=h[1]):g>0&&(w+=k*g,N+=O*g)}return k=c-w,O=p-N,k*k+O*O}o(d,"getSegDistSq")});v();v();v();var Du=class extends Error{constructor(t){super(t),this.name="IntegrityError"}};o(Du,"IntegrityError");var Ot=Du,Bu=class extends Ot{constructor(t,r){super("Floor stack '".concat(t.id,"' contains floor '").concat(r,"' which is not listed in floor.geojson / map.geojson")),we(this,"floorStack"),we(this,"floorId"),this.floorStack=t,this.floorId=r}};o(Bu,"FloorStackUnknownMapError");var bE=Bu,qu=class extends Ot{constructor(t){super("A space collection references floor '".concat(t,"' which does not exist")),we(this,"floorId"),this.floorId=t}};o(qu,"SpaceCollectionUnknownMapError");var IE=qu,zu=class extends Ot{constructor(t,r){super("Space '".concat(t.id,"' references a destination node '").concat(r,"' which does not exist")),we(this,"space"),we(this,"nodeId"),this.space=t,this.nodeId=r}};o(zu,"SpaceUnknownNodeError");var wE=zu,Vu=class extends Ot{constructor(t){super("An obstruction collection references floor '".concat(t,"' which does not exist")),we(this,"floorId"),this.floorId=t}};o(Vu,"ObstructionCollectionUnknownMapError");var xE=Vu,Ku=class extends Ot{constructor(t,r,n){super("Obstruction '".concat(t.id,"' references an entrance '").concat(n,"' which does not exist on floor '").concat(r,"'")),we(this,"obstruction"),we(this,"floorId"),we(this,"entranceId"),this.obstruction=t,this.floorId=r,this.entranceId=n}};o(Ku,"ObstructionUnknownEntranceError");var OE=Ku,Gu=class extends Ot{constructor(t,r){super("Connection '".concat(t.id,"' references a node '").concat(r,"' which does not exist")),we(this,"connection"),we(this,"nodeId"),this.connection=t,this.nodeId=r}};o(Gu,"ConnectionUnknownNodeError");var PE=Gu,Hu=class extends Ot{constructor(t){var r;let n=(r=t.floor)!=null?r:t.map;super("Node '".concat(t.id,"' claims to be on floor '").concat(n,"' which does not exist")),we(this,"node"),we(this,"floorId"),this.node=t,this.floorId=n}};o(Hu,"NodeUnknownFloorError");var EE=Hu,Wu=class extends Ot{constructor(t,r){super("Node '".concat(t.id,"' references a space '").concat(r,"' (on floor '").concat(t.map,"') which does not exist")),we(this,"node"),we(this,"spaceId"),this.node=t,this.spaceId=r}};o(Wu,"NodeUnknownSpaceError");var SE=Wu,Ju=class extends Ot{constructor(t,r){super("Node '".concat(t.id,"' has a neighbor node '").concat(r,"' which does not exist")),we(this,"node"),we(this,"neighborId"),this.node=t,this.neighborId=r}};o(Ju,"NodeUnknownNeighborError");var FE=Ju,Zu=class extends Ot{constructor(t,r,n){super("Style ".concat(t," references a ").concat(r," polygon ").concat(n," which does not exist.")),we(this,"styleId"),we(this,"polygonKind"),we(this,"polygonId"),this.styleId=t,this.polygonKind=r,this.polygonId=n}};o(Zu,"StyleUnknownPolygonError");var TE=Zu,Yu=class extends Ot{constructor(t,r,n){super("Style ".concat(t," references a ").concat(r," line string ").concat(n," which does not exist.")),we(this,"styleId"),we(this,"lineStringKind"),we(this,"lineStringId"),this.styleId=t,this.lineStringKind=r,this.lineStringId=n}};o(Yu,"StyleUnknownLineStringError");var jE=Yu,Qu=class extends Ot{constructor(t,r,n){super("Style ".concat(t," references a ").concat(r," point ").concat(n," which does not exist.")),we(this,"styleId"),we(this,"pointKind"),we(this,"pointId"),this.styleId=t,this.pointKind=r,this.pointId=n}};o(Qu,"StyleUnknownPointError");var kE=Qu,Xu=class extends Ot{constructor(t){super("Style ".concat(t," does not appear to be a valid polygon or line string style.")),we(this,"styleId"),this.styleId=t}};o(Xu,"InvalidStyleError");var AE=Xu,ed=class extends Ot{constructor(t,r){super("An image for space polygon ".concat(t," is defined, but this polygon does not exist on floor ").concat(r,".")),we(this,"spaceId"),we(this,"floorId"),this.spaceId=t,this.floorId=r}};o(ed,"AnchoredImageUnknownSpaceError");var NE=ed,td=class extends Ot{constructor(t,r){super("Text for space ".concat(t," is defined, but this space does not exist on floor ").concat(r,".")),we(this,"spaceId"),we(this,"floorId"),this.spaceId=t,this.floorId=r}};o(td,"AnchoredFloorTextUnknownSpaceError");var _E=td,rd=class extends Ot{constructor(t,r){super("Text for obstruction ".concat(t," is defined, but this obstruction does not exist on floor ").concat(r,".")),we(this,"obstructionId"),we(this,"floorId"),this.obstructionId=t,this.floorId=r}};o(rd,"AnchoredFloorTextUnknownObstructionError");var $E=rd,nd=class extends Ot{constructor(t,r){super("An image for obstruction polygon ".concat(t," is defined, but this polygon does not exist on floor ").concat(r,", or does not have allowed geometry.")),we(this,"obstructionId"),we(this,"floorId"),this.obstructionId=t,this.floorId=r}};o(nd,"AnchoredImageUnknownObstructionError");var RE=nd,od=class extends Error{constructor(t,r){super("A text area for space ".concat(t," is defined, but this space does not exist on floor ").concat(r,".")),we(this,"spaceId"),we(this,"floorId"),this.spaceId=t,this.floorId=r}};o(od,"TextAreaUnknownSpaceError");var CE=od,id=class extends Error{constructor(t,r){super("A layer with space ".concat(t," is defined, but this space does not exist on floor ").concat(r,".")),we(this,"spaceId"),we(this,"floorId"),this.spaceId=t,this.floorId=r}};o(id,"EnterpriseLayerUnknownSpaceError");var ME=id,ad=class extends Error{constructor(t,r){super("An enterprise style references a space ".concat(t," which does not exist on floor ").concat(r,".")),we(this,"geometryId"),we(this,"floorId"),this.geometryId=t,this.floorId=r}};o(ad,"EnterpriseStyleGeometryAnchorsUnknownSpaceError");var LE=ad,sd=class extends Error{constructor(t,r){super("A texture for space ".concat(t," is defined, but this space does not exist on floor ").concat(r,".")),we(this,"spaceId"),we(this,"floorId"),this.spaceId=t,this.floorId=r}};o(sd,"EnterpriseTextureUnknownSpaceError");var UE=sd,ld=class extends Error{constructor(t,r){super("A text area for obstruction ".concat(t," is defined, but this obstruction does not exist on floor ").concat(r,".")),we(this,"obstructionId"),we(this,"floorId"),this.obstructionId=t,this.floorId=r}};o(ld,"TextAreaUnknownObstructionError");var DE=ld,cd=class extends Error{constructor(t){super("Enterprise location '".concat(t,"' does not exist.")),this.name="EnterpriseUnknownLocationError"}};o(cd,"EnterpriseUnknownLocationError");var cu=cd,ud=class extends Error{constructor(t){super("Enterprise location references unknown map '".concat(t,"'.")),this.name="EnterpriseUnknownMapError"}};o(ud,"EnterpriseUnknownMapError");var uu=ud,dd=class extends Error{constructor(t,r,n){super("Enterprise location '".concat(t,"' references unknown space '").concat(r,"' on map '").concat(n,"'.")),this.name="EnterpriseLocationUnknownSpaceError"}};o(dd,"EnterpriseLocationUnknownSpaceError");var BE=dd,fd=class extends Error{constructor(t){super("Enterprise category '".concat(t,"' does not exist.")),this.name="EnterpriseUnknownCategoryError"}};o(fd,"EnterpriseUnknownCategoryError");var qE=fd,pd=class extends Error{constructor(t,r,n,i){super("Enterprise location '".concat(t,"' has an item '").concat(r,"' that references maps '").concat(n,"', but it is actually on '").concat(i,"'.")),this.name="EnterpriseInconsistentMapError"}};o(pd,"EnterpriseInconsistentMapError");var zE=pd,md=class extends Error{constructor(t){super("Cyclical reference detected in category hierarchy starting from category '".concat(t,"'")),this.name="EnterpriseCyclicalCategoryReferenceError"}};o(md,"EnterpriseCyclicalCategoryReferenceError");var VE=md,hd=class extends Error{constructor(t){super("Invalid timezone '".concat(t,"'")),this.name="EnterpriseInvalidTimeZoneError"}};o(hd,"EnterpriseInvalidTimeZoneError");var KE=hd,yd=class extends Error{constructor(t){super("An facade references floor stack '".concat(t,"' which does not exist")),this.name="FacadeUnknownFloorStackError"}};o(yd,"FacadeUnknownFloorStackError");var GE=yd,gd=class extends Error{constructor(t,r){super("Facade '".concat(t,"' references floor '").concat(r,"' which does not exist")),this.name="FacadeUnknownFloorError"}};o(gd,"FacadeUnknownFloorError");var HE=gd,vd=class extends Error{constructor(t,r,n){super("Facade '".concat(t,"' references space '").concat(r,"' (on floor '").concat(n,"') which does not exist")),this.name="FacadeUnknownSpaceError"}};o(vd,"FacadeUnknownSpaceError");var WE=vd,bd=class extends Ot{constructor(t){super("Duplicate tileset key found: ".concat(t)),this.name="DuplicateTilesetKeyError"}};o(bd,"DuplicateTilesetKeyError");var JE=bd;v();var ZE=o(e=>"polygons"in e,"isPolygonStyle"),YE=o(e=>"width"in e&&"lineStrings"in e,"isLineStringStyle"),QE=o(e=>"points"in e,"isPointStyle"),Id=o(e=>"anchorId"in e.properties||"geometryId"in e.properties,"isAnchoredImageOrTextLabelFeature"),$o=o(e=>e["floor.geojson"]!=null?new Set(e["floor.geojson"].features.map(t=>t.properties.id)):new Set(e["map.geojson"].map(t=>t.id)),"availableFloorIds"),XE=o(e=>e["floorstack.json"]!=null?new Set(e["floorstack.json"].map(t=>t.id)):new Set(e["mapstack.geojson"].map(t=>t.id)),"availableFloorStackIds"),eS=o(e=>{var t,r;let n=$o(e),i=(r=(t=e["floorstack.json"])!=null?t:e["mapstack.json"])!=null?r:e["mapstack.geojson"];for(let a of i)for(let s of a.maps)if(!n.has(s))throw new bE(a,s);return!0},"validateMapStacks"),tS=o(e=>{let t=$o(e),r=new Set(e["node.geojson"].features.map(n=>n.properties.id));for(let[n,i]of Object.entries(e.space)){if(!t.has(n))throw new IE(n);if(i){for(let a of i.features)for(let s of a.properties.destinationNodes)if(!r.has(s))throw new wE(a.properties,s)}}return!0},"validateSpaces"),rS=o(e=>{let t=$o(e),r=Object.entries(e.entrance).reduce((n,[i,a])=>(n[i]=new Set((a?a.features:[]).map(s=>s.properties.id)),n),{});for(let[n,i]of Object.entries(e.obstruction)){if(!t.has(n))throw new xE(n);if(i)for(let a of i.features)for(let s of a.properties.entrances){let l=r[n];if(!l||!l.has(s))throw new OE(a.properties,n,s)}}return!0},"validateObstructions"),nS=o(e=>{let t=new Set(e["node.geojson"].features.map(r=>r.properties.id));for(let r of e["connection.json"])for(let n of r.nodes)if(!t.has(n))throw new PE(r,n);return!0},"validateConnections"),oS=o(e=>{var t,r;let n=$o(e),i=Object.entries(e.space).reduce((s,[l,d])=>(s[l]=new Set((d?d.features:[]).map(c=>c.properties.id)),s),{}),a=new Set(e["node.geojson"].features.map(s=>s.properties.id));for(let s of e["node.geojson"].features){let l=(t=s.properties.floor)!=null?t:s.properties.map;if(!n.has(l))throw new EE(s.properties);for(let d of s.properties.space)if(!((r=i[l])!=null&&r.has(d)))throw new SE(s.properties,d);for(let d of s.properties.neighbors)if(!a.has(d.id))throw new FE(s.properties,d.id)}return!0},"validateNodes"),iS=o(e=>{if(!e.facade)return!0;let t=XE(e),r=$o(e),n=Object.entries(e.space).reduce((i,[a,s])=>(i[a]=new Set((s?s.features:[]).map(l=>l.properties.id)),i),{});for(let[i,a]of Object.entries(e.facade)){if(!t.has(i))throw new GE(i);if(a)for(let{floorId:s,spaceId:l}of a.spaces){if(!r.has(s))throw new HE(a.id,s);let d=n[s];if(!(d!=null&&d.has(l)))throw new WE(a.id,l,s)}}return!0},"validateFacades"),aS=o(e=>{if(!e["styles.json"])return!0;let t={},r={},n={};Object.values(e.space).forEach(i=>{i?.features.forEach(a=>{a.geometry.type==="Polygon"?t[a.properties.id]="space":a.geometry.type==="LineString"?r[a.properties.id]="space":a.geometry.type==="Point"&&(n[a.properties.id]="space")})}),Object.values(e.obstruction).forEach(i=>{i?.features.forEach(a=>{a.geometry.type==="Polygon"?t[a.properties.id]="obstruction":a.geometry.type==="LineString"&&(r[a.properties.id]="obstruction")})}),Object.values(e.entrance).forEach(i=>{i?.features.forEach(a=>{r[a.properties.id]="entrance"})});for(let[i,a]of Object.entries(e["styles.json"]))if(a)if(ZE(a))for(let s of a.polygons){let l=s.startsWith("s_")?"space":s.startsWith("o_")?"obstruction":"unknown";if(!t[s])throw new TE(i,l,s)}else if(YE(a))for(let s of a.lineStrings){let l=s.startsWith("s_")?"space":s.startsWith("o_")?"obstruction":s.startsWith("e_")?"entrance":"unknown";if(!r[s])throw new jE(i,l,s)}else if(QE(a)){for(let s of a.points)if(!n[s])throw new kE(i,"space",s)}else throw new AE(i);return!0},"validateStyles"),sS=o(e=>{var t,r,n;let i=(t=e?.enterprise)==null?void 0:t.floorText;if(!i)return!0;let a=Object.entries(e.space).reduce((l,[d,c])=>(l[d]=new Set((c?c.features:[]).map(p=>p.properties.id)),l),{}),s=Object.entries(e.obstruction).reduce((l,[d,c])=>(l[d]=new Set((c?c.features:[]).filter(p=>p.geometry.type==="Polygon").map(p=>p.properties.id)),l),{});for(let[l,d]of Object.entries(i))if(d){for(let c of d.features)if(Id(c)){let p=c.properties.geometryId;if(p.startsWith("o_")&&!((r=s[l])!=null&&r.has(p)))throw new $E(p,l);if(p.startsWith("s_")&&!((n=a[l])!=null&&n.has(p)))throw new _E(p,l)}}return!0},"validateFloorText"),lS=o(e=>{var t,r;let n=e.floorImages;if(!n)return!0;let i=Object.entries(e.space).reduce((s,[l,d])=>(s[l]=new Set((d?d.features:[]).map(c=>c.properties.id)),s),{}),a=Object.entries(e.obstruction).reduce((s,[l,d])=>(s[l]=new Set((d?d.features:[]).filter(c=>c.geometry.type==="Polygon").map(c=>c.properties.id)),s),{});for(let[s,l]of Object.entries(n))if(l){for(let d of l.features)if(Id(d)){let c=d.properties.anchorId;if(c.startsWith("o_")&&!((t=a[s])!=null&&t.has(c)))throw new RE(c,s);if(c.startsWith("s_")&&!((r=i[s])!=null&&r.has(c)))throw new NE(c,s)}}return!0},"validateFloorImages"),cS=o(e=>{var t,r;if(!e.textAreas)return!0;let n=Object.entries(e.space).reduce((a,[s,l])=>(a[s]=new Set((l?l.features:[]).map(d=>d.properties.id)),a),{}),i=Object.entries(e.obstruction).reduce((a,[s,l])=>(a[s]=new Set((l?l.features:[]).map(d=>d.properties.id)),a),{});for(let[a,s]of Object.entries(e.textAreas))if(s)for(let l of s.features)if("anchorId"in l.properties){let d=l.properties.anchorId;if(d.startsWith("s_")){if(!((t=n[a])!=null&&t.has(d)))throw new CE(d,a)}else if(d.startsWith("o_")){if(!((r=i[a])!=null&&r.has(d)))throw new DE(d,a)}else throw new Error("Invalid text area anchor ID: ".concat(d))}else if("verticalOffset"in l.properties){if(l.properties.verticalOffset<0)throw new Error("Invalid vertical offset for floating text area: ".concat(l.properties.verticalOffset))}else throw new Error("Invalid text area properties: ".concat(JSON.stringify(l.properties)));return!0},"validateTextAreas"),uS=o(e=>{var t,r,n,i,a,s,l,d;if(!e.enterprise)return!0;let c=e.enterprise;if(c.venue.tzid)try{new Intl.DateTimeFormat("en",{timeZone:c.venue.tzid})}catch{throw new KE(c.venue.tzid)}let p=new Set(c.locations.map(O=>O.id));if(c.venue.topLocations){for(let O of c.venue.topLocations)if(!p.has(O))throw new cu(O)}let f=new Set((t=e["floor.geojson"])==null?void 0:t.features.map(O=>O.properties.id));if(c.venue.defaultFloor&&!f.has(c.venue.defaultFloor))throw new uu(c.venue.defaultFloor);let h={};for(let[O,g]of Object.entries((r=e.space)!=null?r:{}))h[O]=new Set(g?.features.map(y=>y.properties.id));for(let O of c.locations)for(let g of(n=O.spaces)!=null?n:[]){let{floor:y,id:I}=g;if(!f.has(y))throw new uu(y);if(!((i=h[y])!=null&&i.has(I))){let m=Array.from(f.values()).map(b=>{var x;return(x=h[b])!=null&&x.has(I)?b:null}).find(b=>b!==null);throw m!=null?new zE(O.id,I,y,m):new BE(O.id,I,y)}}for(let O of c.layers)for(let{spaceId:g,floorId:y}of O.spaces)if(!((a=h[y])!=null&&a.has(g)))throw new ME(g,y);for(let[O,g]of Object.entries(c.enterpriseStyles||{}))for(let{geometryId:y,floorId:I}of g.geometryAnchors)if(!((s=h[I])!=null&&s.has(y)))throw new LE(y,I);for(let O of(l=c.textures)!=null?l:[])for(let g of O.geometryAnchors)if(!((d=h[g.floorId])!=null&&d.has(g.geometryId)))throw new UE(g.geometryId,g.floorId);let w=new Set(c.categories.map(O=>O.id)),N={};for(let O of c.categories)N[O.id]=new Set(O.children);let k=o((O,g=new Set)=>{if(g.has(O))throw new VE(O);g.add(O);for(let y of N[O]||[])k(y,new Set(g));g.delete(O)},"checkCyclicalReferences");for(let O of c.categories){k(O.id);for(let g of O.children)if(!w.has(g))throw new qE(g);for(let g of O.locations)if(!p.has(g))throw new cu(g)}return!0},"validateEnterprise"),dS=o(e=>{if(!e["tileset.json"])return!0;let t=new Set,r=e["tileset.json"];if(t.add(r.default.key),r.others)for(let n of r.others){if(t.has(n.key))throw new JE(n.key);t.add(n.key)}return!0},"validateTilesets"),fS=o(e=>eS(e)&&tS(e)&&rS(e)&&nS(e)&&oS(e)&&iS(e)&&aS(e)&&lS(e)&&cS(e)&&sS(e)&&uS(e)&&dS(e),"verifyMvfIntegrity");v();var pS=Os(Uu(),1),mS=Os(gE(),1);v();var hS=o(e=>{var t;let r=e;return((t=r?.allOf)==null?void 0:t.length)===2},"isPotentiallyBadSchema");function hi(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(hi);let t=oe({},e);for(let[r,n]of Object.entries(t))if(typeof n=="object"&&n!==null){let i=hi(n);if(hS(i)){let a=i.allOf.findIndex(l=>l.type==="array"),s=i.allOf.findIndex(l=>l.type==="object");if(a!==-1&&s!==-1){t[r]=Me(oe({},i),{allOf:[i.allOf[a]]});continue}}t[r]=i}return t}o(hi,"cleanupInvalidArrayAllOf");var yS={$ref:"#/definitions/ParsedMVF",$schema:"http://json-schema.org/draft-07/schema#",definitions:{AnchoredFloorTextProperties:{additionalProperties:!1,properties:{align:{default:"center",description:"Horizontal alignment of multi-line text.",enum:["left","center","right"],type:"string"},color:{default:"black",description:"The color of the text in CSS format (e.g. `#000000`, `rgb(0, 0, 0)`, `black`).",type:"string"},fontFamily:{default:"Droid Sans",description:"The font family of the text.",type:"string"},fontSize:{default:12,description:"The em-height (multiplier of the font's height) at which to render the font, in meters. The font height is the distance between the ascender (highest point, height of an A) and descender (lowest point, bottom of a g) of the font. For example, if the font-size is 12, the space for a single character will be 12 meters high.",type:"number"},geometryId:{anyOf:[{$ref:"#/definitions/SpaceId"},{$ref:"#/definitions/ObstructionId"}],description:"The geometry to which this text belongs. It will be displayed on top of it."},rotation:{description:"Rotation in degrees, about the center of the text. North is 0, east is 90.",maximum:360,minimum:0,type:"number"},text:{description:"The text to display. Newline characters are supported.",type:"string"},visible:{default:!0,description:"Whether the text is visible.",type:"boolean"}},required:["align","color","fontFamily","fontSize","geometryId","rotation","text","visible"],type:"object"},AnchoredImageProperties:{additionalProperties:!1,properties:{anchorId:{anyOf:[{$ref:"#/definitions/SpaceId"},{$ref:"#/definitions/ObstructionId"}],description:"The geometry to which this image belongs. It will be displayed on top of it."},height:{description:"The height of the image when represented on the map, in meters.",minimum:0,type:"number"},path:{description:"The path to the image. This will be a remote URL.",type:"string"},rotation:{description:"Rotation in degrees, about the center of the image. North is 0, east is 90.",maximum:360,minimum:0,type:"number"},width:{description:"The width of the image when represented on the map, in meters.",minimum:0,type:"number"}},required:["anchorId","height","path","rotation","width"],type:"object"},AnchoredTextAreaProperties:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/TextAreaAlignment",description:"The alignment of the text within the label. 'Near' means the text will be aligned up against the position. Typically in the SDK the text will be rotated to always be upright, so either the start or end of the text will be up against the position. 'Center' means it will be centered in the middle of the area."},anchorId:{anyOf:[{$ref:"#/definitions/SpaceId"},{$ref:"#/definitions/ObstructionId"}],description:"The geometry to which this text area belongs. It will be displayed on top of it."},maxHeight:{description:"The maximum height of the label, in meters. Half the height will be above the feature's position, half below.",exclusiveMinimum:0,type:"number"},maxWidth:{description:"The maximum width of the label, in meters. The left edge will start at the feature's position and extend in the rotation direction.",exclusiveMinimum:0,type:"number"},rotation:{description:"Rotation in degrees relative to north, about the position of the label. North is 0, east is 90.",maximum:360,minimum:0,type:"number"}},required:["align","anchorId","maxHeight","maxWidth","rotation"],type:"object"},AnnotationCollection:{additionalProperties:!1,properties:{features:{items:{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/AnnotationProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},AnnotationId:{pattern:"^a_[A-Za-z0-9_-]{8,}$",type:"string"},AnnotationProperties:{additionalProperties:!1,properties:{externalId:{type:"string"},id:{$ref:"#/definitions/AnnotationId"},symbolId:{type:"string"}},required:["id","symbolId"],type:"object"},Area:{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Polygon"},properties:{$ref:"#/definitions/AreaProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},AreaCollection:{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Area"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},AreaId:{pattern:"^ar_[A-Za-z0-9_-]{8,}$",type:"string"},AreaProperties:{additionalProperties:!1,properties:{center:{$ref:"#/definitions/Position",description:"The center of mass of this area."},destinationNodes:{description:"A list of node IDs which can be used to navigate to this area.",items:{$ref:"#/definitions/NodeId"},type:"array"},details:{$ref:"#/definitions/Details"},externalId:{type:"string"},id:{$ref:"#/definitions/AreaId"}},required:["id"],type:"object"},Category:{additionalProperties:!1,properties:{icon:{description:"The category's icon",format:"uri",type:"string"},id:{$ref:"#/definitions/CategoryId"},name:{type:"string"},parent:{$ref:"#/definitions/CategoryId"}},required:["id","name","icon"],type:"object"},CategoryId:{description:"A category ID",pattern:"^cat_[A-Za-z0-9_-]{8,}$",type:"string"},Connection:{additionalProperties:!1,properties:{accessible:{type:"boolean"},details:{additionalProperties:!1,properties:{name:{type:"string"}},type:"object"},externalId:{type:"string"},extra:{additionalProperties:{},type:"object"},id:{$ref:"#/definitions/ConnectionId"},metadata:{$ref:"#/definitions/Metadata"},nodes:{description:"A list of node IDs corresponding to nodes that are a part of this connection.",items:{$ref:"#/definitions/NodeId"},type:"array"},type:{type:"string"}},required:["id","type","nodes","externalId"],type:"object"},ConnectionId:{pattern:"^c_[A-Za-z0-9_-]{8,}$",type:"string"},Connections:{items:{$ref:"#/definitions/Connection"},type:"array"},Day:{enum:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],type:"string"},DayOrPublicHoliday:{anyOf:[{$ref:"#/definitions/Day"},{const:"PublicHolidays",type:"string"}]},Details:{additionalProperties:!1,description:"Additional information about a given entity.",properties:{description:{type:"string"},images:{items:{$ref:"#/definitions/Image"},type:"array"},links:{items:{$ref:"#/definitions/Hyperlink"},type:"array"},name:{type:"string"}},type:"object"},EnterpriseCategory:{additionalProperties:!1,properties:{children:{items:{$ref:"#/definitions/EnterpriseCategoryId"},type:"array"},color:{type:"string"},externalId:{type:"string"},extra:{additionalProperties:{},type:"object"},icon:{description:"The category's icon",format:"uri",type:"string"},iconFromDefaultList:{type:["string","null"]},id:{$ref:"#/definitions/EnterpriseCategoryId"},locations:{items:{$ref:"#/definitions/EnterpriseLocationId"},type:"array"},name:{type:"string"},picture:{description:"The category's picture",format:"uri",type:"string"},sortOrder:{type:"number"}},required:["children","externalId","id","locations","name","sortOrder"],type:"object"},EnterpriseCategoryId:{description:"An ID for an enterprise category",pattern:"^ec_[A-Za-z0-9_-]{8,}$",type:"string"},EnterpriseCategoryPriority:{additionalProperties:{items:{$ref:"#/definitions/EnterpriseCategoryId"},type:"array"},description:"The ordered list of category ids that this location belongs to The order here determines the priority of the categories, with the first category being the highest priority for determining application logic like icon and color preference.",propertyNames:{description:"An ID for an enterprise location",pattern:"^el_[A-Za-z0-9_-]{8,}$"},type:"object"},EnterpriseCollection:{additionalProperties:!1,properties:{categories:{items:{$ref:"#/definitions/EnterpriseCategory"},type:"array"},categoryPriorities:{$ref:"#/definitions/EnterpriseCategoryPriority"},enterpriseStyles:{$ref:"#/definitions/EnterpriseStyles"},floorText:{$ref:"#/definitions/EnterpriseFloorText"},layers:{items:{$ref:"#/definitions/EnterpriseLayer"},type:"array"},locationInstances:{items:{$ref:"#/definitions/EnterpriseLocationInstance"},type:"array"},locations:{items:{$ref:"#/definitions/EnterpriseLocation"},type:"array"},textures:{items:{$ref:"#/definitions/EnterpriseTexture"},type:"array"},venue:{$ref:"#/definitions/EnterpriseVenue"}},required:["locations","categories","venue","locationInstances","layers"],type:"object"},EnterpriseFloorText:{additionalProperties:{anyOf:[{$ref:"#/definitions/FloorTextFeatureCollection"},{not:{}}]},description:"The text to display on a map, split into  feature collection per floor.",type:"object"},EnterpriseLayer:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/EnterpriseLayerId"},name:{type:"string"},spaces:{items:{$ref:"#/definitions/EnterpriseLayerSpace"},minItems:1,type:"array"}},required:["id","name","spaces"],type:"object"},EnterpriseLayerId:{pattern:"^ely_[A-Za-z0-9_-]{8,}$",type:"string"},EnterpriseLayerSpace:{additionalProperties:!1,properties:{floorId:{$ref:"#/definitions/FloorId"},spaceId:{$ref:"#/definitions/SpaceId"}},required:["floorId","spaceId"],type:"object"},EnterpriseLocation:{additionalProperties:!1,properties:{amenity:{description:"The location's amenity type. Only set if the location is an amenity",type:"string"},description:{type:"string"},externalId:{type:"string"},extra:{additionalProperties:{},type:"object"},gallery:{description:"The location's image gallery",items:{additionalProperties:!1,properties:{caption:{type:["string","null"]},embeddedUrl:{description:"The URL to link from the image",format:"uri",type:["string","null"]},image:{type:"string"}},required:["image"],type:"object"},type:"array"},hidden:{description:"Whether to show the location in applications",type:"boolean"},id:{$ref:"#/definitions/EnterpriseLocationId"},links:{description:"Web links for the location",items:{additionalProperties:!1,properties:{label:{type:"string"},url:{description:"The URL of the link",format:"uri",type:"string"}},required:["label","url"],type:"object"},type:"array"},logo:{description:"The location's logo",format:"uri",type:"string"},name:{type:"string"},nodes:{deprecated:"Use `spaces` instead. A location's nodes that are not attached to a polygon will be in the spaces array as a point space. Nodes that are attached to one of it's polygons will be destinationNodes on that polygon's space",items:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/NodeId"},map:{$ref:"#/definitions/FloorId"}},required:["map","id"],type:"object"},type:"array"},operationHours:{items:{$ref:"#/definitions/OperationHours"},type:"array"},phone:{additionalProperties:!1,properties:{extension:{type:"string"},number:{type:"string"}},required:["number"],type:"object"},picture:{description:"The picture of the location",format:"uri",type:"string"},polygons:{deprecated:"Use `spaces` instead. All of a location's polygons will be in the spaces array.",items:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/SpaceId"},map:{$ref:"#/definitions/FloorId"}},required:["map","id"],type:"object"},type:"array"},shortName:{type:"string"},showFloatingLabelWhenImagePresent:{description:"Whether to show the flat label when an image is present",type:"boolean"},showLogo:{description:"Whether to show the logo of the location",type:"boolean"},siblingGroups:{description:"Locations that are related to this location in some manner (described by the label)",items:{$ref:"#/definitions/SiblingGroup"},type:"array"},social:{additionalProperties:!1,description:"The location's social media links",properties:{facebook:{type:"string"},instagram:{type:"string"},twitter:{type:"string"},website:{type:"string"}},type:"object"},sortOrder:{type:"number"},spaces:{description:`The places that this location is anchored to in the physical world. These are either Polygon or Point spaces. A location can be attached to many spaces, and a space can be attached to many locations.

If there are different properties for the location on those spaces, they will show up in the location's  {@link  EnterpriseLocation.instances instances }  property`,items:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/SpaceId"}},required:["floor","id"],type:"object"},type:"array"},states:{description:"The location's state. No more than one state should be active at a time, and all but at most one should have dates set",items:{$ref:"#/definitions/LocationState"},type:"array"},tags:{items:{type:"string"},type:"array"},type:{type:"string"}},required:["externalId","id","name","nodes","polygons","sortOrder","spaces","type"],type:"object"},EnterpriseLocationId:{description:"An ID for an enterprise location",pattern:"^el_[A-Za-z0-9_-]{8,}$",type:"string"},EnterpriseLocationInstance:{additionalProperties:!1,description:`A locationInstance is a particular instace of an Enterprise Location that has some properties different from the parent. Eg, it may have different hours, or a slightly different name.

A LocationInstance:
- MUST have a parent, referring to an Enterprise Location.
- MUST have a unique ID, for localization to work.
- SHOULD have AT LEAST ONE polygon or node to anchor it in space.
- SHOULD have AT LEAST ONE other Enterprise Location property set.

It is otherwise a Partial<EnterpriseLocation>

Usage examples:
- A locationInstance for a location with a different externalId so a customer can identify them individually.
- A locationInstance with different operationHours, that might indicate different hours for that particular entrace.`,properties:{amenity:{description:"The location's amenity type. Only set if the location is an amenity",type:"string"},description:{type:"string"},externalId:{type:"string"},extra:{additionalProperties:{},type:"object"},gallery:{description:"The location's image gallery",items:{additionalProperties:!1,properties:{caption:{type:["string","null"]},embeddedUrl:{description:"The URL to link from the image",format:"uri",type:["string","null"]},image:{type:"string"}},required:["image"],type:"object"},type:"array"},hidden:{description:"Whether to show the location in applications",type:"boolean"},id:{$ref:"#/definitions/EnterpriseLocationInstanceId"},links:{description:"Web links for the location",items:{additionalProperties:!1,properties:{label:{type:"string"},url:{description:"The URL of the link",format:"uri",type:"string"}},required:["label","url"],type:"object"},type:"array"},logo:{description:"The location's logo",format:"uri",type:"string"},name:{type:"string"},nodes:{deprecated:"Use `spaces` instead. A location's nodes that are not attached to a polygon will be in the spaces array as a point space. Nodes that are attached to one of it's polygons will be destinationNodes on that polygon's space",items:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/NodeId"},map:{$ref:"#/definitions/FloorId"}},required:["map","id"],type:"object"},type:"array"},operationHours:{items:{$ref:"#/definitions/OperationHours"},type:"array"},parent:{$ref:"#/definitions/EnterpriseLocationId"},phone:{additionalProperties:!1,properties:{extension:{type:"string"},number:{type:"string"}},required:["number"],type:"object"},picture:{description:"The picture of the location",format:"uri",type:"string"},polygons:{deprecated:"Use `spaces` instead. All of a location's polygons will be in the spaces array.",items:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/SpaceId"},map:{$ref:"#/definitions/FloorId"}},required:["map","id"],type:"object"},type:"array"},shortName:{type:"string"},showFloatingLabelWhenImagePresent:{description:"Whether to show the flat label when an image is present",type:"boolean"},showLogo:{description:"Whether to show the logo of the location",type:"boolean"},siblingGroups:{description:"Locations that are related to this location in some manner (described by the label)",items:{$ref:"#/definitions/SiblingGroup"},type:"array"},social:{additionalProperties:!1,description:"The location's social media links",properties:{facebook:{type:"string"},instagram:{type:"string"},twitter:{type:"string"},website:{type:"string"}},type:"object"},sortOrder:{type:"number"},spaces:{description:`The places that this location is anchored to in the physical world. These are either Polygon or Point spaces. A location can be attached to many spaces, and a space can be attached to many locations.

If there are different properties for the location on those spaces, they will show up in the location's  {@link  EnterpriseLocation.instances instances }  property`,items:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/SpaceId"}},required:["floor","id"],type:"object"},type:"array"},states:{description:"The location's state. No more than one state should be active at a time, and all but at most one should have dates set",items:{$ref:"#/definitions/LocationState"},type:"array"},tags:{items:{type:"string"},type:"array"},type:{type:"string"}},required:["id","parent"],type:"object"},EnterpriseLocationInstanceId:{description:"An ID for an enterprise location instance",pattern:"^eli_[A-Za-z0-9_-]{8,}$",type:"string"},EnterpriseStyles:{additionalProperties:{additionalProperties:!1,properties:{edgeOffset:{type:"number"},geometryAnchors:{items:{additionalProperties:!1,properties:{floorId:{$ref:"#/definitions/FloorId"},geometryId:{$ref:"#/definitions/SpaceId"}},required:["geometryId","floorId"],type:"object"},type:"array"}},required:["geometryAnchors"],type:"object"},type:"object"},EnterpriseTexture:{additionalProperties:!1,properties:{bounds:{description:"Coordinates of the texture's bounding box in format: [minLon, minLat, maxLon, maxLat].",items:{type:"number"},maxItems:4,minItems:4,type:"array"},face:{$ref:"#/definitions/EnterpriseTextureFace",description:`Face of the polygon that the texture will be applied to.

'top' means that the texture will be applied to the upward-pointing face of the polygon.

'side' means that the texture will be applied to every side face of the polygon.`},geometryAnchors:{description:"Anchors for the texture on the geometry of the polygon.",items:{$ref:"#/definitions/EnterpriseTextureGeometryAnchor"},minItems:1,type:"array"},offset:{$ref:"#/definitions/EnterpriseTextureUV",description:"Controls the starting position of the texture on the surface. The u value shifts the texture horizontally and v shifts vertically."},path:{description:"Path to the texture image. Must be either a PNG or JPG format.",type:"string"},repeat:{$ref:"#/definitions/EnterpriseTextureUV",description:"Controls how many times the texture repeats across the surface. The u value controls horizontal repetition and v controls vertical repetition."},rotation:{description:`Rotation of the texture in degrees clockwise.

For top textures this is relative to north. North is 0, east is 90.

For side textures this is relative to the upward direction, with 0 degrees being upright.`,maximum:360,minimum:0,type:"number"},surface:{$ref:"#/definitions/EnterpriseTextureSurface",description:`Surface of the polygon that the texture will be applied to.

'inside' means that the texture will only be applied to the interior surface of the polygon.

'outside' means that the texture will only be applied to the exterior surface of the polygon.

'both' means that the texture will be applied to both interior and exterior surfaces of the polygon.`}},required:["repeat","offset","rotation","path","face","surface","bounds","geometryAnchors"],type:"object"},EnterpriseTextureFace:{enum:["top","side"],type:"string"},EnterpriseTextureGeometryAnchor:{additionalProperties:!1,properties:{floorId:{$ref:"#/definitions/FloorId"},geometryId:{$ref:"#/definitions/SpaceId"}},required:["geometryId","floorId"],type:"object"},EnterpriseTextureSurface:{enum:["inside","outside","both"],type:"string"},EnterpriseTextureUV:{additionalProperties:!1,properties:{u:{type:"number"},v:{type:"number"}},required:["u","v"],type:"object"},EnterpriseVenue:{additionalProperties:!1,properties:{countrycode:{description:"The ISO 3166-1 alpha-2 country code of the venue, if known\n\nEg. `US` or `GB`",type:"string"},coverImage:{description:"The venue's cover image",format:"uri",type:"string"},defaultFloor:{$ref:"#/definitions/FloorId",description:"The venue's default floor"},defaultLanguage:{$ref:"#/definitions/Language"},defaultMap:{$ref:"#/definitions/FloorId",deprecated:"Use `defaultFloor` instead"},externalId:{type:"string"},extra:{additionalProperties:{},type:"object"},icon:{description:"The venue's icon",format:"uri",type:"string"},languages:{items:{$ref:"#/definitions/Language"},type:"array"},logo:{description:"The venue's logo",format:"uri",type:"string"},mappedinWebUrl:{description:`The base URL for Mappedin Web for this venue

Better name?`,type:"string"},name:{type:"string"},operationHours:{description:"When this venue is open.",items:{$ref:"#/definitions/OperationHours"},type:"array"},slug:{type:"string"},topLocations:{items:{$ref:"#/definitions/EnterpriseLocationId"},type:"array"},tzid:{description:"The venue's timezone, from the IANA Time Zone Database. Should be in the format of `America/New_York`",pattern:"^[A-Za-z0-9\\/_-]+$",type:"string"}},required:["defaultLanguage","externalId","languages","name","slug"],type:"object"},EntranceCollection:{$ref:"#/definitions/FeatureCollection%3CLineString%2CEntranceProperties%3E"},EntranceId:{pattern:"^e_[A-Za-z0-9_-]{8,}$",type:"string"},EntranceProperties:{additionalProperties:!1,properties:{details:{$ref:"#/definitions/Details"},externalId:{type:"string"},id:{$ref:"#/definitions/EntranceId"},isExterior:{type:"boolean"},metadata:{$ref:"#/definitions/Metadata"},node:{$ref:"#/definitions/NodeId"}},required:["id","externalId"],type:"object"},Facade:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/FacadeId"},spaces:{items:{$ref:"#/definitions/FacadeSpace"},minItems:1,type:"array"}},required:["id","spaces"],type:"object"},FacadeId:{pattern:"^fc_[A-Za-z0-9_-]{8,}$",type:"string"},FacadeSpace:{additionalProperties:!1,properties:{floorId:{$ref:"#/definitions/FloorId"},spaceId:{$ref:"#/definitions/SpaceId"}},required:["floorId","spaceId"],type:"object"},"Feature<(Polygon|LineString),ObstructionProperties>":{additionalProperties:!1,properties:{geometry:{anyOf:[{$ref:"#/definitions/Polygon"},{$ref:"#/definitions/LineString"}]},properties:{$ref:"#/definitions/ObstructionProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<(Polygon|LineString|Point),SpaceProperties>":{additionalProperties:!1,properties:{geometry:{anyOf:[{$ref:"#/definitions/Polygon"},{$ref:"#/definitions/LineString"},{$ref:"#/definitions/Point"}]},properties:{$ref:"#/definitions/SpaceProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<(Polygon|MultiPolygon|null),FloorProperties>":{additionalProperties:!1,properties:{geometry:{anyOf:[{$ref:"#/definitions/Polygon"},{$ref:"#/definitions/MultiPolygon"},{type:"null"}]},properties:{$ref:"#/definitions/FloorProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<LineString,EntranceProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/LineString"},properties:{$ref:"#/definitions/EntranceProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<Point,FloorImageProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/FloorImageProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<Point,FloorTextProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/FloorTextProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<Point,NodeProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/NodeProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<Point,TextAreaProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/TextAreaProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"Feature<Polygon,FloorStackFootprintProperties>":{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Polygon"},properties:{$ref:"#/definitions/FloorStackFootprintProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},"FeatureCollection<(Polygon|LineString),ObstructionProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3C(Polygon%7CLineString)%2CObstructionProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<(Polygon|LineString|Point),SpaceProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3C(Polygon%7CLineString%7CPoint)%2CSpaceProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<(Polygon|MultiPolygon|null),FloorProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3C(Polygon%7CMultiPolygon%7Cnull)%2CFloorProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<LineString,EntranceProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CLineString%2CEntranceProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<Point,FloorImageProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CPoint%2CFloorImageProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<Point,FloorTextProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CPoint%2CFloorTextProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<Point,NodeProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CPoint%2CNodeProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<Point,TextAreaProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CPoint%2CTextAreaProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},"FeatureCollection<Polygon,FloorStackFootprintProperties>":{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/Feature%3CPolygon%2CFloorStackFootprintProperties%3E"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},FeatureCollectionType:{const:"FeatureCollection",description:"The type field used for a collection of GeoJSON features.",type:"string"},FeatureType:{const:"Feature",description:"The type field used for individual GeoJSON features.",type:"string"},FloatingFloorTextProperties:{additionalProperties:!1,properties:{align:{default:"center",description:"Horizontal alignment of multi-line text.",enum:["left","center","right"],type:"string"},color:{default:"black",description:"The color of the text in CSS format (e.g. `#000000`, `rgb(0, 0, 0)`, `black`).",type:"string"},fontFamily:{default:"Droid Sans",description:"The font family of the text.",type:"string"},fontSize:{default:12,description:"The em-height (multiplier of the font's height) at which to render the font, in meters. The font height is the distance between the ascender (highest point, height of an A) and descender (lowest point, bottom of a g) of the font. For example, if the font-size is 12, the space for a single character will be 12 meters high.",type:"number"},rotation:{description:"Rotation in degrees, about the center of the text. North is 0, east is 90.",maximum:360,minimum:0,type:"number"},text:{description:"The text to display. Newline characters are supported.",type:"string"},verticalOffset:{description:"The vertical offset of the text, in meters.",type:"number"},visible:{default:!0,description:"Whether the text is visible.",type:"boolean"}},required:["align","color","fontFamily","fontSize","rotation","text","verticalOffset","visible"],type:"object"},FloatingImageProperties:{additionalProperties:!1,properties:{height:{description:"The height of the image when represented on the map, in meters.",minimum:0,type:"number"},path:{description:"The path to the image. This will be a remote URL.",type:"string"},rotation:{description:"Rotation in degrees, about the center of the image. North is 0, east is 90.",maximum:360,minimum:0,type:"number"},verticalOffset:{description:"How high to position the image, in meters, relative to the ground plane.",minimum:0,type:"number"},width:{description:"The width of the image when represented on the map, in meters.",minimum:0,type:"number"}},required:["height","path","rotation","verticalOffset","width"],type:"object"},FloatingTextAreaProperties:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/TextAreaAlignment",description:"The alignment of the text within the label. 'Near' means the text will be aligned up against the position. Typically in the SDK the text will be rotated to always be upright, so either the start or end of the text will be up against the position. 'Center' means it will be centered in the middle of the area."},maxHeight:{description:"The maximum height of the label, in meters. Half the height will be above the feature's position, half below.",exclusiveMinimum:0,type:"number"},maxWidth:{description:"The maximum width of the label, in meters. The left edge will start at the feature's position and extend in the rotation direction.",exclusiveMinimum:0,type:"number"},rotation:{description:"Rotation in degrees relative to north, about the position of the label. North is 0, east is 90.",maximum:360,minimum:0,type:"number"},verticalOffset:{description:"How high to position the text area, in meters, relative to the ground plane.",minimum:0,type:"number"}},required:["align","maxHeight","maxWidth","rotation","verticalOffset"],type:"object"},FloorCollection:{$ref:"#/definitions/FeatureCollection%3C(Polygon%7CMultiPolygon%7Cnull)%2CFloorProperties%3E"},FloorId:{description:"The m_ prefix is deprecated, from when floors were previously called maps. Use f_ as the prefix instead.",pattern:"^[mf]_[A-Za-z0-9_-]{8,}$",type:"string"},FloorImageFeatureCollection:{$ref:"#/definitions/FeatureCollection%3CPoint%2CFloorImageProperties%3E",description:"A collection of images to be displayed on a map. They are either attached to a polygon or are floating in space."},FloorImageProperties:{anyOf:[{$ref:"#/definitions/AnchoredImageProperties"},{$ref:"#/definitions/FloatingImageProperties"}]},FloorProperties:{additionalProperties:!1,properties:{elevation:{description:"The elevation of this map relative to other maps in the stack. Must be an integer.",type:"integer"},externalId:{description:"Use of this property as the name of the map is deprecated. Use the name property instead.",type:"string"},id:{$ref:"#/definitions/FloorId"},metadata:{$ref:"#/definitions/Metadata"},name:{type:"string"},shortName:{description:"A short name for the map, if it exists. Usually one or two characters (eg, 3, F1, L, etc.) For display in very small spaces, like a floor selector dropdown. Might line up with what is shown on elevator buttons in the physical world.",type:"string"},subtitle:{description:`A subtitle for the map, for display in larger spaces, usually beneath the full name. Provides additional context for what is actually on the map, if the name is not clear. For example, if the full name is "Level 1", the subtitle might be "Arrivals and Baggage Claim".

Should be no more than a few words.`,type:"string"}},required:["id","externalId","elevation"],type:"object"},FloorStack:{additionalProperties:!1,properties:{defaultFloor:{$ref:"#/definitions/FloorId",description:"The default floor to use when a floor is not specified."},externalId:{type:"string"},floors:{description:"A list of floor IDs that belong to this floor stack.",items:{$ref:"#/definitions/FloorId"},type:"array"},footprint:{$ref:"#/definitions/FeatureCollection%3CPolygon%2CFloorStackFootprintProperties%3E",description:"Provides a footprint for the map stack based on the geometry of the maps it contains. This is useful for rendering a map stack without loading all of its maps."},id:{$ref:"#/definitions/FloorStackId"},maps:{deprecated:"Use `floors` instead.",description:"A list of floor IDs that belong to this floor stack.",items:{$ref:"#/definitions/FloorId"},type:"array"},metadata:{$ref:"#/definitions/Metadata"},name:{type:"string"},shortName:{description:"A short name for the map stack, if it exists. For display in small spaces, like a floor selector dropdown.",type:"string"},type:{description:"The type of MapStack, e.g. Building, Outdoor. Defaults to Building.",enum:["Building","Outdoor"],type:"string"}},required:["id","externalId","name","maps"],type:"object"},FloorStackFootprintProperties:{additionalProperties:{not:{}},type:"object"},FloorStackId:{description:"The mg_ prefix is deprecated, from when floor stacks were previously called map groups. Use fs_ as the prefix instead.",pattern:"^fs_[A-Za-z0-9_-]{8,}$",type:"string"},FloorStacks:{items:{$ref:"#/definitions/FloorStack"},type:"array"},FloorTextFeatureCollection:{$ref:"#/definitions/FeatureCollection%3CPoint%2CFloorTextProperties%3E",description:"A collection of text to be displayed on a map. They are either attached to a space or are floating."},FloorTextProperties:{anyOf:[{$ref:"#/definitions/AnchoredFloorTextProperties"},{$ref:"#/definitions/FloatingFloorTextProperties"}]},Hyperlink:{additionalProperties:!1,properties:{displayName:{type:"string"},url:{type:"string"}},required:["url"],type:"object"},Image:{additionalProperties:!1,properties:{altText:{type:"string"},url:{type:"string"}},required:["url"],type:"object"},Language:{additionalProperties:!1,properties:{code:{type:"string"},name:{type:"string"}},required:["name","code"],type:"object"},Latitude:{description:"A WGS 84-compatible latitude coordinate value.",maximum:90,minimum:-90,type:"number"},LineString:{additionalProperties:!1,description:"An RFC-7946 compatible GeoJSON LineString geometry.",properties:{coordinates:{items:{$ref:"#/definitions/Position"},minItems:2,type:"array"},type:{const:"LineString",type:"string"}},required:["coordinates","type"],type:"object"},LineStringStyle:{additionalProperties:!1,properties:{altitude:{description:'How far off the "ground" the objects belonging to this layer should be drawn, in meters.',minimum:0,type:"number"},color:{description:"Color should be represented with a hash (#), followed by 6 hexadecimal digits. ex: #RRGGBB",pattern:"^#[0-9a-fA-F]{6}$",type:"string"},height:{description:"The height of the objects belonging to this layer, in meters.",minimum:0,type:"number"},lineStrings:{description:"The line strings which this style applies to.",items:{anyOf:[{$ref:"#/definitions/EntranceId"},{$ref:"#/definitions/ObstructionId"},{$ref:"#/definitions/SpaceId"}]},type:"array"},opacity:{maximum:1,minimum:0,type:"number"},width:{description:"The thickness of the line when rendered, in meters, measured from the center to the edge.",exclusiveMinimum:0,type:"number"}},required:["altitude","color","height","lineStrings","opacity","width"],type:"object"},LocalPosition:{description:"A position for a local coordinate system, measured in metres.",items:{type:"number"},maxItems:2,minItems:2,type:"array"},Location:{additionalProperties:!1,properties:{annotations:{items:{$ref:"#/definitions/LocationAnnotationMapping"},type:"array"},areas:{items:{$ref:"#/definitions/LocationAreaMapping"},type:"array"},categories:{items:{$ref:"#/definitions/CategoryId"},type:"array"},connections:{items:{$ref:"#/definitions/ConnectionId"},type:"array"},description:{type:"string"},entrances:{items:{$ref:"#/definitions/LocationEntranceMapping"},type:"array"},externalId:{type:"string"},icon:{description:"The location's icon, one of picture/category/logo",format:"uri",type:"string"},id:{$ref:"#/definitions/LocationId"},links:{description:"Web links for the location",items:{$ref:"#/definitions/LocationLink"},type:"array"},logo:{description:"The location's logo",format:"uri",type:"string"},name:{type:"string"},obstructions:{items:{$ref:"#/definitions/LocationObstructionMapping"},type:"array"},openingHoursSpecification:{description:"The location's opening hours",items:{$ref:"#/definitions/OpeningHoursSpecification"},type:"array"},phone:{type:"string"},pictures:{description:"The location's pictures",items:{$ref:"#/definitions/LocationPicture"},type:"array"},social:{description:"The location's social media links.",items:{$ref:"#/definitions/LocationSocial"},type:"array"},spaces:{items:{$ref:"#/definitions/LocationSpaceMapping"},type:"array"},website:{$ref:"#/definitions/LocationLink",description:"The location's website"}},required:["id","name","categories","spaces","obstructions","entrances","connections","annotations","areas","social","pictures","links","openingHoursSpecification"],type:"object"},LocationAnnotationMapping:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/AnnotationId"}},required:["floor","id"],type:"object"},LocationAreaMapping:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/AreaId"}},required:["floor","id"],type:"object"},LocationEntranceMapping:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/EntranceId"}},required:["floor","id"],type:"object"},LocationId:{description:"An ID for a location",pattern:"^loc_[A-Za-z0-9_-]{8,}$",type:"string"},LocationLink:{additionalProperties:!1,properties:{label:{type:"string"},url:{description:"The URL of the link",format:"uri",type:"string"}},required:["label","url"],type:"object"},LocationObstructionMapping:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/ObstructionId"}},required:["floor","id"],type:"object"},LocationPicture:{additionalProperties:!1,description:"The location's pictures Single-field object, because it's plausible we might add captions or comments in the future",properties:{url:{format:"uri",type:"string"}},type:"object"},LocationSocial:{additionalProperties:!1,properties:{name:{description:"The name of the social media platform.",type:"string"},url:{description:"The URL of the social media profile",format:"uri",type:"string"}},required:["name","url"],type:"object"},LocationSpaceMapping:{additionalProperties:!1,properties:{floor:{$ref:"#/definitions/FloorId"},id:{$ref:"#/definitions/SpaceId"}},required:["floor","id"],type:"object"},LocationState:{additionalProperties:!1,description:"The state of a location. Start and end dates are optional.",properties:{end:{description:"The start date of the state",format:"date",type:"string"},start:{description:"The start date of the state",format:"date",type:"string"},type:{description:`The type of the location state. Technically not limited, but should be one of the following:
- closed-temporarily
- new
- pop-up
- coming-soon
- relocated`,type:"string"}},required:["type"],type:"object"},Longitude:{description:"A WGS 84-compatible longitude coordinate value.",maximum:180,minimum:-180,type:"number"},ManifestCollection:{additionalProperties:!1,properties:{features:{items:{$ref:"#/definitions/ManifestFeature"},maxItems:1,minItems:1,type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},ManifestFeature:{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/Point"},properties:{$ref:"#/definitions/ManifestProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},ManifestFile:{additionalProperties:!1,properties:{name:{type:"string"},type:{const:"file",type:"string"}},required:["type","name"],type:"object"},ManifestFolder:{additionalProperties:!1,properties:{children:{items:{$ref:"#/definitions/ManifestFile"},minItems:1,type:"array"},name:{type:"string"},type:{const:"folder",type:"string"}},required:["type","name","children"],type:"object"},ManifestProperties:{additionalProperties:!1,properties:{folder_struct:{items:{anyOf:[{$ref:"#/definitions/ManifestFolder"},{$ref:"#/definitions/ManifestFile"}]},type:"array"},language:{description:"The RFC 5646 language tag of the MVF. https://datatracker.ietf.org/doc/html/rfc5646",examples:["en-US"],type:"string"},map:{description:"The identifier of the map that this MVF is for.",type:"string"},name:{type:"string"},naturalBearing:{description:'The angle, in degrees, the map is considered to be "naturally oriented" as, rather than facing directly north. 90 degrees means East is "up"',maximum:360,minimum:0,type:"number"},org_id:{type:"string"},time:{description:"An ISO 8601 date-time string, including timezone offset.",format:"date-time",type:"string"},tzid:{description:"The map's timezone, from the IANA Time Zone Database. Should be in the format of `America/New_York`",examples:["America/New_York"],pattern:"^[A-Za-z0-9_-]+\\/[A-Za-z0-9_-]+$",type:"string"},version:{const:"2.0.0",type:"string"}},required:["name","folder_struct","version","time"],type:"object"},Maps:{deprecated:"This is only present on `map.geojson` which is deprecated. Use\nthe collection on `floor.geojson` instead.",items:{$ref:"#/definitions/FloorProperties"},type:"array"},Material:{additionalProperties:!1,description:`The color and/or texture that should be applied to an instance of a Shape.

If both a color and a texture are provided, the color will be applied to the texture via a multiply operation. If neither are provided, the shape will be white.`,properties:{color:{description:"The color of this mateial as a hex code.",pattern:"^#[0-9a-fA-F]{6}$",type:"string"},texture:{$ref:"#/definitions/Texture"}},type:"object"},Metadata:{additionalProperties:{},description:"Can be any extra metadata that is not part of the main MVF spec. Presence of any key or value is not guaranteed. Values are expected to be JSON-serializable.",type:"object"},ModelInstance:{additionalProperties:!1,description:"An instance of a 3D model.",properties:{altitude:{description:"The distance above ground, in metres, where this Decoration's origin point should be placed.",type:"number"},path:{description:"The path to this asset, relative to the MVF's models folder. Supports GLTF and OBJ.",minLength:1,type:"string"},position:{$ref:"#/definitions/Position",description:"The long/lat point that the Decoration's origin point correponds to."},rotation:{$ref:"#/definitions/Vector3",description:"The rotation, in Euler angles in XYZ order, that will be applied to this Decoration."},scale:{$ref:"#/definitions/Vector3",description:"The X, Y and Z scale that will be applied to this Decoration."}},required:["altitude","path","position","rotation","scale"],type:"object"},ModelInstanceCollection:{additionalProperties:{$ref:"#/definitions/ModelInstance"},description:"A map of model instances, where keys are valid polygon or obstruction IDs. Replaces the specified polygon.",type:"object"},MultiPolygon:{additionalProperties:!1,description:"An RFC-7946 compatible GeoJSON MultiPolygon geometry.",properties:{coordinates:{items:{items:{items:{$ref:"#/definitions/Position"},type:"array"},type:"array"},type:"array"},type:{const:"MultiPolygon",type:"string"}},required:["coordinates","type"],type:"object"},NodeCollection:{$ref:"#/definitions/FeatureCollection%3CPoint%2CNodeProperties%3E"},NodeId:{pattern:"^n_[A-Za-z0-9_-]{8,}$",type:"string"},NodeProperties:{additionalProperties:!1,properties:{externalId:{type:"string"},floor:{$ref:"#/definitions/FloorId",description:"The ID of the floor this node is found on."},id:{$ref:"#/definitions/NodeId"},map:{$ref:"#/definitions/FloorId",deprecated:"use `floor` instead.",description:"The ID of the floor this node is found on."},neighbors:{description:"A list of nodes that can be navigated to from this node.",items:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/NodeId"},weight:{description:"The cost of navigating to this node.",minimum:0,type:"number"}},required:["id","weight"],type:"object"},type:"array"},preventSmoothing:{description:"Flag that may optionally indicate that a node is part of a custom path network rather than auto generated and should not be removed during smoothing/simplifcation.",type:"boolean"},space:{description:"The IDs of any spaces this node may be contained within.",items:{$ref:"#/definitions/SpaceId"},type:"array"}},required:["id","externalId","map","space","neighbors"],type:"object"},ObstructionCollection:{$ref:"#/definitions/FeatureCollection%3C(Polygon%7CLineString)%2CObstructionProperties%3E"},ObstructionId:{pattern:"^o_[A-Za-z0-9_-]{8,}$",type:"string"},ObstructionProperties:{additionalProperties:!1,properties:{center:{$ref:"#/definitions/Position",description:"The center of mass of this obstruction, if it is a polygon. This is undefined for line strings as this can be trivially derived."},details:{$ref:"#/definitions/Details"},entrances:{description:"A list of entrance IDs corresponding to entrances that can be used to navigate through this obstruction.",items:{$ref:"#/definitions/EntranceId"},type:"array"},externalId:{type:"string"},footprintComponent:{description:"Indicates whether this obstruction is considered part of the footprint of the building it is a part of. For example, an exterior wall would be considered part of the building footprint.",type:"boolean"},id:{$ref:"#/definitions/ObstructionId"},kind:{type:"string"},metadata:{$ref:"#/definitions/Metadata"}},required:["id","externalId","entrances"],type:"object"},OpeningHoursSpecification:{additionalProperties:!1,description:`We (almost) follow this schema (http://schema.org/OpeningHoursSpecification) The only difference is that we (like Google: https://developers.google.com/search/docs/data-types/local-businesses) accept dayOfWeek as an array as well as an individual day.

Behavioral notes:
- if the "opens" property is not present, the location is closed, and the closes property is ignored (Schema.org style)
- if opens/closes are both set to 00:00, the location is closed (Google style)
- If special hours do not specifiy certain weekdays being open, those weekdays are closed.
- Not specifying dayOfWeek is equivalent to specifying every day of the week.
- we will omit the '@type' property when producing MVFs. But we won't reject 3rd party MVFs that include it.`,properties:{"@type":{const:"OpeningHoursSpecification",default:"OpeningHoursSpecification",description:"The type of opening hours",type:"string"},closes:{$ref:"#/definitions/Time",description:"The time the opening hours end"},dayOfWeek:{anyOf:[{$ref:"#/definitions/DayOrPublicHoliday"},{items:{$ref:"#/definitions/DayOrPublicHoliday"},maxItems:1,minItems:1,type:"array"},{items:{$ref:"#/definitions/DayOrPublicHoliday"},type:"array"}],description:"The days of the week the opening hours apply to"},opens:{$ref:"#/definitions/Time",description:"The time the opening hours start"},validFrom:{description:"The date the opening hours start, in ISO 8601 format",format:"date-time",type:"string"},validThrough:{description:"The date the opening hours end, in ISO 8601 format",format:"date-time",type:"string"}},type:"object"},OperationHours:{additionalProperties:!1,description:"We (almost) follow this schema (http://schema.org/OpeningHoursSpecification) The only difference is that we (like Google: https://developers.google.com/search/docs/data-types/local-businesses) accept dayOfWeek as an array as well as an individual day.",properties:{"@type":{const:"OpeningHoursSpecification",default:"OpeningHoursSpecification",description:"The type of operation hours",type:"string"},closes:{$ref:"#/definitions/Time",description:"The time the operation hours end"},dayOfWeek:{anyOf:[{$ref:"#/definitions/DayOrPublicHoliday"},{items:{$ref:"#/definitions/DayOrPublicHoliday"},maxItems:1,minItems:1,type:"array"},{items:{$ref:"#/definitions/DayOrPublicHoliday"},type:"array"}],description:"The days of the week the operation hours apply to"},opens:{$ref:"#/definitions/Time",description:"The time the operation hours start"},validFrom:{description:"The date the operation hours start, in ISO 8601 format",format:"date-time",type:"string"},validThrough:{description:"The date the operation hours end, in ISO 8601 format",format:"date-time",type:"string"}},type:"object"},ParsedMVF:{additionalProperties:!1,properties:{annotation:{additionalProperties:{anyOf:[{$ref:"#/definitions/AnnotationCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},area:{additionalProperties:{anyOf:[{$ref:"#/definitions/AreaCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"category.json":{items:{$ref:"#/definitions/Category"},type:"array"},"connection.json":{$ref:"#/definitions/Connections"},enterprise:{$ref:"#/definitions/EnterpriseCollection"},entrance:{additionalProperties:{anyOf:[{$ref:"#/definitions/EntranceCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},facade:{additionalProperties:{anyOf:[{$ref:"#/definitions/Facade"},{not:{}}]},propertyNames:{pattern:"^fs_[A-Za-z0-9_-]{8,}$"},type:"object"},"floor.geojson":{$ref:"#/definitions/FloorCollection"},floorImages:{additionalProperties:{anyOf:[{$ref:"#/definitions/FloorImageFeatureCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"floorstack.json":{$ref:"#/definitions/FloorStacks"},"location.json":{items:{$ref:"#/definitions/Location"},type:"array"},"manifest.geojson":{$ref:"#/definitions/ManifestCollection"},"map.geojson":{$ref:"#/definitions/Maps",deprecated:"Use `floor.geojson` instead."},"mapstack.geojson":{$ref:"#/definitions/FloorStacks",deprecated:"Use `floorstack.json` instead."},"mapstack.json":{$ref:"#/definitions/FloorStacks",deprecated:"Use `floorstack.json` instead."},modelInstances:{additionalProperties:{anyOf:[{$ref:"#/definitions/ModelInstanceCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"node.geojson":{$ref:"#/definitions/NodeCollection"},obstruction:{additionalProperties:{anyOf:[{$ref:"#/definitions/ObstructionCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},shapeInstances:{additionalProperties:{anyOf:[{$ref:"#/definitions/ShapeInstanceCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"shapes.json":{$ref:"#/definitions/ShapeCollection"},space:{additionalProperties:{anyOf:[{$ref:"#/definitions/SpaceCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"styles.json":{$ref:"#/definitions/StyleCollection"},textAreas:{additionalProperties:{anyOf:[{$ref:"#/definitions/TextAreaFeatureCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"},"tileset.json":{$ref:"#/definitions/TilesetCollection"},window:{additionalProperties:{anyOf:[{$ref:"#/definitions/WindowCollection"},{not:{}}]},propertyNames:{pattern:"^[mf]_[A-Za-z0-9_-]{8,}$"},type:"object"}},required:["manifest.geojson","mapstack.geojson","map.geojson","space","obstruction","connection.json","node.geojson","entrance"],type:"object"},Point:{additionalProperties:!1,description:"An RFC-7946 compatible GeoJSON Point geometry.",properties:{coordinates:{$ref:"#/definitions/Position"},type:{const:"Point",type:"string"}},required:["coordinates","type"],type:"object"},PointStyle:{additionalProperties:!1,properties:{points:{description:"The points which this style applies to.",items:{$ref:"#/definitions/SpaceId"},type:"array"},showImage:{description:"Whether or not the first image attached to the space or obstruction should be displayed on the point.",type:"boolean"}},required:["points"],type:"object"},Polygon:{additionalProperties:!1,description:"An RFC-7946 compatible GeoJSON Polygon geometry.",properties:{coordinates:{items:{items:{$ref:"#/definitions/Position"},type:"array"},type:"array"},type:{const:"Polygon",type:"string"}},required:["coordinates","type"],type:"object"},PolygonStyle:{additionalProperties:!1,properties:{altitude:{description:'How far off the "ground" the objects belonging to this layer should be drawn, in meters.',minimum:0,type:"number"},color:{description:"Color should be represented with a hash (#), followed by 6 hexadecimal digits. ex: #RRGGBB",pattern:"^#[0-9a-fA-F]{6}$",type:"string"},height:{description:"The height of the objects belonging to this layer, in meters.",minimum:0,type:"number"},opacity:{maximum:1,minimum:0,type:"number"},polygons:{description:"The polygons which this style applies to.",items:{anyOf:[{$ref:"#/definitions/ObstructionId"},{$ref:"#/definitions/SpaceId"}]},type:"array"},showImage:{description:"Whether or not the first image attached to the space or obstruction should be displayed on the polygon.",type:"boolean"}},required:["altitude","color","height","opacity","polygons"],type:"object"},Position:{description:"A valid WGS 84 position consisting of a longitude coodinate, followed by a latitude coordinate.",items:[{$ref:"#/definitions/Longitude"},{$ref:"#/definitions/Latitude"}],maxItems:2,minItems:2,type:"array"},Ring:{description:"A simple shape for part of a complex polygon",items:{$ref:"#/definitions/LocalPosition"},minItems:3,type:"array"},Shape:{description:"A 3D object made from extruded 2D polygons, that can be rendered to the map as a ShapeInstance.",items:{$ref:"#/definitions/ShapeComponent"},minItems:1,type:"array"},ShapeCollection:{additionalProperties:{$ref:"#/definitions/Shape"},description:"A group of Shapes, without any information as to how they will be placed in a scene.",propertyNames:{pattern:"^sh_[A-Za-z0-9_-]{8,}$"},type:"object"},ShapeComponent:{additionalProperties:!1,description:"A single extruded 2D polygon.",properties:{altitude:{description:"In metres.",type:"number"},geometry:{description:"Can contain holes, like GeoJSON.",items:{$ref:"#/definitions/Ring"},minItems:1,type:"array"},height:{description:"In metres.",exclusiveMinimum:0,type:"number"}},required:["geometry","altitude","height"],type:"object"},ShapeId:{pattern:"^sh_[A-Za-z0-9_-]{8,}$",type:"string"},ShapeInstance:{additionalProperties:!1,description:"An instance of a Shape.",properties:{altitude:{description:"The distance above ground, in metres, where this Decoration's origin point should be placed.",type:"number"},id:{$ref:"#/definitions/ShapeId",description:"The identifier of the Shape to be placed."},material:{$ref:"#/definitions/Material",description:"The color and/or texture to apply to this shape instance."},position:{$ref:"#/definitions/Position",description:"The long/lat point that the Decoration's origin point correponds to."},rotation:{$ref:"#/definitions/Vector3",description:"The rotation, in Euler angles in XYZ order, that will be applied to this Decoration."},scale:{$ref:"#/definitions/Vector3",description:"The X, Y and Z scale that will be applied to this Decoration."}},required:["altitude","id","material","position","rotation","scale"],type:"object"},ShapeInstanceCollection:{additionalProperties:{$ref:"#/definitions/ShapeInstance"},description:"A map of shape instances, where keys are valid polygon or obstruction IDs. Replaces the specified polygon.",type:"object"},SiblingGroup:{additionalProperties:!1,properties:{label:{type:"string"},siblings:{items:{$ref:"#/definitions/EnterpriseLocationId"},type:"array"}},required:["label","siblings"],type:"object"},SpaceCollection:{$ref:"#/definitions/FeatureCollection%3C(Polygon%7CLineString%7CPoint)%2CSpaceProperties%3E"},SpaceId:{pattern:"^s_[A-Za-z0-9_-]{8,}$",type:"string"},SpaceProperties:{additionalProperties:!1,properties:{center:{$ref:"#/definitions/Position",description:"The center of mass of this space, if it is a polygon. This is undefined for line string and point spaces as these can be trivially derived."},destinationNodes:{description:"A list of node IDs which can be used to navigate to this space.",items:{$ref:"#/definitions/NodeId"},type:"array"},details:{$ref:"#/definitions/Details"},externalId:{type:"string"},id:{$ref:"#/definitions/SpaceId"},kind:{type:"string"},metadata:{$ref:"#/definitions/Metadata"},tags:{description:"A list of tags that may apply to categorize the space, e.g. Void",items:{type:"string"},type:"array"}},required:["id","externalId","destinationNodes"],type:"object"},StyleCollection:{additionalProperties:{anyOf:[{$ref:"#/definitions/PolygonStyle"},{$ref:"#/definitions/LineStringStyle"},{$ref:"#/definitions/PointStyle"},{not:{}}]},description:"A map of layer styles, where keys represent the group IDs of each style.",type:"object"},TextAreaAlignment:{enum:["near","center"],type:"string"},TextAreaFeatureCollection:{$ref:"#/definitions/FeatureCollection%3CPoint%2CTextAreaProperties%3E",description:"A collection of text areas to be displayed on a map. They are either attached to a polygon or are floating in space."},TextAreaProperties:{anyOf:[{$ref:"#/definitions/AnchoredTextAreaProperties"},{$ref:"#/definitions/FloatingTextAreaProperties"}]},Texture:{additionalProperties:!1,description:"A reference to an image texture and how it should be applied to a Component.",properties:{path:{description:"The path to this asset, relative to the MVF's images folder.",minLength:1,type:"string"},repeat:{$ref:"#/definitions/TextureRepeat"}},required:["path"],type:"object"},TextureRepeat:{additionalProperties:!1,description:"How a texture should be placed on a Component.",properties:{u:{type:"number"},v:{type:"number"}},required:["u","v"],type:"object"},TilesetCollection:{additionalProperties:!1,description:"Collection of tileset styles",properties:{default:{$ref:"#/definitions/TilesetStyle",description:"Default tileset style that should be used"},others:{description:"Additional tileset styles that can be used",items:{$ref:"#/definitions/TilesetStyle"},type:"array"}},required:["default"],type:"object"},TilesetStyle:{additionalProperties:!1,description:"A tileset style definition",properties:{key:{description:"Unique identifier for this tileset style",minLength:1,type:"string"},name:{description:"Display name for this tileset style",minLength:1,type:"string"},url:{description:"URL to the tileset style definition. This should be a JSON file matching the MapLibre style specification.",format:"uri",type:"string"}},required:["key","name","url"],type:"object"},Time:{description:"A time in the format of HH:MM:SS",pattern:"^[0-2][0-9]:[0-6][0-9](:[0-6][0-9])?$",type:"string"},Vector3:{description:"A three-number tuple.",items:{type:"number"},maxItems:3,minItems:3,type:"array"},WindowCollection:{additionalProperties:!1,properties:{features:{items:{additionalProperties:!1,properties:{geometry:{$ref:"#/definitions/LineString"},properties:{$ref:"#/definitions/WindowProperties"},type:{$ref:"#/definitions/FeatureType"}},required:["type","geometry","properties"],type:"object"},type:"array"},type:{$ref:"#/definitions/FeatureCollectionType"}},required:["type","features"],type:"object"},WindowId:{pattern:"^w_[A-Za-z0-9_-]{8,}$",type:"string"},WindowProperties:{additionalProperties:!1,properties:{id:{$ref:"#/definitions/WindowId"}},required:["id"],type:"object"}}},ai=mS.default.default(new pS.default.default).compile(hi(yS)),gS=o(e=>ai(e),"validateMvf");o(e=>{var t,r;return ai(e),(r=(t=ai.errors)==null?void 0:t.map(n=>{let i=ai.schema.$ref,a=n.instancePath,s=n.message;return"".concat(i).concat(a,": ").concat(s)}))!=null?r:[]},"getMvfValidationErrors");v();v();v();v();v();v();v();v();v();v();v();v();v();v();v();v();v();var vS=o(e=>{if(e==="space"||e==="obstruction"||e==="entrance")return{}},"defaultEntry"),bS=/\.json|\.geojson$/,ni=o((e,t,r)=>{let n=e[t];if(typeof n!="object"||Object.keys(n).length===0)return vS(t);let i={};for(let[a,s]of Object.entries(n)){let l=a.replace(bS,"");i[l]=JSON.parse(r(s))}return i},"rawFolderToParsed"),IS=["floorstack.json","styles.json","shapes.json","mapstack.json","floor.geojson","tileset.json","location.json","category.json"],wS=IS,xS=["annotation","textAreas","enterprise","floorImages","shapeInstances","modelInstances","window","area","facade"],OS=xS;o(e=>{let t=new TextDecoder("utf-8"),r=t.decode.bind(t),n={"manifest.geojson":JSON.parse(r(e["manifest.geojson"])),"mapstack.geojson":JSON.parse(r(e["mapstack.geojson"])),"map.geojson":JSON.parse(r(e["map.geojson"])),"node.geojson":JSON.parse(r(e["node.geojson"])),"connection.json":JSON.parse(r(e["connection.json"])),space:ni(e,"space",r),obstruction:ni(e,"obstruction",r),entrance:ni(e,"entrance",r)};for(let i of wS)e[i]&&(n[i]=JSON.parse(r(e[i])));for(let i of OS)e[i]&&(n[i]=ni(e,i,r));return n},"rawToParsedMVF");v();v();v();v();v();v();var nt={};yn(nt,{HasPropertyKey:()=>wd,IsArray:()=>Xt,IsAsyncIterator:()=>Fs,IsBigInt:()=>Ui,IsBoolean:()=>Yn,IsDate:()=>Ro,IsFunction:()=>Ts,IsIterator:()=>js,IsNull:()=>ks,IsNumber:()=>Lr,IsObject:()=>at,IsRegExp:()=>Di,IsString:()=>ft,IsSymbol:()=>As,IsUint8Array:()=>gn,IsUndefined:()=>jt});v();function wd(e,t){return t in e}o(wd,"HasPropertyKey");function Fs(e){return at(e)&&!Xt(e)&&!gn(e)&&Symbol.asyncIterator in e}o(Fs,"IsAsyncIterator");function Xt(e){return Array.isArray(e)}o(Xt,"IsArray");function Ui(e){return typeof e=="bigint"}o(Ui,"IsBigInt");function Yn(e){return typeof e=="boolean"}o(Yn,"IsBoolean");function Ro(e){return e instanceof globalThis.Date}o(Ro,"IsDate");function Ts(e){return typeof e=="function"}o(Ts,"IsFunction");function js(e){return at(e)&&!Xt(e)&&!gn(e)&&Symbol.iterator in e}o(js,"IsIterator");function ks(e){return e===null}o(ks,"IsNull");function Lr(e){return typeof e=="number"}o(Lr,"IsNumber");function at(e){return typeof e=="object"&&e!==null}o(at,"IsObject");function Di(e){return e instanceof globalThis.RegExp}o(Di,"IsRegExp");function ft(e){return typeof e=="string"}o(ft,"IsString");function As(e){return typeof e=="symbol"}o(As,"IsSymbol");function gn(e){return e instanceof globalThis.Uint8Array}o(gn,"IsUint8Array");function jt(e){return e===void 0}o(jt,"IsUndefined");function xd(e){return e.map(t=>So(t))}o(xd,"ArrayType");function Od(e){return new Date(e.getTime())}o(Od,"DateType");function Pd(e){return new Uint8Array(e)}o(Pd,"Uint8ArrayType");function Ed(e){return new RegExp(e.source,e.flags)}o(Ed,"RegExpType");function Sd(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=So(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=So(e[r]);return t}o(Sd,"ObjectType");function So(e){return Xt(e)?xd(e):Ro(e)?Od(e):gn(e)?Pd(e):Di(e)?Ed(e):at(e)?Sd(e):e}o(So,"Visit");function Dt(e){return So(e)}o(Dt,"Clone");function Fd(e){return e.map(t=>Bi(t))}o(Fd,"CloneRest");function Bi(e,t){return Dt(t===void 0?e:oe(oe({},t),e))}o(Bi,"CloneType");v();v();v();function Ns(e){return qe(e)&&Symbol.asyncIterator in e}o(Ns,"IsAsyncIterator");function _s(e){return qe(e)&&Symbol.iterator in e}o(_s,"IsIterator");function $s(e){return qe(e)&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}o($s,"IsStandardObject");function Rs(e){return e instanceof Promise}o(Rs,"IsPromise");function qr(e){return e instanceof Date&&Number.isFinite(e.getTime())}o(qr,"IsDate");function Td(e){return e instanceof globalThis.Map}o(Td,"IsMap");function jd(e){return e instanceof globalThis.Set}o(jd,"IsSet");function zr(e){return ArrayBuffer.isView(e)}o(zr,"IsTypedArray");function qi(e){return e instanceof globalThis.Uint8Array}o(qi,"IsUint8Array");function Te(e,t){return t in e}o(Te,"HasPropertyKey");function qe(e){return e!==null&&typeof e=="object"}o(qe,"IsObject");function Ve(e){return Array.isArray(e)&&!ArrayBuffer.isView(e)}o(Ve,"IsArray");function Vt(e){return e===void 0}o(Vt,"IsUndefined");function Qn(e){return e===null}o(Qn,"IsNull");function vn(e){return typeof e=="boolean"}o(vn,"IsBoolean");function Ee(e){return typeof e=="number"}o(Ee,"IsNumber");function Cs(e){return Number.isInteger(e)}o(Cs,"IsInteger");function Jt(e){return typeof e=="bigint"}o(Jt,"IsBigInt");function Ze(e){return typeof e=="string"}o(Ze,"IsString");function Co(e){return typeof e=="function"}o(Co,"IsFunction");function Xn(e){return typeof e=="symbol"}o(Xn,"IsSymbol");function jr(e){return Jt(e)||vn(e)||Qn(e)||Ee(e)||Ze(e)||Xn(e)||Vt(e)}o(jr,"IsValueType");var ut;(function(e){e.InstanceMode="default",e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(s,l){return e.ExactOptionalPropertyTypes?l in s:s[l]!==void 0}o(t,"IsExactOptionalProperty"),e.IsExactOptionalProperty=t;function r(s){let l=qe(s);return e.AllowArrayObject?l:l&&!Ve(s)}o(r,"IsObjectLike"),e.IsObjectLike=r;function n(s){return r(s)&&!(s instanceof Date)&&!(s instanceof Uint8Array)}o(n,"IsRecordLike"),e.IsRecordLike=n;function i(s){return e.AllowNaN?Ee(s):Number.isFinite(s)}o(i,"IsNumberLike"),e.IsNumberLike=i;function a(s){let l=Vt(s);return e.AllowNullVoid?l||s===null:l}o(a,"IsVoidLike"),e.IsVoidLike=a})(ut||(ut={}));v();function kd(e){return globalThis.Object.freeze(e).map(t=>Fo(t))}o(kd,"ImmutableArray");function Ad(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=Fo(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=Fo(e[r]);return globalThis.Object.freeze(t)}o(Ad,"ImmutableObject");function Fo(e){return Xt(e)?kd(e):Ro(e)||gn(e)||Di(e)?e:at(e)?Ad(e):e}o(Fo,"Immutable");function Ie(e,t){let r=t!==void 0?oe(oe({},t),e):e;switch(ut.InstanceMode){case"freeze":return Fo(r);case"clone":return Dt(r);default:return r}}o(Ie,"CreateType");v();var Nd=class extends Error{constructor(t){super(t)}};o(Nd,"TypeBoxError");var Xe=Nd;v();v();v();var Lt=Symbol.for("TypeBox.Transform"),Mo=Symbol.for("TypeBox.Readonly"),en=Symbol.for("TypeBox.Optional"),Bn=Symbol.for("TypeBox.Hint"),fe=Symbol.for("TypeBox.Kind");function _d(e){return at(e)&&e[Mo]==="Readonly"}o(_d,"IsReadonly");function bn(e){return at(e)&&e[en]==="Optional"}o(bn,"IsOptional");function Ms(e){return Ue(e,"Any")}o(Ms,"IsAny");function eo(e){return Ue(e,"Array")}o(eo,"IsArray");function zi(e){return Ue(e,"AsyncIterator")}o(zi,"IsAsyncIterator");function Ls(e){return Ue(e,"BigInt")}o(Ls,"IsBigInt");function Us(e){return Ue(e,"Boolean")}o(Us,"IsBoolean");function Vi(e){return Ue(e,"Constructor")}o(Vi,"IsConstructor");function $d(e){return Ue(e,"Date")}o($d,"IsDate");function Ki(e){return Ue(e,"Function")}o(Ki,"IsFunction");function Lo(e){return Ue(e,"Integer")}o(Lo,"IsInteger");function or(e){return Ue(e,"Intersect")}o(or,"IsIntersect");function Gi(e){return Ue(e,"Iterator")}o(Gi,"IsIterator");function Ue(e,t){return at(e)&&fe in e&&e[fe]===t}o(Ue,"IsKindOf");function to(e){return Ue(e,"Literal")}o(to,"IsLiteral");function tn(e){return Ue(e,"MappedKey")}o(tn,"IsMappedKey");function Kt(e){return Ue(e,"MappedResult")}o(Kt,"IsMappedResult");function ro(e){return Ue(e,"Never")}o(ro,"IsNever");function Rd(e){return Ue(e,"Not")}o(Rd,"IsNot");function Cd(e){return Ue(e,"Null")}o(Cd,"IsNull");function Uo(e){return Ue(e,"Number")}o(Uo,"IsNumber");function yr(e){return Ue(e,"Object")}o(yr,"IsObject");function Do(e){return Ue(e,"Promise")}o(Do,"IsPromise");function Ds(e){return Ue(e,"Record")}o(Ds,"IsRecord");function Bs(e){return Ue(e,"Ref")}o(Bs,"IsRef");function qs(e){return Ue(e,"RegExp")}o(qs,"IsRegExp");function Hi(e){return Ue(e,"String")}o(Hi,"IsString");function Md(e){return Ue(e,"Symbol")}o(Md,"IsSymbol");function rn(e){return Ue(e,"TemplateLiteral")}o(rn,"IsTemplateLiteral");function Ld(e){return Ue(e,"This")}o(Ld,"IsThis");function Wi(e){return at(e)&&Lt in e}o(Wi,"IsTransform");function In(e){return Ue(e,"Tuple")}o(In,"IsTuple");function Ud(e){return Ue(e,"Undefined")}o(Ud,"IsUndefined");function Pt(e){return Ue(e,"Union")}o(Pt,"IsUnion");function Dd(e){return Ue(e,"Uint8Array")}o(Dd,"IsUint8Array");function Bd(e){return Ue(e,"Unknown")}o(Bd,"IsUnknown");function qd(e){return Ue(e,"Unsafe")}o(qd,"IsUnsafe");function zd(e){return Ue(e,"Void")}o(zd,"IsVoid");function wn(e){return at(e)&&fe in e&&ft(e[fe])}o(wn,"IsKind");function dn(e){return Ms(e)||eo(e)||Us(e)||Ls(e)||zi(e)||Vi(e)||$d(e)||Ki(e)||Lo(e)||or(e)||Gi(e)||to(e)||tn(e)||Kt(e)||ro(e)||Rd(e)||Cd(e)||Uo(e)||yr(e)||Do(e)||Ds(e)||Bs(e)||qs(e)||Hi(e)||Md(e)||rn(e)||Ld(e)||In(e)||Ud(e)||Pt(e)||Dd(e)||Bd(e)||qd(e)||zd(e)||wn(e)}o(dn,"IsSchema");var U={};yn(U,{IsAny:()=>Gs,IsArray:()=>Hs,IsAsyncIterator:()=>Ws,IsBigInt:()=>Js,IsBoolean:()=>Zs,IsConstructor:()=>Ys,IsDate:()=>Qs,IsFunction:()=>Xs,IsInteger:()=>el,IsIntersect:()=>tl,IsIterator:()=>rl,IsKind:()=>Sl,IsKindOf:()=>Ce,IsLiteral:()=>no,IsLiteralBoolean:()=>Jd,IsLiteralNumber:()=>ol,IsLiteralString:()=>nl,IsLiteralValue:()=>il,IsMappedKey:()=>al,IsMappedResult:()=>sl,IsNever:()=>ll,IsNot:()=>cl,IsNull:()=>ul,IsNumber:()=>dl,IsObject:()=>fl,IsOptional:()=>Wd,IsPromise:()=>pl,IsProperties:()=>Yi,IsReadonly:()=>Hd,IsRecord:()=>ml,IsRecursive:()=>Zd,IsRef:()=>hl,IsRegExp:()=>yl,IsSchema:()=>Ke,IsString:()=>gl,IsSymbol:()=>vl,IsTemplateLiteral:()=>bl,IsThis:()=>Il,IsTransform:()=>st,IsTuple:()=>wl,IsUint8Array:()=>xl,IsUndefined:()=>Bo,IsUnion:()=>Qi,IsUnionLiteral:()=>Yd,IsUnknown:()=>Ol,IsUnsafe:()=>Pl,IsVoid:()=>El,TypeGuardUnknownTypeError:()=>PS});v();var Vd=class extends Xe{};o(Vd,"TypeGuardUnknownTypeError");var PS=Vd,ES=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function zs(e){try{return new RegExp(e),!0}catch{return!1}}o(zs,"IsPattern");function Ji(e){if(!ft(e))return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}o(Ji,"IsControlCharacterFree");function Vs(e){return Zi(e)||Ke(e)}o(Vs,"IsAdditionalProperties");function Nn(e){return jt(e)||Ui(e)}o(Nn,"IsOptionalBigInt");function Je(e){return jt(e)||Lr(e)}o(Je,"IsOptionalNumber");function Zi(e){return jt(e)||Yn(e)}o(Zi,"IsOptionalBoolean");function He(e){return jt(e)||ft(e)}o(He,"IsOptionalString");function Kd(e){return jt(e)||ft(e)&&Ji(e)&&zs(e)}o(Kd,"IsOptionalPattern");function Gd(e){return jt(e)||ft(e)&&Ji(e)}o(Gd,"IsOptionalFormat");function Ks(e){return jt(e)||Ke(e)}o(Ks,"IsOptionalSchema");function Hd(e){return at(e)&&e[Mo]==="Readonly"}o(Hd,"IsReadonly");function Wd(e){return at(e)&&e[en]==="Optional"}o(Wd,"IsOptional");function Gs(e){return Ce(e,"Any")&&He(e.$id)}o(Gs,"IsAny");function Hs(e){return Ce(e,"Array")&&e.type==="array"&&He(e.$id)&&Ke(e.items)&&Je(e.minItems)&&Je(e.maxItems)&&Zi(e.uniqueItems)&&Ks(e.contains)&&Je(e.minContains)&&Je(e.maxContains)}o(Hs,"IsArray");function Ws(e){return Ce(e,"AsyncIterator")&&e.type==="AsyncIterator"&&He(e.$id)&&Ke(e.items)}o(Ws,"IsAsyncIterator");function Js(e){return Ce(e,"BigInt")&&e.type==="bigint"&&He(e.$id)&&Nn(e.exclusiveMaximum)&&Nn(e.exclusiveMinimum)&&Nn(e.maximum)&&Nn(e.minimum)&&Nn(e.multipleOf)}o(Js,"IsBigInt");function Zs(e){return Ce(e,"Boolean")&&e.type==="boolean"&&He(e.$id)}o(Zs,"IsBoolean");function Ys(e){return Ce(e,"Constructor")&&e.type==="Constructor"&&He(e.$id)&&Xt(e.parameters)&&e.parameters.every(t=>Ke(t))&&Ke(e.returns)}o(Ys,"IsConstructor");function Qs(e){return Ce(e,"Date")&&e.type==="Date"&&He(e.$id)&&Je(e.exclusiveMaximumTimestamp)&&Je(e.exclusiveMinimumTimestamp)&&Je(e.maximumTimestamp)&&Je(e.minimumTimestamp)&&Je(e.multipleOfTimestamp)}o(Qs,"IsDate");function Xs(e){return Ce(e,"Function")&&e.type==="Function"&&He(e.$id)&&Xt(e.parameters)&&e.parameters.every(t=>Ke(t))&&Ke(e.returns)}o(Xs,"IsFunction");function el(e){return Ce(e,"Integer")&&e.type==="integer"&&He(e.$id)&&Je(e.exclusiveMaximum)&&Je(e.exclusiveMinimum)&&Je(e.maximum)&&Je(e.minimum)&&Je(e.multipleOf)}o(el,"IsInteger");function Yi(e){return at(e)&&Object.entries(e).every(([t,r])=>Ji(t)&&Ke(r))}o(Yi,"IsProperties");function tl(e){return Ce(e,"Intersect")&&!(ft(e.type)&&e.type!=="object")&&Xt(e.allOf)&&e.allOf.every(t=>Ke(t)&&!st(t))&&He(e.type)&&(Zi(e.unevaluatedProperties)||Ks(e.unevaluatedProperties))&&He(e.$id)}o(tl,"IsIntersect");function rl(e){return Ce(e,"Iterator")&&e.type==="Iterator"&&He(e.$id)&&Ke(e.items)}o(rl,"IsIterator");function Ce(e,t){return at(e)&&fe in e&&e[fe]===t}o(Ce,"IsKindOf");function nl(e){return no(e)&&ft(e.const)}o(nl,"IsLiteralString");function ol(e){return no(e)&&Lr(e.const)}o(ol,"IsLiteralNumber");function Jd(e){return no(e)&&Yn(e.const)}o(Jd,"IsLiteralBoolean");function no(e){return Ce(e,"Literal")&&He(e.$id)&&il(e.const)}o(no,"IsLiteral");function il(e){return Yn(e)||Lr(e)||ft(e)}o(il,"IsLiteralValue");function al(e){return Ce(e,"MappedKey")&&Xt(e.keys)&&e.keys.every(t=>Lr(t)||ft(t))}o(al,"IsMappedKey");function sl(e){return Ce(e,"MappedResult")&&Yi(e.properties)}o(sl,"IsMappedResult");function ll(e){return Ce(e,"Never")&&at(e.not)&&Object.getOwnPropertyNames(e.not).length===0}o(ll,"IsNever");function cl(e){return Ce(e,"Not")&&Ke(e.not)}o(cl,"IsNot");function ul(e){return Ce(e,"Null")&&e.type==="null"&&He(e.$id)}o(ul,"IsNull");function dl(e){return Ce(e,"Number")&&e.type==="number"&&He(e.$id)&&Je(e.exclusiveMaximum)&&Je(e.exclusiveMinimum)&&Je(e.maximum)&&Je(e.minimum)&&Je(e.multipleOf)}o(dl,"IsNumber");function fl(e){return Ce(e,"Object")&&e.type==="object"&&He(e.$id)&&Yi(e.properties)&&Vs(e.additionalProperties)&&Je(e.minProperties)&&Je(e.maxProperties)}o(fl,"IsObject");function pl(e){return Ce(e,"Promise")&&e.type==="Promise"&&He(e.$id)&&Ke(e.item)}o(pl,"IsPromise");function ml(e){return Ce(e,"Record")&&e.type==="object"&&He(e.$id)&&Vs(e.additionalProperties)&&at(e.patternProperties)&&(t=>{let r=Object.getOwnPropertyNames(t.patternProperties);return r.length===1&&zs(r[0])&&at(t.patternProperties)&&Ke(t.patternProperties[r[0]])})(e)}o(ml,"IsRecord");function Zd(e){return at(e)&&Bn in e&&e[Bn]==="Recursive"}o(Zd,"IsRecursive");function hl(e){return Ce(e,"Ref")&&He(e.$id)&&ft(e.$ref)}o(hl,"IsRef");function yl(e){return Ce(e,"RegExp")&&He(e.$id)&&ft(e.source)&&ft(e.flags)&&Je(e.maxLength)&&Je(e.minLength)}o(yl,"IsRegExp");function gl(e){return Ce(e,"String")&&e.type==="string"&&He(e.$id)&&Je(e.minLength)&&Je(e.maxLength)&&Kd(e.pattern)&&Gd(e.format)}o(gl,"IsString");function vl(e){return Ce(e,"Symbol")&&e.type==="symbol"&&He(e.$id)}o(vl,"IsSymbol");function bl(e){return Ce(e,"TemplateLiteral")&&e.type==="string"&&ft(e.pattern)&&e.pattern[0]==="^"&&e.pattern[e.pattern.length-1]==="$"}o(bl,"IsTemplateLiteral");function Il(e){return Ce(e,"This")&&He(e.$id)&&ft(e.$ref)}o(Il,"IsThis");function st(e){return at(e)&&Lt in e}o(st,"IsTransform");function wl(e){return Ce(e,"Tuple")&&e.type==="array"&&He(e.$id)&&Lr(e.minItems)&&Lr(e.maxItems)&&e.minItems===e.maxItems&&(jt(e.items)&&jt(e.additionalItems)&&e.minItems===0||Xt(e.items)&&e.items.every(t=>Ke(t)))}o(wl,"IsTuple");function Bo(e){return Ce(e,"Undefined")&&e.type==="undefined"&&He(e.$id)}o(Bo,"IsUndefined");function Yd(e){return Qi(e)&&e.anyOf.every(t=>nl(t)||ol(t))}o(Yd,"IsUnionLiteral");function Qi(e){return Ce(e,"Union")&&He(e.$id)&&at(e)&&Xt(e.anyOf)&&e.anyOf.every(t=>Ke(t))}o(Qi,"IsUnion");function xl(e){return Ce(e,"Uint8Array")&&e.type==="Uint8Array"&&He(e.$id)&&Je(e.minByteLength)&&Je(e.maxByteLength)}o(xl,"IsUint8Array");function Ol(e){return Ce(e,"Unknown")&&He(e.$id)}o(Ol,"IsUnknown");function Pl(e){return Ce(e,"Unsafe")}o(Pl,"IsUnsafe");function El(e){return Ce(e,"Void")&&e.type==="void"&&He(e.$id)}o(El,"IsVoid");function Sl(e){return at(e)&&fe in e&&ft(e[fe])&&!ES.includes(e[fe])}o(Sl,"IsKind");function Ke(e){return at(e)&&(Gs(e)||Hs(e)||Zs(e)||Js(e)||Ws(e)||Ys(e)||Qs(e)||Xs(e)||el(e)||tl(e)||rl(e)||no(e)||al(e)||sl(e)||ll(e)||cl(e)||ul(e)||dl(e)||fl(e)||pl(e)||ml(e)||hl(e)||yl(e)||gl(e)||vl(e)||bl(e)||Il(e)||wl(e)||Bo(e)||Qi(e)||xl(e)||Ol(e)||Pl(e)||El(e)||Sl(e))}o(Ke,"IsSchema");v();var SS="(true|false)",si="(0|[1-9][0-9]*)",Qd="(.*)",FS="(?!.*)",qn="^".concat(si,"$"),zn="^".concat(Qd,"$"),TS="^".concat(FS,"$");v();var Ur={};yn(Ur,{Clear:()=>ef,Delete:()=>tf,Entries:()=>Xd,Get:()=>of,Has:()=>rf,Set:()=>nf});v();var oo=new Map;function Xd(){return new Map(oo)}o(Xd,"Entries");function ef(){return oo.clear()}o(ef,"Clear");function tf(e){return oo.delete(e)}o(tf,"Delete");function rf(e){return oo.has(e)}o(rf,"Has");function nf(e,t){oo.set(e,t)}o(nf,"Set");function of(e){return oo.get(e)}o(of,"Get");var rr={};yn(rr,{Clear:()=>sf,Delete:()=>lf,Entries:()=>af,Get:()=>df,Has:()=>cf,Set:()=>uf});v();var io=new Map;function af(){return new Map(io)}o(af,"Entries");function sf(){return io.clear()}o(sf,"Clear");function lf(e){return io.delete(e)}o(lf,"Delete");function cf(e){return io.has(e)}o(cf,"Has");function uf(e,t){io.set(e,t)}o(uf,"Set");function df(e){return io.get(e)}o(df,"Get");v();function ff(e,t){return e.includes(t)}o(ff,"SetIncludes");function pf(e){return[...new Set(e)]}o(pf,"SetDistinct");function mf(e,t){return e.filter(r=>t.includes(r))}o(mf,"SetIntersect");function hf(e,t){return e.reduce((r,n)=>mf(r,n),t)}o(hf,"SetIntersectManyResolve");function yf(e){return e.length===1?e[0]:e.length>1?hf(e.slice(1),e[0]):[]}o(yf,"SetIntersectMany");function gf(e){let t=[];for(let r of e)t.push(...r);return t}o(gf,"SetUnionMany");v();function Vn(e){return Ie({[fe]:"Any"},e)}o(Vn,"Any");v();function Fl(e,t){return Ie({[fe]:"Array",type:"array",items:e},t)}o(Fl,"Array");v();function Tl(e,t){return Ie({[fe]:"AsyncIterator",type:"AsyncIterator",items:e},t)}o(Tl,"AsyncIterator");v();v();v();function vf(e,t){let r=e,{[t]:n}=r;return xs(r,[Nu(t)])}o(vf,"DiscardKey");function Zt(e,t){return t.reduce((r,n)=>vf(r,n),e)}o(Zt,"Discard");v();function At(e){return Ie({[fe]:"Never",not:{}},e)}o(At,"Never");v();v();function Et(e){return Ie({[fe]:"MappedResult",properties:e})}o(Et,"MappedResult");v();v();function jl(e,t,r){return Ie({[fe]:"Constructor",type:"Constructor",parameters:e,returns:t},r)}o(jl,"Constructor");v();function qo(e,t,r){return Ie({[fe]:"Function",type:"Function",parameters:e,returns:t},r)}o(qo,"Function");v();v();v();v();function yi(e,t){return Ie({[fe]:"Union",anyOf:e},t)}o(yi,"UnionCreate");function bf(e){return e.some(t=>bn(t))}o(bf,"IsUnionOptional");function Na(e){return e.map(t=>bn(t)?If(t):t)}o(Na,"RemoveOptionalFromRest");function If(e){return Zt(e,[en])}o(If,"RemoveOptionalFromType");function wf(e,t){return bf(e)?on(yi(Na(e),t)):yi(Na(e),t)}o(wf,"ResolveUnion");function xn(e,t){return e.length===0?At(t):e.length===1?Ie(e[0],t):wf(e,t)}o(xn,"UnionEvaluated");v();function _t(e,t){return e.length===0?At(t):e.length===1?Ie(e[0],t):yi(e,t)}o(_t,"Union");v();v();v();var xf=class extends Xe{};o(xf,"TemplateLiteralParserError");var du=xf;function Of(e){return e.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}o(Of,"Unescape");function Xi(e,t,r){return e[t]===r&&e.charCodeAt(t-1)!==92}o(Xi,"IsNonEscaped");function Tr(e,t){return Xi(e,t,"(")}o(Tr,"IsOpenParen");function Kn(e,t){return Xi(e,t,")")}o(Kn,"IsCloseParen");function kl(e,t){return Xi(e,t,"|")}o(kl,"IsSeparator");function Pf(e){if(!(Tr(e,0)&&Kn(e,e.length-1)))return!1;let t=0;for(let r=0;r<e.length;r++)if(Tr(e,r)&&(t+=1),Kn(e,r)&&(t-=1),t===0&&r!==e.length-1)return!1;return!0}o(Pf,"IsGroup");function Ef(e){return e.slice(1,e.length-1)}o(Ef,"InGroup");function Sf(e){let t=0;for(let r=0;r<e.length;r++)if(Tr(e,r)&&(t+=1),Kn(e,r)&&(t-=1),kl(e,r)&&t===0)return!0;return!1}o(Sf,"IsPrecedenceOr");function Ff(e){for(let t=0;t<e.length;t++)if(Tr(e,t))return!0;return!1}o(Ff,"IsPrecedenceAnd");function Tf(e){let[t,r]=[0,0],n=[];for(let a=0;a<e.length;a++)if(Tr(e,a)&&(t+=1),Kn(e,a)&&(t-=1),kl(e,a)&&t===0){let s=e.slice(r,a);s.length>0&&n.push(fn(s)),r=a+1}let i=e.slice(r);return i.length>0&&n.push(fn(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}o(Tf,"Or");function jf(e){function t(i,a){if(!Tr(i,a))throw new du("TemplateLiteralParser: Index must point to open parens");let s=0;for(let l=a;l<i.length;l++)if(Tr(i,l)&&(s+=1),Kn(i,l)&&(s-=1),s===0)return[a,l];throw new du("TemplateLiteralParser: Unclosed group parens in expression")}o(t,"Group");function r(i,a){for(let s=a;s<i.length;s++)if(Tr(i,s))return[a,s];return[a,i.length]}o(r,"Range");let n=[];for(let i=0;i<e.length;i++)if(Tr(e,i)){let[a,s]=t(e,i),l=e.slice(a,s+1);n.push(fn(l)),i=s}else{let[a,s]=r(e,i),l=e.slice(a,s);l.length>0&&n.push(fn(l)),i=s-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}o(jf,"And");function fn(e){return Pf(e)?fn(Ef(e)):Sf(e)?Tf(e):Ff(e)?jf(e):{type:"const",const:Of(e)}}o(fn,"TemplateLiteralParse");function ea(e){return fn(e.slice(1,e.length-1))}o(ea,"TemplateLiteralParseExact");var kf=class extends Xe{};o(kf,"TemplateLiteralFiniteError");var jS=kf;function Af(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="0"&&e.expr[1].type==="const"&&e.expr[1].const==="[1-9][0-9]*"}o(Af,"IsNumberExpression");function Nf(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="true"&&e.expr[1].type==="const"&&e.expr[1].const==="false"}o(Nf,"IsBooleanExpression");function _f(e){return e.type==="const"&&e.const===".*"}o(_f,"IsStringExpression");function Gn(e){return Af(e)||_f(e)?!1:Nf(e)?!0:e.type==="and"?e.expr.every(t=>Gn(t)):e.type==="or"?e.expr.every(t=>Gn(t)):e.type==="const"?!0:(()=>{throw new jS("Unknown expression type")})()}o(Gn,"IsTemplateLiteralExpressionFinite");function Al(e){let t=ea(e.pattern);return Gn(t)}o(Al,"IsTemplateLiteralFinite");v();var $f=class extends Xe{};o($f,"TemplateLiteralGenerateError");var kS=$f;function*Nl(e){if(e.length===1)return yield*ce(e[0]);for(let t of e[0])for(let r of Nl(e.slice(1)))yield"".concat(t).concat(r)}o(Nl,"GenerateReduce");function*Rf(e){return yield*ce(Nl(e.expr.map(t=>[...zo(t)])))}o(Rf,"GenerateAnd");function*Cf(e){for(let t of e.expr)yield*ce(zo(t))}o(Cf,"GenerateOr");function*Mf(e){return yield e.const}o(Mf,"GenerateConst");function*zo(e){return e.type==="and"?yield*ce(Rf(e)):e.type==="or"?yield*ce(Cf(e)):e.type==="const"?yield*ce(Mf(e)):(()=>{throw new kS("Unknown expression")})()}o(zo,"TemplateLiteralExpressionGenerate");function ta(e){let t=ea(e.pattern);return Gn(t)?[...zo(t)]:[]}o(ta,"TemplateLiteralGenerate");v();v();function dt(e,t){return Ie({[fe]:"Literal",const:e,type:typeof e},t)}o(dt,"Literal");v();function _l(e){return Ie({[fe]:"Boolean",type:"boolean"},e)}o(_l,"Boolean");v();function ra(e){return Ie({[fe]:"BigInt",type:"bigint"},e)}o(ra,"BigInt");v();function On(e){return Ie({[fe]:"Number",type:"number"},e)}o(On,"Number");v();function Dr(e){return Ie({[fe]:"String",type:"string"},e)}o(Dr,"String");function*Lf(e){let t=e.trim().replace(/"|'/g,"");return t==="boolean"?yield _l():t==="number"?yield On():t==="bigint"?yield ra():t==="string"?yield Dr():yield(()=>{let r=t.split("|").map(n=>dt(n.trim()));return r.length===0?At():r.length===1?r[0]:xn(r)})()}o(Lf,"FromUnion");function*Uf(e){if(e[1]!=="{"){let t=dt("$"),r=gi(e.slice(1));return yield*ce([t,...r])}for(let t=2;t<e.length;t++)if(e[t]==="}"){let r=Lf(e.slice(2,t)),n=gi(e.slice(t+1));return yield*ce([...r,...n])}yield dt(e)}o(Uf,"FromTerminal");function*gi(e){for(let t=0;t<e.length;t++)if(e[t]==="$"){let r=dt(e.slice(0,t)),n=Uf(e.slice(t));return yield*ce([r,...n])}yield dt(e)}o(gi,"FromSyntax");function Df(e){return[...gi(e)]}o(Df,"TemplateLiteralSyntax");v();var Bf=class extends Xe{};o(Bf,"TemplateLiteralPatternError");var AS=Bf;function qf(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}o(qf,"Escape");function $l(e,t){return rn(e)?e.pattern.slice(1,e.pattern.length-1):Pt(e)?"(".concat(e.anyOf.map(r=>$l(r,t)).join("|"),")"):Uo(e)||Lo(e)||Ls(e)?"".concat(t).concat(si):Hi(e)?"".concat(t).concat(Qd):to(e)?"".concat(t).concat(qf(e.const.toString())):Us(e)?"".concat(t).concat(SS):(()=>{throw new AS("Unexpected Kind '".concat(e[fe],"'"))})()}o($l,"Visit");function _a(e){return"^".concat(e.map(t=>$l(t,"")).join(""),"$")}o(_a,"TemplateLiteralPattern");v();function To(e){let t=ta(e).map(r=>dt(r));return xn(t)}o(To,"TemplateLiteralToUnion");v();function Rl(e,t){let r=ft(e)?_a(Df(e)):_a(e);return Ie({[fe]:"TemplateLiteral",type:"string",pattern:r},t)}o(Rl,"TemplateLiteral");function zf(e){return ta(e).map(t=>t.toString())}o(zf,"FromTemplateLiteral");function Vf(e){let t=[];for(let r of e)t.push(...Vr(r));return t}o(Vf,"FromUnion");function Kf(e){return[e.toString()]}o(Kf,"FromLiteral");function Vr(e){return[...new Set(rn(e)?zf(e):Pt(e)?Vf(e.anyOf):to(e)?Kf(e.const):Uo(e)?["[number]"]:Lo(e)?["[number]"]:[])]}o(Vr,"IndexPropertyKeys");v();function Gf(e,t,r){let n={};for(let i of Object.getOwnPropertyNames(t))n[i]=oa(e,Vr(t[i]),r);return n}o(Gf,"FromProperties");function Hf(e,t,r){return Gf(e,t.properties,r)}o(Hf,"FromMappedResult");function Wf(e,t,r){let n=Hf(e,t,r);return Et(n)}o(Wf,"IndexFromMappedResult");function Cl(e,t){return e.map(r=>Ml(r,t))}o(Cl,"FromRest");function Jf(e){return e.filter(t=>!ro(t))}o(Jf,"FromIntersectRest");function Zf(e,t){return Bl(Jf(Cl(e,t)))}o(Zf,"FromIntersect");function Yf(e){return e.some(t=>ro(t))?[]:e}o(Yf,"FromUnionRest");function Qf(e,t){return xn(Yf(Cl(e,t)))}o(Qf,"FromUnion");function Xf(e,t){return t in e?e[t]:t==="[number]"?xn(e):At()}o(Xf,"FromTuple");function ep(e,t){return t==="[number]"?e:At()}o(ep,"FromArray");function tp(e,t){return t in e?e[t]:At()}o(tp,"FromProperty");function Ml(e,t){var r;return or(e)?Zf(e.allOf,t):Pt(e)?Qf(e.anyOf,t):In(e)?Xf((r=e.items)!=null?r:[],t):eo(e)?ep(e.items,t):yr(e)?tp(e.properties,t):At()}o(Ml,"IndexFromPropertyKey");function na(e,t){return t.map(r=>Ml(e,r))}o(na,"IndexFromPropertyKeys");function $a(e,t){return xn(na(e,t))}o($a,"FromSchema");function oa(e,t,r){return Kt(t)?Wf(e,t,r):tn(t)?ip(e,t,r):Ie(dn(t)?$a(e,Vr(t)):$a(e,t),r)}o(oa,"Index");function rp(e,t,r){return{[t]:oa(e,[t],Dt(r))}}o(rp,"MappedIndexPropertyKey");function np(e,t,r){return t.reduce((n,i)=>oe(oe({},n),rp(e,i,r)),{})}o(np,"MappedIndexPropertyKeys");function op(e,t,r){return np(e,t.keys,r)}o(op,"MappedIndexProperties");function ip(e,t,r){let n=op(e,t,r);return Et(n)}o(ip,"IndexFromMappedKey");v();function Ll(e,t){return Ie({[fe]:"Iterator",type:"Iterator",items:e},t)}o(Ll,"Iterator");v();function ap(e){let t=[];for(let r in e)bn(e[r])||t.push(r);return t}o(ap,"RequiredKeys");function sp(e,t){let r=ap(e),n=r.length>0?{[fe]:"Object",type:"object",properties:e,required:r}:{[fe]:"Object",type:"object",properties:e};return Ie(n,t)}o(sp,"_Object");var wt=sp;v();function Ul(e,t){return Ie({[fe]:"Promise",type:"Promise",item:e},t)}o(Ul,"Promise");v();v();function lp(e){return Ie(Zt(e,[Mo]))}o(lp,"RemoveReadonly");function cp(e){return Ie(Me(oe({},e),{[Mo]:"Readonly"}))}o(cp,"AddReadonly");function up(e,t){return t===!1?lp(e):cp(e)}o(up,"ReadonlyWithFlag");function nn(e,t){let r=t??!0;return Kt(e)?pp(e,r):up(e,r)}o(nn,"Readonly");function dp(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=nn(e[n],t);return r}o(dp,"FromProperties");function fp(e,t){return dp(e.properties,t)}o(fp,"FromMappedResult");function pp(e,t){let r=fp(e,t);return Et(r)}o(pp,"ReadonlyFromMappedResult");v();function ao(e,t){return Ie(e.length>0?{[fe]:"Tuple",type:"array",items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[fe]:"Tuple",type:"array",minItems:e.length,maxItems:e.length},t)}o(ao,"Tuple");function Dl(e,t){return e in t?Wt(e,t[e]):Et(t)}o(Dl,"FromMappedResult");function mp(e){return{[e]:dt(e)}}o(mp,"MappedKeyToKnownMappedResultProperties");function hp(e){let t={};for(let r of e)t[r]=dt(r);return t}o(hp,"MappedKeyToUnknownMappedResultProperties");function yp(e,t){return ff(t,e)?mp(e):hp(t)}o(yp,"MappedKeyToMappedResultProperties");function gp(e,t){let r=yp(e,t);return Dl(e,r)}o(gp,"FromMappedKey");function _n(e,t){return t.map(r=>Wt(e,r))}o(_n,"FromRest");function vp(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Wt(e,t[n]);return r}o(vp,"FromProperties");function Wt(e,t){var r;let n=oe({},t);return bn(t)?on(Wt(e,Zt(t,[en]))):_d(t)?nn(Wt(e,Zt(t,[Mo]))):Kt(t)?Dl(e,t.properties):tn(t)?gp(e,t.keys):Vi(t)?jl(_n(e,t.parameters),Wt(e,t.returns),n):Ki(t)?qo(_n(e,t.parameters),Wt(e,t.returns),n):zi(t)?Tl(Wt(e,t.items),n):Gi(t)?Ll(Wt(e,t.items),n):or(t)?an(_n(e,t.allOf),n):Pt(t)?_t(_n(e,t.anyOf),n):In(t)?ao(_n(e,(r=t.items)!=null?r:[]),n):yr(t)?wt(vp(e,t.properties),n):eo(t)?Fl(Wt(e,t.items),n):Do(t)?Ul(Wt(e,t.item),n):t}o(Wt,"FromSchemaType");function bp(e,t){let r={};for(let n of e)r[n]=Wt(n,t);return r}o(bp,"MappedFunctionReturnType");function Ip(e,t,r){let n=dn(e)?Vr(e):e,i=t({[fe]:"MappedKey",keys:n}),a=bp(n,i);return wt(a,r)}o(Ip,"Mapped");v();function wp(e){return Ie(Zt(e,[en]))}o(wp,"RemoveOptional");function xp(e){return Ie(Me(oe({},e),{[en]:"Optional"}))}o(xp,"AddOptional");function Op(e,t){return t===!1?wp(e):xp(e)}o(Op,"OptionalWithFlag");function on(e,t){let r=t??!0;return Kt(e)?Sp(e,r):Op(e,r)}o(on,"Optional");function Pp(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=on(e[n],t);return r}o(Pp,"FromProperties");function Ep(e,t){return Pp(e.properties,t)}o(Ep,"FromMappedResult");function Sp(e,t){let r=Ep(e,t);return Et(r)}o(Sp,"OptionalFromMappedResult");v();function vi(e,t={}){let r=e.every(i=>yr(i)),n=dn(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return Ie(t.unevaluatedProperties===!1||dn(t.unevaluatedProperties)||r?Me(oe({},n),{[fe]:"Intersect",type:"object",allOf:e}):Me(oe({},n),{[fe]:"Intersect",allOf:e}),t)}o(vi,"IntersectCreate");function Fp(e){return e.every(t=>bn(t))}o(Fp,"IsIntersectOptional");function Tp(e){return Zt(e,[en])}o(Tp,"RemoveOptionalFromType");function Ra(e){return e.map(t=>bn(t)?Tp(t):t)}o(Ra,"RemoveOptionalFromRest");function jp(e,t){return Fp(e)?on(vi(Ra(e),t)):vi(Ra(e),t)}o(jp,"ResolveIntersect");function Bl(e,t={}){if(e.length===0)return At(t);if(e.length===1)return Ie(e[0],t);if(e.some(r=>Wi(r)))throw new Error("Cannot intersect transform types");return jp(e,t)}o(Bl,"IntersectEvaluated");v();function an(e,t){if(e.length===0)return At(t);if(e.length===1)return Ie(e[0],t);if(e.some(r=>Wi(r)))throw new Error("Cannot intersect transform types");return vi(e,t)}o(an,"Intersect");function ql(e){return e.map(t=>ia(t))}o(ql,"FromRest");function kp(e){return an(ql(e))}o(kp,"FromIntersect");function Ap(e){return _t(ql(e))}o(Ap,"FromUnion");function Np(e){return ia(e)}o(Np,"FromPromise");function ia(e){return or(e)?kp(e.allOf):Pt(e)?Ap(e.anyOf):Do(e)?Np(e.item):e}o(ia,"AwaitedResolve");function _p(e,t){return Ie(ia(e),t)}o(_p,"Awaited");v();v();v();v();function zl(e){let t=[];for(let r of e)t.push(gr(r));return t}o(zl,"FromRest");function $p(e){let t=zl(e);return gf(t)}o($p,"FromIntersect");function Rp(e){let t=zl(e);return yf(t)}o(Rp,"FromUnion");function Cp(e){return e.map((t,r)=>r.toString())}o(Cp,"FromTuple");function Mp(e){return["[number]"]}o(Mp,"FromArray");function Lp(e){return globalThis.Object.getOwnPropertyNames(e)}o(Lp,"FromProperties");function Up(e){return Ca?globalThis.Object.getOwnPropertyNames(e).map(t=>t[0]==="^"&&t[t.length-1]==="$"?t.slice(1,t.length-1):t):[]}o(Up,"FromPatternProperties");function gr(e){var t;return or(e)?$p(e.allOf):Pt(e)?Rp(e.anyOf):In(e)?Cp((t=e.items)!=null?t:[]):eo(e)?Mp(e.items):yr(e)?Lp(e.properties):Ds(e)?Up(e.patternProperties):[]}o(gr,"KeyOfPropertyKeys");var Ca=!1;function pn(e){Ca=!0;let t=gr(e);Ca=!1;let r=t.map(n=>"(".concat(n,")"));return"^(".concat(r.join("|"),")$")}o(pn,"KeyOfPattern");function Dp(e){return e.map(t=>t==="[number]"?On():dt(t))}o(Dp,"KeyOfPropertyKeysToRest");function Vl(e,t){if(Kt(e))return zp(e,t);{let r=gr(e),n=Dp(r),i=xn(n);return Ie(i,t)}}o(Vl,"KeyOf");function Bp(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Vl(e[n],Dt(t));return r}o(Bp,"FromProperties");function qp(e,t){return Bp(e.properties,t)}o(qp,"FromMappedResult");function zp(e,t){let r=qp(e,t);return Et(r)}o(zp,"KeyOfFromMappedResult");v();function Vo(e){let t=gr(e),r=na(e,t);return t.map((n,i)=>[t[i],r[i]])}o(Vo,"KeyOfPropertyEntries");function Vp(e){let t=[];for(let r of e)t.push(...gr(r));return pf(t)}o(Vp,"CompositeKeys");function Kp(e){return e.filter(t=>!ro(t))}o(Kp,"FilterNever");function Gp(e,t){let r=[];for(let n of e)r.push(...na(n,[t]));return Kp(r)}o(Gp,"CompositeProperty");function Hp(e,t){let r={};for(let n of t)r[n]=Bl(Gp(e,n));return r}o(Hp,"CompositeProperties");function Wp(e,t){let r=Vp(e),n=Hp(e,r);return wt(n,t)}o(Wp,"Composite");v();v();function Kl(e){return Ie({[fe]:"Date",type:"Date"},e)}o(Kl,"Date");v();function Gl(e){return Ie({[fe]:"Null",type:"null"},e)}o(Gl,"Null");v();function Hl(e){return Ie({[fe]:"Symbol",type:"symbol"},e)}o(Hl,"Symbol");v();function Wl(e){return Ie({[fe]:"Undefined",type:"undefined"},e)}o(Wl,"Undefined");v();function Jl(e){return Ie({[fe]:"Uint8Array",type:"Uint8Array"},e)}o(Jl,"Uint8Array");v();function so(e){return Ie({[fe]:"Unknown"},e)}o(so,"Unknown");function Jp(e){return e.map(t=>aa(t,!1))}o(Jp,"FromArray");function Zp(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=nn(aa(e[r],!1));return t}o(Zp,"FromProperties");function Po(e,t){return t===!0?e:nn(e)}o(Po,"ConditionalReadonly");function aa(e,t){return Fs(e)||js(e)?Po(Vn(),t):Xt(e)?nn(ao(Jp(e))):gn(e)?Jl():Ro(e)?Kl():at(e)?Po(wt(Zp(e)),t):Ts(e)?Po(qo([],so()),t):jt(e)?Wl():ks(e)?Gl():As(e)?Hl():Ui(e)?ra():Lr(e)||Yn(e)||ft(e)?dt(e):wt({})}o(aa,"FromValue");function Yp(e,t){return Ie(aa(e,!0),t)}o(Yp,"Const");v();function Qp(e,t){return ao(e.parameters,t)}o(Qp,"ConstructorParameters");v();function lo(e,t){return e.map(r=>vr(r,t))}o(lo,"FromRest");function Xp(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=vr(e[n],t);return r}o(Xp,"FromProperties");function em(e,t){return e.parameters=lo(e.parameters,t),e.returns=vr(e.returns,t),e}o(em,"FromConstructor");function tm(e,t){return e.parameters=lo(e.parameters,t),e.returns=vr(e.returns,t),e}o(tm,"FromFunction");function rm(e,t){return e.allOf=lo(e.allOf,t),e}o(rm,"FromIntersect");function nm(e,t){return e.anyOf=lo(e.anyOf,t),e}o(nm,"FromUnion");function om(e,t){return jt(e.items)||(e.items=lo(e.items,t)),e}o(om,"FromTuple");function im(e,t){return e.items=vr(e.items,t),e}o(im,"FromArray");function am(e,t){return e.properties=Xp(e.properties,t),e}o(am,"FromObject");function sm(e,t){return e.item=vr(e.item,t),e}o(sm,"FromPromise");function lm(e,t){return e.items=vr(e.items,t),e}o(lm,"FromAsyncIterator");function cm(e,t){return e.items=vr(e.items,t),e}o(cm,"FromIterator");function um(e,t){let r=t.find(i=>i.$id===e.$ref);if(r===void 0)throw Error("Unable to dereference schema with $id ".concat(e.$ref));let n=Zt(r,["$id"]);return vr(n,t)}o(um,"FromRef");function dm(e,t){return Vi(e)?em(e,t):Ki(e)?tm(e,t):or(e)?rm(e,t):Pt(e)?nm(e,t):In(e)?om(e,t):eo(e)?im(e,t):yr(e)?am(e,t):Do(e)?sm(e,t):zi(e)?lm(e,t):Gi(e)?cm(e,t):Bs(e)?um(e,t):e}o(dm,"DerefResolve");function vr(e,t){return dm(Bi(e),Fd(t))}o(vr,"Deref");v();function fm(e,t){if(jt(e))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(e).filter(i=>isNaN(i)).map(i=>e[i]),n=[...new Set(r)].map(i=>dt(i));return _t(n,Me(oe({},t),{[Bn]:"Enum"}))}o(fm,"Enum");v();v();v();var pm=class extends Xe{};o(pm,"ExtendsResolverError");var NS=pm,ee;(function(e){e[e.Union=0]="Union",e[e.True=1]="True",e[e.False=2]="False"})(ee||(ee={}));function Yt(e){return e===ee.False?e:ee.True}o(Yt,"IntoBooleanResult");function Pn(e){throw new NS(e)}o(Pn,"Throw");function pt(e){return U.IsNever(e)||U.IsIntersect(e)||U.IsUnion(e)||U.IsUnknown(e)||U.IsAny(e)}o(pt,"IsStructuralRight");function mt(e,t){return U.IsNever(t)?Ql():U.IsIntersect(t)?Ko(e,t):U.IsUnion(t)?la(e,t):U.IsUnknown(t)?rc():U.IsAny(t)?sa():Pn("StructuralRight")}o(mt,"StructuralRight");function sa(e,t){return ee.True}o(sa,"FromAnyRight");function mm(e,t){return U.IsIntersect(t)?Ko(e,t):U.IsUnion(t)&&t.anyOf.some(r=>U.IsAny(r)||U.IsUnknown(r))?ee.True:U.IsUnion(t)?ee.Union:U.IsUnknown(t)||U.IsAny(t)?ee.True:ee.Union}o(mm,"FromAny");function hm(e,t){return U.IsUnknown(e)?ee.False:U.IsAny(e)?ee.Union:U.IsNever(e)?ee.True:ee.False}o(hm,"FromArrayRight");function ym(e,t){return U.IsObject(t)&&Go(t)?ee.True:pt(t)?mt(e,t):U.IsArray(t)?Yt(Ye(e.items,t.items)):ee.False}o(ym,"FromArray");function gm(e,t){return pt(t)?mt(e,t):U.IsAsyncIterator(t)?Yt(Ye(e.items,t.items)):ee.False}o(gm,"FromAsyncIterator");function vm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsBigInt(t)?ee.True:ee.False}o(vm,"FromBigInt");function Zl(e,t){return U.IsLiteralBoolean(e)||U.IsBoolean(e)?ee.True:ee.False}o(Zl,"FromBooleanRight");function bm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsBoolean(t)?ee.True:ee.False}o(bm,"FromBoolean");function Im(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsConstructor(t)?e.parameters.length>t.parameters.length?ee.False:e.parameters.every((r,n)=>Yt(Ye(t.parameters[n],r))===ee.True)?Yt(Ye(e.returns,t.returns)):ee.False:ee.False}o(Im,"FromConstructor");function wm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsDate(t)?ee.True:ee.False}o(wm,"FromDate");function xm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsFunction(t)?e.parameters.length>t.parameters.length?ee.False:e.parameters.every((r,n)=>Yt(Ye(t.parameters[n],r))===ee.True)?Yt(Ye(e.returns,t.returns)):ee.False:ee.False}o(xm,"FromFunction");function Yl(e,t){return U.IsLiteral(e)&&nt.IsNumber(e.const)||U.IsNumber(e)||U.IsInteger(e)?ee.True:ee.False}o(Yl,"FromIntegerRight");function Om(e,t){return U.IsInteger(t)||U.IsNumber(t)?ee.True:pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):ee.False}o(Om,"FromInteger");function Ko(e,t){return t.allOf.every(r=>Ye(e,r)===ee.True)?ee.True:ee.False}o(Ko,"FromIntersectRight");function Pm(e,t){return e.allOf.some(r=>Ye(r,t)===ee.True)?ee.True:ee.False}o(Pm,"FromIntersect");function Em(e,t){return pt(t)?mt(e,t):U.IsIterator(t)?Yt(Ye(e.items,t.items)):ee.False}o(Em,"FromIterator");function Sm(e,t){return U.IsLiteral(t)&&t.const===e.const?ee.True:pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsString(t)?tc(e):U.IsNumber(t)?Xl(e):U.IsInteger(t)?Yl(e):U.IsBoolean(t)?Zl(e):ee.False}o(Sm,"FromLiteral");function Ql(e,t){return ee.False}o(Ql,"FromNeverRight");function Fm(e,t){return ee.True}o(Fm,"FromNever");function Ma(e){let[t,r]=[e,0];for(;U.IsNot(t);)t=t.not,r+=1;return r%2===0?t:so()}o(Ma,"UnwrapTNot");function Tm(e,t){return U.IsNot(e)?Ye(Ma(e),t):U.IsNot(t)?Ye(e,Ma(t)):Pn("Invalid fallthrough for Not")}o(Tm,"FromNot");function jm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsNull(t)?ee.True:ee.False}o(jm,"FromNull");function Xl(e,t){return U.IsLiteralNumber(e)||U.IsNumber(e)||U.IsInteger(e)?ee.True:ee.False}o(Xl,"FromNumberRight");function km(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsInteger(t)||U.IsNumber(t)?ee.True:ee.False}o(km,"FromNumber");function Ct(e,t){return Object.getOwnPropertyNames(e.properties).length===t}o(Ct,"IsObjectPropertyCount");function La(e){return Go(e)}o(La,"IsObjectStringLike");function Ua(e){return Ct(e,0)||Ct(e,1)&&"description"in e.properties&&U.IsUnion(e.properties.description)&&e.properties.description.anyOf.length===2&&(U.IsString(e.properties.description.anyOf[0])&&U.IsUndefined(e.properties.description.anyOf[1])||U.IsString(e.properties.description.anyOf[1])&&U.IsUndefined(e.properties.description.anyOf[0]))}o(Ua,"IsObjectSymbolLike");function li(e){return Ct(e,0)}o(li,"IsObjectNumberLike");function Da(e){return Ct(e,0)}o(Da,"IsObjectBooleanLike");function Am(e){return Ct(e,0)}o(Am,"IsObjectBigIntLike");function Nm(e){return Ct(e,0)}o(Nm,"IsObjectDateLike");function _m(e){return Go(e)}o(_m,"IsObjectUint8ArrayLike");function $m(e){let t=On();return Ct(e,0)||Ct(e,1)&&"length"in e.properties&&Yt(Ye(e.properties.length,t))===ee.True}o($m,"IsObjectFunctionLike");function Rm(e){return Ct(e,0)}o(Rm,"IsObjectConstructorLike");function Go(e){let t=On();return Ct(e,0)||Ct(e,1)&&"length"in e.properties&&Yt(Ye(e.properties.length,t))===ee.True}o(Go,"IsObjectArrayLike");function Cm(e){let t=qo([Vn()],Vn());return Ct(e,0)||Ct(e,1)&&"then"in e.properties&&Yt(Ye(e.properties.then,t))===ee.True}o(Cm,"IsObjectPromiseLike");function ec(e,t){return Ye(e,t)===ee.False||U.IsOptional(e)&&!U.IsOptional(t)?ee.False:ee.True}o(ec,"Property");function Nt(e,t){return U.IsUnknown(e)?ee.False:U.IsAny(e)?ee.Union:U.IsNever(e)||U.IsLiteralString(e)&&La(t)||U.IsLiteralNumber(e)&&li(t)||U.IsLiteralBoolean(e)&&Da(t)||U.IsSymbol(e)&&Ua(t)||U.IsBigInt(e)&&Am(t)||U.IsString(e)&&La(t)||U.IsSymbol(e)&&Ua(t)||U.IsNumber(e)&&li(t)||U.IsInteger(e)&&li(t)||U.IsBoolean(e)&&Da(t)||U.IsUint8Array(e)&&_m(t)||U.IsDate(e)&&Nm(t)||U.IsConstructor(e)&&Rm(t)||U.IsFunction(e)&&$m(t)?ee.True:U.IsRecord(e)&&U.IsString(bi(e))?t[Bn]==="Record"?ee.True:ee.False:U.IsRecord(e)&&U.IsNumber(bi(e))&&Ct(t,0)?ee.True:ee.False}o(Nt,"FromObjectRight");function Mm(e,t){return pt(t)?mt(e,t):U.IsRecord(t)?er(e,t):U.IsObject(t)?(()=>{for(let r of Object.getOwnPropertyNames(t.properties)){if(!(r in e.properties)&&!U.IsOptional(t.properties[r]))return ee.False;if(U.IsOptional(t.properties[r]))return ee.True;if(ec(e.properties[r],t.properties[r])===ee.False)return ee.False}return ee.True})():ee.False}o(Mm,"FromObject");function Lm(e,t){return pt(t)?mt(e,t):U.IsObject(t)&&Cm(t)?ee.True:U.IsPromise(t)?Yt(Ye(e.item,t.item)):ee.False}o(Lm,"FromPromise");function bi(e){return qn in e.patternProperties?On():zn in e.patternProperties?Dr():Pn("Unknown record key pattern")}o(bi,"RecordKey");function Ii(e){return qn in e.patternProperties?e.patternProperties[qn]:zn in e.patternProperties?e.patternProperties[zn]:Pn("Unable to get record value schema")}o(Ii,"RecordValue");function er(e,t){let[r,n]=[bi(t),Ii(t)];return U.IsLiteralString(e)&&U.IsNumber(r)&&Yt(Ye(e,n))===ee.True?ee.True:U.IsUint8Array(e)&&U.IsNumber(r)||U.IsString(e)&&U.IsNumber(r)||U.IsArray(e)&&U.IsNumber(r)?Ye(e,n):U.IsObject(e)?(()=>{for(let i of Object.getOwnPropertyNames(e.properties))if(ec(n,e.properties[i])===ee.False)return ee.False;return ee.True})():ee.False}o(er,"FromRecordRight");function Um(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?Ye(Ii(e),Ii(t)):ee.False}o(Um,"FromRecord");function Dm(e,t){let r=U.IsRegExp(e)?Dr():e,n=U.IsRegExp(t)?Dr():t;return Ye(r,n)}o(Dm,"FromRegExp");function tc(e,t){return U.IsLiteral(e)&&nt.IsString(e.const)||U.IsString(e)?ee.True:ee.False}o(tc,"FromStringRight");function Bm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsString(t)?ee.True:ee.False}o(Bm,"FromString");function qm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsSymbol(t)?ee.True:ee.False}o(qm,"FromSymbol");function zm(e,t){return U.IsTemplateLiteral(e)?Ye(To(e),t):U.IsTemplateLiteral(t)?Ye(e,To(t)):Pn("Invalid fallthrough for TemplateLiteral")}o(zm,"FromTemplateLiteral");function Vm(e,t){return U.IsArray(t)&&e.items!==void 0&&e.items.every(r=>Ye(r,t.items)===ee.True)}o(Vm,"IsArrayOfTuple");function Km(e,t){return U.IsNever(e)?ee.True:U.IsUnknown(e)?ee.False:U.IsAny(e)?ee.Union:ee.False}o(Km,"FromTupleRight");function Gm(e,t){return pt(t)?mt(e,t):U.IsObject(t)&&Go(t)||U.IsArray(t)&&Vm(e,t)?ee.True:U.IsTuple(t)?nt.IsUndefined(e.items)&&!nt.IsUndefined(t.items)||!nt.IsUndefined(e.items)&&nt.IsUndefined(t.items)?ee.False:nt.IsUndefined(e.items)&&!nt.IsUndefined(t.items)||e.items.every((r,n)=>Ye(r,t.items[n])===ee.True)?ee.True:ee.False:ee.False}o(Gm,"FromTuple");function Hm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsUint8Array(t)?ee.True:ee.False}o(Hm,"FromUint8Array");function Wm(e,t){return pt(t)?mt(e,t):U.IsObject(t)?Nt(e,t):U.IsRecord(t)?er(e,t):U.IsVoid(t)?Ym(e):U.IsUndefined(t)?ee.True:ee.False}o(Wm,"FromUndefined");function la(e,t){return t.anyOf.some(r=>Ye(e,r)===ee.True)?ee.True:ee.False}o(la,"FromUnionRight");function Jm(e,t){return e.anyOf.every(r=>Ye(r,t)===ee.True)?ee.True:ee.False}o(Jm,"FromUnion");function rc(e,t){return ee.True}o(rc,"FromUnknownRight");function Zm(e,t){return U.IsNever(t)?Ql():U.IsIntersect(t)?Ko(e,t):U.IsUnion(t)?la(e,t):U.IsAny(t)?sa():U.IsString(t)?tc(e):U.IsNumber(t)?Xl(e):U.IsInteger(t)?Yl(e):U.IsBoolean(t)?Zl(e):U.IsArray(t)?hm(e):U.IsTuple(t)?Km(e):U.IsObject(t)?Nt(e,t):U.IsUnknown(t)?ee.True:ee.False}o(Zm,"FromUnknown");function Ym(e,t){return U.IsUndefined(e)||U.IsUndefined(e)?ee.True:ee.False}o(Ym,"FromVoidRight");function Qm(e,t){return U.IsIntersect(t)?Ko(e,t):U.IsUnion(t)?la(e,t):U.IsUnknown(t)?rc():U.IsAny(t)?sa():U.IsObject(t)?Nt(e,t):U.IsVoid(t)?ee.True:ee.False}o(Qm,"FromVoid");function Ye(e,t){return U.IsTemplateLiteral(e)||U.IsTemplateLiteral(t)?zm(e,t):U.IsRegExp(e)||U.IsRegExp(t)?Dm(e,t):U.IsNot(e)||U.IsNot(t)?Tm(e,t):U.IsAny(e)?mm(e,t):U.IsArray(e)?ym(e,t):U.IsBigInt(e)?vm(e,t):U.IsBoolean(e)?bm(e,t):U.IsAsyncIterator(e)?gm(e,t):U.IsConstructor(e)?Im(e,t):U.IsDate(e)?wm(e,t):U.IsFunction(e)?xm(e,t):U.IsInteger(e)?Om(e,t):U.IsIntersect(e)?Pm(e,t):U.IsIterator(e)?Em(e,t):U.IsLiteral(e)?Sm(e,t):U.IsNever(e)?Fm():U.IsNull(e)?jm(e,t):U.IsNumber(e)?km(e,t):U.IsObject(e)?Mm(e,t):U.IsRecord(e)?Um(e,t):U.IsString(e)?Bm(e,t):U.IsSymbol(e)?qm(e,t):U.IsTuple(e)?Gm(e,t):U.IsPromise(e)?Lm(e,t):U.IsUint8Array(e)?Hm(e,t):U.IsUndefined(e)?Wm(e,t):U.IsUnion(e)?Jm(e,t):U.IsUnknown(e)?Zm(e,t):U.IsVoid(e)?Qm(e,t):Pn("Unknown left type operand '".concat(e[fe],"'"))}o(Ye,"Visit");function co(e,t){return Ye(e,t)}o(co,"ExtendsCheck");v();v();v();function Xm(e,t,r,n,i){let a={};for(let s of globalThis.Object.getOwnPropertyNames(e))a[s]=ca(e[s],t,r,n,Dt(i));return a}o(Xm,"FromProperties");function eh(e,t,r,n,i){return Xm(e.properties,t,r,n,i)}o(eh,"FromMappedResult");function th(e,t,r,n,i){let a=eh(e,t,r,n,i);return Et(a)}o(th,"ExtendsFromMappedResult");function rh(e,t,r,n){let i=co(e,t);return i===ee.Union?_t([r,n]):i===ee.True?r:n}o(rh,"ExtendsResolve");function ca(e,t,r,n,i){return Kt(e)?th(e,t,r,n,i):tn(e)?Ie(ah(e,t,r,n,i)):Ie(rh(e,t,r,n),i)}o(ca,"Extends");function nh(e,t,r,n,i){return{[e]:ca(dt(e),t,r,n,Dt(i))}}o(nh,"FromPropertyKey");function oh(e,t,r,n,i){return e.reduce((a,s)=>oe(oe({},a),nh(s,t,r,n,i)),{})}o(oh,"FromPropertyKeys");function ih(e,t,r,n,i){return oh(e.keys,t,r,n,i)}o(ih,"FromMappedKey");function ah(e,t,r,n,i){let a=ih(e,t,r,n,i);return Et(a)}o(ah,"ExtendsFromMappedKey");v();function sh(e){return e.allOf.every(t=>En(t))}o(sh,"Intersect");function lh(e){return e.anyOf.some(t=>En(t))}o(lh,"Union");function ch(e){return!En(e.not)}o(ch,"Not");function En(e){return e[fe]==="Intersect"?sh(e):e[fe]==="Union"?lh(e):e[fe]==="Not"?ch(e):e[fe]==="Undefined"}o(En,"ExtendsUndefinedCheck");v();function uh(e,t){return ua(To(e),t)}o(uh,"ExcludeFromTemplateLiteral");function dh(e,t){let r=e.filter(n=>co(n,t)===ee.False);return r.length===1?r[0]:_t(r)}o(dh,"ExcludeRest");function ua(e,t,r={}){return rn(e)?Ie(uh(e,t),r):Kt(e)?Ie(mh(e,t),r):Ie(Pt(e)?dh(e.anyOf,t):co(e,t)!==ee.False?At():e,r)}o(ua,"Exclude");function fh(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=ua(e[n],t);return r}o(fh,"FromProperties");function ph(e,t){return fh(e.properties,t)}o(ph,"FromMappedResult");function mh(e,t){let r=ph(e,t);return Et(r)}o(mh,"ExcludeFromMappedResult");v();v();v();function hh(e,t){return da(To(e),t)}o(hh,"ExtractFromTemplateLiteral");function yh(e,t){let r=e.filter(n=>co(n,t)!==ee.False);return r.length===1?r[0]:_t(r)}o(yh,"ExtractRest");function da(e,t,r){return rn(e)?Ie(hh(e,t),r):Kt(e)?Ie(bh(e,t),r):Ie(Pt(e)?yh(e.anyOf,t):co(e,t)!==ee.False?e:At(),r)}o(da,"Extract");function gh(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=da(e[n],t);return r}o(gh,"FromProperties");function vh(e,t){return gh(e.properties,t)}o(vh,"FromMappedResult");function bh(e,t){let r=vh(e,t);return Et(r)}o(bh,"ExtractFromMappedResult");v();function Ih(e,t){return Ie(e.returns,t)}o(Ih,"InstanceType");v();function wh(e){return Ie({[fe]:"Integer",type:"integer"},e)}o(wh,"Integer");v();v();v();function xh(e,t,r){return{[e]:Sn(dt(e),t,Dt(r))}}o(xh,"MappedIntrinsicPropertyKey");function Oh(e,t,r){return e.reduce((n,i)=>oe(oe({},n),xh(i,t,r)),{})}o(Oh,"MappedIntrinsicPropertyKeys");function Ph(e,t,r){return Oh(e.keys,t,r)}o(Ph,"MappedIntrinsicProperties");function Eh(e,t,r){let n=Ph(e,t,r);return Et(n)}o(Eh,"IntrinsicFromMappedKey");function Sh(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),r].join("")}o(Sh,"ApplyUncapitalize");function Fh(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),r].join("")}o(Fh,"ApplyCapitalize");function Th(e){return e.toUpperCase()}o(Th,"ApplyUppercase");function jh(e){return e.toLowerCase()}o(jh,"ApplyLowercase");function kh(e,t,r){let n=ea(e.pattern);if(!Gn(n))return Me(oe({},e),{pattern:nc(e.pattern,t)});let i=[...zo(n)].map(l=>dt(l)),a=oc(i,t),s=_t(a);return Rl([s],r)}o(kh,"FromTemplateLiteral");function nc(e,t){return typeof e=="string"?t==="Uncapitalize"?Sh(e):t==="Capitalize"?Fh(e):t==="Uppercase"?Th(e):t==="Lowercase"?jh(e):e:e.toString()}o(nc,"FromLiteralValue");function oc(e,t){return e.map(r=>Sn(r,t))}o(oc,"FromRest");function Sn(e,t,r={}){return tn(e)?Eh(e,t,r):rn(e)?kh(e,t,r):Pt(e)?_t(oc(e.anyOf,t),r):to(e)?dt(nc(e.const,t),r):Ie(e,r)}o(Sn,"Intrinsic");function Ah(e,t={}){return Sn(e,"Capitalize",t)}o(Ah,"Capitalize");v();function Nh(e,t={}){return Sn(e,"Lowercase",t)}o(Nh,"Lowercase");v();function _h(e,t={}){return Sn(e,"Uncapitalize",t)}o(_h,"Uncapitalize");v();function $h(e,t={}){return Sn(e,"Uppercase",t)}o($h,"Uppercase");v();function Rh(e,t){return Ie({[fe]:"Not",not:e},t)}o(Rh,"Not");v();v();v();function Ch(e,t,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(e))n[i]=pa(e[i],t,Dt(r));return n}o(Ch,"FromProperties");function Mh(e,t,r){return Ch(e.properties,t,r)}o(Mh,"FromMappedResult");function Lh(e,t,r){let n=Mh(e,t,r);return Et(n)}o(Lh,"OmitFromMappedResult");function Uh(e,t){return e.map(r=>fa(r,t))}o(Uh,"FromIntersect");function Dh(e,t){return e.map(r=>fa(r,t))}o(Dh,"FromUnion");function Bh(e,t){let r=e,{[t]:n}=r;return xs(r,[Nu(t)])}o(Bh,"FromProperty");function qh(e,t){return t.reduce((r,n)=>Bh(r,n),e)}o(qh,"FromProperties");function zh(e,t){let r=Zt(e,[Lt,"$id","required","properties"]),n=qh(e.properties,t);return wt(n,r)}o(zh,"FromObject");function fa(e,t){return or(e)?an(Uh(e.allOf,t)):Pt(e)?_t(Dh(e.anyOf,t)):yr(e)?zh(e,t):wt({})}o(fa,"OmitResolve");function pa(e,t,r){if(tn(t))return Hh(e,t,r);if(Kt(e))return Lh(e,t,r);let n=dn(t)?Vr(t):t;return Ie(oe(oe({},fa(e,n)),r))}o(pa,"Omit");function Vh(e,t,r){return{[t]:pa(e,[t],Dt(r))}}o(Vh,"FromPropertyKey");function Kh(e,t,r){return t.reduce((n,i)=>oe(oe({},n),Vh(e,i,r)),{})}o(Kh,"FromPropertyKeys");function Gh(e,t,r){return Kh(e,t.keys,r)}o(Gh,"FromMappedKey");function Hh(e,t,r){let n=Gh(e,t,r);return Et(n)}o(Hh,"OmitFromMappedKey");v();function Wh(e,t){return ao(e.parameters,t)}o(Wh,"Parameters");v();v();function Ba(e){return e.map(t=>ic(t))}o(Ba,"FromRest");function Jh(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=on(e[r]);return t}o(Jh,"FromProperties");function Zh(e){let t=Zt(e,[Lt,"$id","required","properties"]),r=Jh(e.properties);return wt(r,t)}o(Zh,"FromObject");function ic(e){return or(e)?an(Ba(e.allOf)):Pt(e)?_t(Ba(e.anyOf)):yr(e)?Zh(e):wt({})}o(ic,"PartialResolve");function ac(e,t){return Kt(e)?Xh(e,t):Ie(oe(oe({},ic(e)),t))}o(ac,"Partial");function Yh(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=ac(e[n],Dt(t));return r}o(Yh,"FromProperties");function Qh(e,t){return Yh(e.properties,t)}o(Qh,"FromMappedResult");function Xh(e,t){let r=Qh(e,t);return Et(r)}o(Xh,"PartialFromMappedResult");v();v();v();function ey(e,t,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(e))n[i]=ha(e[i],t,Dt(r));return n}o(ey,"FromProperties");function ty(e,t,r){return ey(e.properties,t,r)}o(ty,"FromMappedResult");function ry(e,t,r){let n=ty(e,t,r);return Et(n)}o(ry,"PickFromMappedResult");function ny(e,t){return e.map(r=>ma(r,t))}o(ny,"FromIntersect");function oy(e,t){return e.map(r=>ma(r,t))}o(oy,"FromUnion");function iy(e,t){let r={};for(let n of t)n in e&&(r[n]=e[n]);return r}o(iy,"FromProperties");function ay(e,t){let r=Zt(e,[Lt,"$id","required","properties"]),n=iy(e.properties,t);return wt(n,r)}o(ay,"FromObject");function ma(e,t){return or(e)?an(ny(e.allOf,t)):Pt(e)?_t(oy(e.anyOf,t)):yr(e)?ay(e,t):wt({})}o(ma,"PickResolve");function ha(e,t,r){if(tn(t))return uy(e,t,r);if(Kt(e))return ry(e,t,r);let n=dn(t)?Vr(t):t;return Ie(oe(oe({},ma(e,n)),r))}o(ha,"Pick");function sy(e,t,r){return{[t]:ha(e,[t],Dt(r))}}o(sy,"FromPropertyKey");function ly(e,t,r){return t.reduce((n,i)=>oe(oe({},n),sy(e,i,r)),{})}o(ly,"FromPropertyKeys");function cy(e,t,r){return ly(e,t.keys,r)}o(cy,"FromMappedKey");function uy(e,t,r){let n=cy(e,t,r);return Et(n)}o(uy,"PickFromMappedKey");v();function dy(e){return nn(on(e))}o(dy,"ReadonlyOptional");v();function sn(e,t,r){return Ie({[fe]:"Record",type:"object",patternProperties:{[e]:t}},r)}o(sn,"RecordCreateFromPattern");function ya(e,t,r){let n={};for(let i of e)n[i]=t;return wt(n,Me(oe({},r),{[Bn]:"Record"}))}o(ya,"RecordCreateFromKeys");function fy(e,t,r){return Al(e)?ya(Vr(e),t,r):sn(e.pattern,t,r)}o(fy,"FromTemplateLiteralKey");function py(e,t,r){return ya(Vr(_t(e)),t,r)}o(py,"FromUnionKey");function my(e,t,r){return ya([e.toString()],t,r)}o(my,"FromLiteralKey");function hy(e,t,r){return sn(e.source,t,r)}o(hy,"FromRegExpKey");function yy(e,t,r){let n=jt(e.pattern)?zn:e.pattern;return sn(n,t,r)}o(yy,"FromStringKey");function gy(e,t,r){return sn(zn,t,r)}o(gy,"FromAnyKey");function vy(e,t,r){return sn(TS,t,r)}o(vy,"FromNeverKey");function by(e,t,r){return sn(qn,t,r)}o(by,"FromIntegerKey");function Iy(e,t,r){return sn(qn,t,r)}o(Iy,"FromNumberKey");function wy(e,t,r={}){return Pt(e)?py(e.anyOf,t,r):rn(e)?fy(e,t,r):to(e)?my(e.const,t,r):Lo(e)?by(e,t,r):Uo(e)?Iy(e,t,r):qs(e)?hy(e,t,r):Hi(e)?yy(e,t,r):Ms(e)?gy(e,t,r):ro(e)?vy(e,t,r):At(r)}o(wy,"Record");v();var _S=0;function xy(e,t={}){jt(t.$id)&&(t.$id="T".concat(_S++));let r=Bi(e({[fe]:"This",$ref:"".concat(t.$id)}));return r.$id=t.$id,Ie(oe({[Bn]:"Recursive"},r),t)}o(xy,"Recursive");v();function Oy(e,t){if(ft(e))return Ie({[fe]:"Ref",$ref:e},t);if(jt(e.$id))throw new Error("Reference target type must specify an $id");return Ie({[fe]:"Ref",$ref:e.$id},t)}o(Oy,"Ref");v();function Py(e,t){let r=ft(e)?new globalThis.RegExp(e):e;return Ie({[fe]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},t)}o(Py,"RegExp");v();v();function qa(e){return e.map(t=>sc(t))}o(qa,"FromRest");function Ey(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=Zt(e[r],[en]);return t}o(Ey,"FromProperties");function Sy(e){let t=Zt(e,[Lt,"$id","required","properties"]),r=Ey(e.properties);return wt(r,t)}o(Sy,"FromObject");function sc(e){return or(e)?an(qa(e.allOf)):Pt(e)?_t(qa(e.anyOf)):yr(e)?Sy(e):wt({})}o(sc,"RequiredResolve");function lc(e,t){return Kt(e)?jy(e,t):Ie(oe(oe({},sc(e)),t))}o(lc,"Required");function Fy(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=lc(e[n],t);return r}o(Fy,"FromProperties");function Ty(e,t){return Fy(e.properties,t)}o(Ty,"FromMappedResult");function jy(e,t){let r=Ty(e,t);return Et(r)}o(jy,"RequiredFromMappedResult");v();function ky(e){var t;return or(e)?e.allOf:Pt(e)?e.anyOf:In(e)?(t=e.items)!=null?t:[]:[]}o(ky,"RestResolve");function Ay(e){return ky(e)}o(Ay,"Rest");v();function Ny(e,t){return Ie(e.returns,t)}o(Ny,"ReturnType");v();function _y(e){return JSON.parse(JSON.stringify(e))}o(_y,"Strict");v();var $y=class{constructor(t){this.schema=t}Decode(t){return new RS(this.schema,t)}};o($y,"TransformDecodeBuilder");var $S=$y,Ry=class{constructor(t,r){this.schema=t,this.decode=r}EncodeTransform(t,r){let n={Encode:o(i=>r[Lt].Encode(t(i)),"Encode"),Decode:o(i=>this.decode(r[Lt].Decode(i)),"Decode")};return Me(oe({},r),{[Lt]:n})}EncodeSchema(t,r){let n={Decode:this.decode,Encode:t};return Me(oe({},r),{[Lt]:n})}Encode(t){return Wi(this.schema)?this.EncodeTransform(t,this.schema):this.EncodeSchema(t,this.schema)}};o(Ry,"TransformEncodeBuilder");var RS=Ry;function Cy(e){return new $S(e)}o(Cy,"Transform");v();function cc(e={}){var t;return Ie({[fe]:(t=e[fe])!=null?t:"Unsafe"},e)}o(cc,"Unsafe");v();function My(e){return Ie({[fe]:"Void",type:"void"},e)}o(My,"Void");v();var Ly={};yn(Ly,{Any:()=>Vn,Array:()=>Fl,AsyncIterator:()=>Tl,Awaited:()=>_p,BigInt:()=>ra,Boolean:()=>_l,Capitalize:()=>Ah,Composite:()=>Wp,Const:()=>Yp,Constructor:()=>jl,ConstructorParameters:()=>Qp,Date:()=>Kl,Deref:()=>vr,Enum:()=>fm,Exclude:()=>ua,Extends:()=>ca,Extract:()=>da,Function:()=>qo,Index:()=>oa,InstanceType:()=>Ih,Integer:()=>wh,Intersect:()=>an,Iterator:()=>Ll,KeyOf:()=>Vl,Literal:()=>dt,Lowercase:()=>Nh,Mapped:()=>Ip,Never:()=>At,Not:()=>Rh,Null:()=>Gl,Number:()=>On,Object:()=>wt,Omit:()=>pa,Optional:()=>on,Parameters:()=>Wh,Partial:()=>ac,Pick:()=>ha,Promise:()=>Ul,Readonly:()=>nn,ReadonlyOptional:()=>dy,Record:()=>wy,Recursive:()=>xy,Ref:()=>Oy,RegExp:()=>Py,Required:()=>lc,Rest:()=>Ay,ReturnType:()=>Ny,Strict:()=>_y,String:()=>Dr,Symbol:()=>Hl,TemplateLiteral:()=>Rl,Transform:()=>Cy,Tuple:()=>ao,Uint8Array:()=>Jl,Uncapitalize:()=>_h,Undefined:()=>Wl,Union:()=>_t,Unknown:()=>so,Unsafe:()=>cc,Uppercase:()=>$h,Void:()=>My});v();var u=Ly,Mt=o((e,t)=>u.Unsafe(u.String({$id:t,pattern:"^".concat(e,"_[A-Za-z0-9-]{8,}$")})),"Ident"),Kr=Mt("g","GeometryId"),xt=Mt("f","FloorId"),CS=[Kr,xt];v();v();var wi=u.Object({externalId:u.String({description:"An identifier that can be used to link this entity to data outside of the MVF."}),name:u.String({description:"The name of the entity."}),shortName:u.String({description:"A short name for the entity."}),description:u.String({description:"A description of the entity."}),icon:u.String({format:"uri",description:"A URL to an icon for the entity."})},{$id:"BaseDetails",description:"Additional information about a given entity."}),Uy=u.Partial(wi,{$id:"Details",description:"Additional information about a given entity."}),Ho=u.Object({details:u.Optional(u.Ref(Uy))},{$id:"WithDetails"}),uc=o(e=>{let t=[...e].sort(),r=u.Pick(wi,e),n=u.Omit(wi,e);return u.Object({details:u.Intersect([r,u.Partial(n)])},{$id:"WithRequiredDetails_".concat(t.join("_"))})},"WithRequiredDetails"),MS=[wi,Uy];v();v();var Dy=u.Record(u.String(),u.Unknown(),{$id:"Extra"}),Wo=u.Object({extra:u.Optional(u.Ref(Dy))}),LS=[Dy];v();v();var ga=u.Object({geometryId:u.Ref(Kr),floorId:u.Ref(xt)},{$id:"GeometryAnchor"});u.Object({geometryAnchor:u.Ref(ga)});var dc=o((e,t)=>u.Object({geometryAnchors:u.Array(u.Ref(ga),e)},t),"WithGeometryAnchors"),US=[ga];v();v();v();v();v();var xi=u.Number({$id:"Longitude",minimum:-180,maximum:180,description:"A WGS 84-compatible longitude coordinate value."}),Oi=u.Number({$id:"Latitude",minimum:-90,maximum:90,description:"A WGS 84-compatible latitude coordinate value."}),uo=u.Tuple([u.Ref(xi),u.Ref(Oi)],{$id:"Position",minItems:2,maxItems:2,description:"A valid WGS 84 position consisting of a longitude value, followed by a latitude value."}),Gr=u.Object({type:u.Literal("Point"),coordinates:u.Ref(uo)},{$id:"Point",description:"An RFC-7946 compatible GeoJSON Point geometry."}),By=u.Object({type:u.Literal("MultiPoint"),coordinates:u.Array(u.Ref(uo))},{$id:"MultiPoint",description:"An RFC-7946 compatible GeoJSON MultiPoint geometry."}),qy=u.Object({type:u.Literal("LineString"),coordinates:u.Array(u.Ref(uo),{minItems:2,description:"At least two positions are required."})},{$id:"LineString",description:"An RFC-7946 compatible GeoJSON LineString geometry."}),zy=u.Object({type:u.Literal("MultiLineString"),coordinates:u.Array(u.Array(u.Ref(uo),{minItems:2}))},{$id:"MultiLineString",description:"An RFC-7946 compatible GeoJSON MultiLineString geometry."}),Vy=u.Array(u.Ref(uo),{$id:"LinearRing",minItems:4,description:"A linear ring is a building block of a polygon or multi-polygon."}),fc=u.Array(u.Ref(Vy),{$id:"LinearRings",minItems:1,description:"A collection of linear rings, at least one of which is the exterior ring of a polygon."}),pc=u.Object({type:u.Literal("Polygon"),coordinates:u.Ref(fc)},{$id:"Polygon",description:"An RFC-7946 compatible GeoJSON Polygon geometry."}),mc=u.Object({type:u.Literal("MultiPolygon"),coordinates:u.Array(u.Ref(fc))},{$id:"MultiPolygon",description:"An RFC-7946 compatible GeoJSON MultiPolygon geometry."}),Hr=o((e,t,r)=>u.Object({type:u.Literal("Feature"),geometry:e,properties:t},r),"Feature"),Fn=o((e,t,r)=>u.Object({type:u.Literal("FeatureCollection"),features:u.Array(e,r)},t),"FeatureCollection"),DS=[xi,Oi,uo,Gr,By,qy,zy,Vy,fc,pc,mc],Ky=u.Intersect([u.Object({id:u.Ref(xt),elevation:u.Integer({description:"An ordinal representing the elevation of this map relative to other maps in the stack."}),subtitle:u.Optional(u.String({description:"The subtitle of the floor."}))}),Ho],{$id:"FloorProperties"}),Gy=Hr(u.Union([u.Ref(pc),u.Ref(mc),u.Null()]),u.Ref(Ky),{$id:"FloorFeature"}),Hy=Fn(u.Ref(Gy),{$id:"FloorCollection"}),BS=u.Object({floors:u.Ref(Hy)}),qS={name:"core:floors",intoBundle:o(function*(e){e.floors!=null&&(yield{path:"floors.geojson",contents:e.floors})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e==="floors.geojson")return{floors:r(t)}},"fromBundle"),schema:BS,references:[Ky,Gy,Hy]};v();v();v();var Wy=class{constructor(t){we(this,"_value"),this._value=t}[Symbol.iterator](){return this}next(){if(this._value==null)return{done:!0,value:void 0};let t=this._value;return this._value=null,{done:!1,value:t}}};o(Wy,"OptionIterator");var Jy=Wy,Zy=class{constructor(t){we(this,"_tag","Some"),we(this,"_value"),this._value=t}get value(){return this._value}isSome(){return!0}isSomeAnd(t){return t(this.value)}isNone(){return!1}equals(t){return t.isSome()&&t.value===this.value}expect(t){return this.value}unwrap(){return this.value}unwrapOr(t){return this.value}unwrapOrElse(t){return this.value}inspect(t){return t(this.value),this}inspectNone(t){return this}map(t){return fu(t(this.value))}mapAsync(t){return t(this.value).then(r=>fu(r))}mapOr(t,r){return this.map(t).unwrapOr(r)}mapOrAsync(t,r){return this.mapAsync(t).then(n=>n.unwrapOr(r))}mapOrElse(t,r){return this.map(t).unwrapOrElse(r)}mapOrElseAsync(t,r){return this.mapAsync(t).then(n=>n.unwrapOrElse(r))}and(t){return t}andThen(t){return t(this.value)}andThenAsync(t){return t(this.value)}filter(t){return t(this.value)?this:un()}or(t){return this}orElse(t){return this}xor(t){return t.isSome()?un():this}toString(){return"Some(".concat(this.value,")")}okOr(t){return Se(this.value)}okOrElse(t){return Se(this.value)}iter(){return new Jy(this.value)}[Symbol.iterator](){return this.iter()}zip(t){return t.isSome()?jo([this.value,t.value]):un()}zipWith(t,r){return t.isSome()?jo(r(this.value,t.value)):un()}get[Symbol.toStringTag](){return"Some"}};o(Zy,"Some");var Yy=Zy,Qy=class{constructor(){we(this,"_tag","None")}get value(){return null}isSome(){return!1}isSomeAnd(t){return!1}isNone(){return!0}equals(t){return t.isNone()}expect(t){throw new Error(t)}unwrap(){throw new Error("Tried to unwrap a None value!")}unwrapOr(t){return t}unwrapOrElse(t){return t()}inspect(t){return this}inspectNone(t){return t(),this}map(t){return this}mapAsync(t){return Promise.resolve(this)}mapOr(t,r){return r}mapOrAsync(t,r){return Promise.resolve(r)}mapOrElse(t,r){return r()}mapOrElseAsync(t,r){return r()}and(t){return this}andThen(t){return this}andThenAsync(t){return Promise.resolve(this)}filter(t){return this}or(t){return t}orElse(t){return t()}xor(t){return t}toString(){return"None"}okOr(t){return Fe(t)}okOrElse(t){return Fe(t())}iter(){return new Jy(null)}[Symbol.iterator](){return this.iter()}zip(t){return this}zipWith(t,r){return this}get[Symbol.toStringTag](){return"None"}};o(Qy,"None");var Xy=Qy,jo=o(e=>new Yy(e),"some"),un=o(()=>new Xy,"none"),fu=o(e=>e instanceof Yy||e instanceof Xy?e:e==null?un():jo(e),"option"),eg=class{constructor(t){we(this,"_value"),this._value=t}[Symbol.iterator](){return this}next(){if(this._value==null)return{done:!0,value:void 0};let t=this._value;return this._value=null,{done:!1,value:t}}};o(eg,"ResultIterator");var tg=eg,rg=class{constructor(t){we(this,"_tag","Ok"),we(this,"_value"),this._value=t}get value(){return this._value}get error(){return null}isOk(){return!0}isOkAnd(t){return t(this.value)}isErr(){return!1}isErrAnd(t){return!1}ok(){return jo(this.value)}err(){return un()}expect(t){return this.value}expectErr(t){throw new Error(t)}unwrap(){return this.value}unwrapOr(t){return this.value}unwrapOrElse(t){return this.value}inspect(t){return t(this.value),this}inspectErr(){return this}map(t){return Se(t(this.value))}async mapAsync(t){return t(this.value).then(Se)}mapOr(t,r){return t(this.value)}async mapOrAsync(t,r){return t(this.value)}mapOrElse(t,r){return t(this.value)}async mapOrElseAsync(t,r){return t(this.value)}mapErr(t){return this}iter(){return new tg(this.value)}[Symbol.iterator](){return this.iter()}and(t){return t}andThen(t){return t(this.value)}or(t){return this}orElse(t){return this}async andThenAsync(t){return t(this.value)}toString(){return"Ok(".concat(this.value,")")}get[Symbol.toStringTag](){return"Ok"}};o(rg,"Ok");var zS=rg,ng=class og{constructor(t){we(this,"_tag","Err"),we(this,"_error"),this._error=t}get value(){return null}get error(){return this._error}isOk(){return!1}isOkAnd(t){return!1}isErr(){return!0}isErrAnd(t){return t(this.error)}ok(){return un()}err(){return jo(this.error)}expect(t){throw new Error(t)}expectErr(t){return this.error}unwrap(){throw this.error}unwrapOr(t){return t}unwrapOrElse(t){return t()}inspect(){return this}inspectErr(t){return t(this.error),this}map(t){return this}iter(){return new tg(null)}[Symbol.iterator](){return this.iter()}async mapAsync(t){return this}mapOr(t,r){return r}async mapOrAsync(t,r){return r}mapOrElse(t,r){return r()}async mapOrElseAsync(t,r){return r()}mapErr(t){return new og(t(this.error))}and(t){return this}andThen(t){return this}async andThenAsync(t){return this}or(t){return t}orElse(t){return t(this.error)}toString(){return"Err(".concat(this.error,")")}get[Symbol.toStringTag](){return"Err"}};o(ng,"Err");var VS=ng,Se=o(e=>new zS(e),"ok"),Fe=o(e=>new VS(e),"err");v();var mn;(function(e){e.GeometryMissingError="GeometryMissingError",e.FloorMissingError="FloorMissingError",e.UnknownFloorError="UnknownFloorError",e.UnknownGeometryError="UnknownGeometryError"})(mn||(mn={}));var KS=o(e=>{var t,r;return new Map((r=(t=e.floors)==null?void 0:t.features.map(n=>[n.properties.id,n]))!=null?r:[])},"createFloorMap"),va=o(e=>{let t=KS(e);return o(r=>{let n=t.get(r);return n==null?Fe({kind:mn.UnknownFloorError,properties:{floorId:r}}):Se(n)},"floorLookup")},"createFloorLookup");v();v();v();v();var Bt=o(e=>u.Unsafe(e),"PartialRecord");v();var yt=o(e=>Object.keys(e),"typedKeys");v();var GS=o(e=>{if(e.floors==null)return Fe({kind:mn.FloorMissingError,properties:null});if(e.geometry==null)return Fe({kind:mn.GeometryMissingError,properties:null});let t=va(e);for(let r of yt(e.geometry)){let n=t(r);if(n.isErr())return n}return Se(!0)},"validateGeometry"),ig=u.Intersect([u.Object({id:u.Ref(Kr)}),Ho],{$id:"GeometryProperties"}),ag=Hr(u.Union([u.Ref(Gr),u.Ref(By),u.Ref(qy),u.Ref(zy),u.Ref(pc),u.Ref(mc)]),u.Ref(ig),{$id:"GeometryFeature"}),sg=Fn(u.Ref(ag),{$id:"GeometryCollection"}),HS=u.Object({geometry:Bt(u.Record(xt,u.Ref(sg),{additionalProperties:!1}))},{$id:"GeometrySchema"}),WS=/^geometry\/(.*)\.geojson$/,JS={name:"core:geometry",schema:HS,intoBundle:o(function*(e){if(e.geometry!=null)for(let t of yt(e.geometry))yield{path:"geometry/".concat(t,".geojson"),contents:e.geometry[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n;let i=(n=e.match(WS))==null?void 0:n[1];if(i)return{geometry:{[i]:r(t)}}},"fromBundle"),references:[ig,ag,sg],integrityCheck:GS};v();v();var gt=o(e=>Object.entries(e),"typedEntries"),ZS=o(e=>{var t;let r=new Map;for(let[n,i]of gt((t=e.geometry)!=null?t:{}))r.set(n,new Map(i?.features.map(a=>[a.properties.id,a])));return r},"createLookupMap"),Wr=o(e=>{let t=ZS(e);return o((r,n)=>{let i=t.get(r);if(i==null)return Fe({kind:mn.UnknownFloorError,properties:{floorId:r}});let a=i.get(n);return a==null?Fe({kind:mn.UnknownGeometryError,properties:{floorId:r,geometryId:n}}):Se(a)},"geometryLookup")},"createGeometryLookup");v();var hc=u.Object({type:u.Literal("file"),name:u.String({description:"The name of the file."})},{$id:"ManifestFile"}),lg=u.Recursive(e=>u.Object({type:u.Literal("folder"),name:u.String({description:"The name of the folder."}),children:u.Array(u.Union([e,u.Ref(hc)]),{minItems:1,description:"The children of the folder."})}),{$id:"ManifestFolder"}),cg=u.Object({name:u.String({description:"The name of the map."}),version:u.Literal("3.0.0",{description:"The version of the manifest."}),orgId:u.Optional(u.String({description:"The identifier of the organization that the map this MVF is for belongs to."})),mapId:u.Optional(u.String({description:"The identifier of the map that this MVF is for."})),contents:u.Array(u.Union([u.Ref(lg),u.Ref(hc)]),{minItems:1,description:"The contents of the MVF bundle."}),time:u.String({format:"date-time",description:"An ISO 8601 date-time string, including timezone offset."}),tzid:u.Optional(u.Unsafe(u.String({description:"A valid IANA timezone identifier.",pattern:"^[A-Za-z0-9_-]+/[A-Za-z0-9_-]+$"}))),naturalBearing:u.Optional(u.Number({minimum:0,maximum:360,description:'The angle, in degrees, the map is considered to be "naturally oriented" as, rather than facing directly north. 90 degrees means East is "up"'})),defaultFloor:u.Optional(u.Ref(xt,{description:"The default floor ID of the map."})),language:u.Optional(u.String({description:"The language code of the map."}))},{$id:"ManifestProperties"}),ug=Fn(Hr(Gr,u.Ref(cg)),{$id:"ManifestCollection"},{minItems:1,maxItems:1}),YS=u.Object({manifest:u.Ref(ug)}),QS={name:"core:manifest",intoBundle:o(function*(e){e.manifest!=null&&(yield{path:"manifest.geojson",contents:e.manifest})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e==="manifest.geojson")return{manifest:r(t)}},"fromBundle"),schema:YS,references:[hc,lg,cg,ug]},fo=u.Object({geometryId:u.Ref(Kr)},{$id:"WithGeometryId"}),dg=u.Object({geometryIds:u.Array(u.Ref(Kr))},{$id:"WithGeometryIds"}),XS=[fo,dg];v();v();var eF=o((e,t)=>u.Unsafe(u.Transform(u.String(t)).Decode(r=>e.includes(r)?r:"unknown").Encode(r=>r)),"SafeStringEnumSchema"),Tn=o((e,t)=>{let r=eF(e,t),n=[...e,"unknown"],i=Object.freeze(Object.fromEntries([...e,"unknown"].map(a=>[a,a])));return{schema:r,values:n,record:i}},"SafeStringEnum");v();v();v();var Pi;(function(e){e.AnnotationNonPointGeometryError="AnnotationNonPointGeometryError",e.AnnotationUnknownSymbolError="AnnotationUnknownSymbolError"})(Pi||(Pi={}));var tF=o(e=>{var t;if(e.annotations==null)return Se(!0);let r=Wr(e),n=new Set(yt((t=e.annotationSymbols)!=null?t:{}));for(let i of yt(e.annotations)){let a=e.annotations[i];if(a!=null)for(let s of a){if(!n.has(s.symbolKey))return Fe({kind:Pi.AnnotationUnknownSymbolError,properties:{annotationId:s.id,symbolKey:s.symbolKey}});let l=r(i,s.geometryId);if(l.isErr())return l;if(l.value.geometry.type!=="Point")return Fe({kind:Pi.AnnotationNonPointGeometryError,properties:{annotationId:s.id,floorId:i,geometryId:s.geometryId}})}}return Se(!0)},"validateAnnotations"),fg=Mt("a","AnnotationId"),za=u.Intersect([fo,u.Object({id:u.Ref(fg,{description:"The unique identifier for the annotation."}),externalId:u.Optional(u.String({description:"The external identifier for the annotation."})),symbolKey:u.String({description:"The symbol identifier for the annotation."})})],{$id:"AnnotationProperties"}),pg=u.Object({url:u.String({format:"uri",description:"The URL for the symbol."}),name:u.String({description:"The name of the symbol."})},{$id:"AnnotationSymbol"}),rF=u.Object({annotations:Bt(u.Record(xt,u.Array(u.Ref(za)),{additionalProperties:!1})),annotationSymbols:Bt(u.Record(u.Index(za,["symbolKey"]),u.Ref(pg)))},{$id:"AnnotationsSchema"}),nF=/^annotations\/(.*)\.json$/,oF={name:"ext:mvf-annotations",schema:rF,intoBundle:o(function*(e){if(e.annotations!=null)for(let t of yt(e.annotations))yield{path:"annotations/".concat(t,".json"),contents:e.annotations[t]};e.annotationSymbols!=null&&(yield{path:"annotation-symbols.json",contents:e.annotationSymbols})},"intoBundle"),fromBundle:o((e,t,r)=>{var n;if(e==="annotation-symbols.json")return{annotationSymbols:r(t)};let i=(n=e.match(nF))==null?void 0:n[1];if(i)return{annotations:{[i]:r(t)}}},"fromBundle"),references:[fg,za,pg],integrityCheck:tF};v();v();v();v();v();v();v();v();var mg=class extends Xe{constructor(t){super("Duplicate type kind '".concat(t,"' detected"))}};o(mg,"TypeSystemDuplicateTypeKind");var iF=mg,hg=class extends Xe{constructor(t){super("Duplicate string format '".concat(t,"' detected"))}};o(hg,"TypeSystemDuplicateFormat");var yg=hg,Va;(function(e){function t(n,i){if(rr.Has(n))throw new iF(n);return rr.Set(n,i),(a={})=>cc(Me(oe({},a),{[fe]:n}))}o(t,"Type"),e.Type=t;function r(n,i){if(Ur.Has(n))throw new yg(n);return Ur.Set(n,i),n}o(r,"Format"),e.Format=r})(Va||(Va={}));v();v();v();function gg(e){switch(e.errorType){case Z.ArrayContains:return"Expected array to contain at least one matching value";case Z.ArrayMaxContains:return"Expected array to contain no more than ".concat(e.schema.maxContains," matching values");case Z.ArrayMinContains:return"Expected array to contain at least ".concat(e.schema.minContains," matching values");case Z.ArrayMaxItems:return"Expected array length to be less or equal to ".concat(e.schema.maxItems);case Z.ArrayMinItems:return"Expected array length to be greater or equal to ".concat(e.schema.minItems);case Z.ArrayUniqueItems:return"Expected array elements to be unique";case Z.Array:return"Expected array";case Z.AsyncIterator:return"Expected AsyncIterator";case Z.BigIntExclusiveMaximum:return"Expected bigint to be less than ".concat(e.schema.exclusiveMaximum);case Z.BigIntExclusiveMinimum:return"Expected bigint to be greater than ".concat(e.schema.exclusiveMinimum);case Z.BigIntMaximum:return"Expected bigint to be less or equal to ".concat(e.schema.maximum);case Z.BigIntMinimum:return"Expected bigint to be greater or equal to ".concat(e.schema.minimum);case Z.BigIntMultipleOf:return"Expected bigint to be a multiple of ".concat(e.schema.multipleOf);case Z.BigInt:return"Expected bigint";case Z.Boolean:return"Expected boolean";case Z.DateExclusiveMinimumTimestamp:return"Expected Date timestamp to be greater than ".concat(e.schema.exclusiveMinimumTimestamp);case Z.DateExclusiveMaximumTimestamp:return"Expected Date timestamp to be less than ".concat(e.schema.exclusiveMaximumTimestamp);case Z.DateMinimumTimestamp:return"Expected Date timestamp to be greater or equal to ".concat(e.schema.minimumTimestamp);case Z.DateMaximumTimestamp:return"Expected Date timestamp to be less or equal to ".concat(e.schema.maximumTimestamp);case Z.DateMultipleOfTimestamp:return"Expected Date timestamp to be a multiple of ".concat(e.schema.multipleOfTimestamp);case Z.Date:return"Expected Date";case Z.Function:return"Expected function";case Z.IntegerExclusiveMaximum:return"Expected integer to be less than ".concat(e.schema.exclusiveMaximum);case Z.IntegerExclusiveMinimum:return"Expected integer to be greater than ".concat(e.schema.exclusiveMinimum);case Z.IntegerMaximum:return"Expected integer to be less or equal to ".concat(e.schema.maximum);case Z.IntegerMinimum:return"Expected integer to be greater or equal to ".concat(e.schema.minimum);case Z.IntegerMultipleOf:return"Expected integer to be a multiple of ".concat(e.schema.multipleOf);case Z.Integer:return"Expected integer";case Z.IntersectUnevaluatedProperties:return"Unexpected property";case Z.Intersect:return"Expected all values to match";case Z.Iterator:return"Expected Iterator";case Z.Literal:return"Expected ".concat(typeof e.schema.const=="string"?"'".concat(e.schema.const,"'"):e.schema.const);case Z.Never:return"Never";case Z.Not:return"Value should not match";case Z.Null:return"Expected null";case Z.NumberExclusiveMaximum:return"Expected number to be less than ".concat(e.schema.exclusiveMaximum);case Z.NumberExclusiveMinimum:return"Expected number to be greater than ".concat(e.schema.exclusiveMinimum);case Z.NumberMaximum:return"Expected number to be less or equal to ".concat(e.schema.maximum);case Z.NumberMinimum:return"Expected number to be greater or equal to ".concat(e.schema.minimum);case Z.NumberMultipleOf:return"Expected number to be a multiple of ".concat(e.schema.multipleOf);case Z.Number:return"Expected number";case Z.Object:return"Expected object";case Z.ObjectAdditionalProperties:return"Unexpected property";case Z.ObjectMaxProperties:return"Expected object to have no more than ".concat(e.schema.maxProperties," properties");case Z.ObjectMinProperties:return"Expected object to have at least ".concat(e.schema.minProperties," properties");case Z.ObjectRequiredProperty:return"Expected required property";case Z.Promise:return"Expected Promise";case Z.RegExp:return"Expected string to match regular expression";case Z.StringFormatUnknown:return"Unknown format '".concat(e.schema.format,"'");case Z.StringFormat:return"Expected string to match '".concat(e.schema.format,"' format");case Z.StringMaxLength:return"Expected string length less or equal to ".concat(e.schema.maxLength);case Z.StringMinLength:return"Expected string length greater or equal to ".concat(e.schema.minLength);case Z.StringPattern:return"Expected string to match '".concat(e.schema.pattern,"'");case Z.String:return"Expected string";case Z.Symbol:return"Expected symbol";case Z.TupleLength:return"Expected tuple to have ".concat(e.schema.maxItems||0," elements");case Z.Tuple:return"Expected tuple";case Z.Uint8ArrayMaxByteLength:return"Expected byte length less or equal to ".concat(e.schema.maxByteLength);case Z.Uint8ArrayMinByteLength:return"Expected byte length greater or equal to ".concat(e.schema.minByteLength);case Z.Uint8Array:return"Expected Uint8Array";case Z.Undefined:return"Expected undefined";case Z.Union:return"Expected union value";case Z.Void:return"Expected void";case Z.Kind:return"Expected kind '".concat(e.schema[fe],"'");default:return"Unknown error type"}}o(gg,"DefaultErrorFunction");var aF=gg;function vg(){return aF}o(vg,"GetErrorFunction");v();var bg=class extends Xe{constructor(t){super("Unable to dereference schema with $id '".concat(t.$ref,"'")),this.schema=t}};o(bg,"TypeDereferenceError");var sF=bg;function Ig(e,t){let r=t.find(n=>n.$id===e.$ref);if(r===void 0)throw new sF(e);return lt(r,t)}o(Ig,"Resolve");function jn(e,t){return!Ze(e.$id)||t.some(r=>r.$id===e.$id)||t.push(e),t}o(jn,"Pushref");function lt(e,t){return e[fe]==="This"||e[fe]==="Ref"?Ig(e,t):e}o(lt,"Deref");v();var wg=class extends Xe{constructor(t){super("Unable to hash value"),this.value=t}};o(wg,"ValueHashError");var lF=wg,Qt;(function(e){e[e.Undefined=0]="Undefined",e[e.Null=1]="Null",e[e.Boolean=2]="Boolean",e[e.Number=3]="Number",e[e.String=4]="String",e[e.Object=5]="Object",e[e.Array=6]="Array",e[e.Date=7]="Date",e[e.Uint8Array=8]="Uint8Array",e[e.Symbol=9]="Symbol",e[e.BigInt=10]="BigInt"})(Qt||(Qt={}));var Ln=BigInt("14695981039346656037"),[cF,uF]=[BigInt("1099511628211"),BigInt("18446744073709551616")],dF=Array.from({length:256}).map((e,t)=>BigInt(t)),xg=new Float64Array(1),Og=new DataView(xg.buffer),Pg=new Uint8Array(xg.buffer);function*Eg(e){let t=e===0?1:Math.ceil(Math.floor(Math.log2(e)+1)/8);for(let r=0;r<t;r++)yield e>>8*(t-1-r)&255}o(Eg,"NumberToBytes");function Sg(e){kt(Qt.Array);for(let t of e)hn(t)}o(Sg,"ArrayType");function Fg(e){kt(Qt.Boolean),kt(e?1:0)}o(Fg,"BooleanType");function Tg(e){kt(Qt.BigInt),Og.setBigInt64(0,e);for(let t of Pg)kt(t)}o(Tg,"BigIntType");function jg(e){kt(Qt.Date),hn(e.getTime())}o(jg,"DateType");function kg(e){kt(Qt.Null)}o(kg,"NullType");function Ag(e){kt(Qt.Number),Og.setFloat64(0,e);for(let t of Pg)kt(t)}o(Ag,"NumberType");function Ng(e){kt(Qt.Object);for(let t of globalThis.Object.getOwnPropertyNames(e).sort())hn(t),hn(e[t])}o(Ng,"ObjectType");function _g(e){kt(Qt.String);for(let t=0;t<e.length;t++)for(let r of Eg(e.charCodeAt(t)))kt(r)}o(_g,"StringType");function $g(e){kt(Qt.Symbol),hn(e.description)}o($g,"SymbolType");function Rg(e){kt(Qt.Uint8Array);for(let t=0;t<e.length;t++)kt(e[t])}o(Rg,"Uint8ArrayType");function Cg(e){return kt(Qt.Undefined)}o(Cg,"UndefinedType");function hn(e){if(Ve(e))return Sg(e);if(vn(e))return Fg(e);if(Jt(e))return Tg(e);if(qr(e))return jg(e);if(Qn(e))return kg();if(Ee(e))return Ag(e);if(qe(e))return Ng(e);if(Ze(e))return _g(e);if(Xn(e))return $g(e);if(qi(e))return Rg(e);if(Vt(e))return Cg();throw new lF(e)}o(hn,"Visit");function kt(e){Ln=Ln^dF[e],Ln=Ln*cF%uF}o(kt,"FNV1A64");function Jo(e){return Ln=BigInt("14695981039346656037"),hn(e),Ln}o(Jo,"Hash");v();var Mg=class extends Xe{constructor(t){super("Unknown type"),this.schema=t}};o(Mg,"ValueCheckUnknownTypeError");var fF=Mg;function Lg(e){return e[fe]==="Any"||e[fe]==="Unknown"}o(Lg,"IsAnyOrUnknown");function _e(e){return e!==void 0}o(_e,"IsDefined");function Ug(e,t,r){return!0}o(Ug,"FromAny");function Dg(e,t,r){if(!Ve(r)||_e(e.minItems)&&!(r.length>=e.minItems)||_e(e.maxItems)&&!(r.length<=e.maxItems)||!r.every(a=>bt(e.items,t,a))||e.uniqueItems===!0&&!(function(){let a=new Set;for(let s of r){let l=Jo(s);if(a.has(l))return!1;a.add(l)}return!0})())return!1;if(!(_e(e.contains)||Ee(e.minContains)||Ee(e.maxContains)))return!0;let n=_e(e.contains)?e.contains:At(),i=r.reduce((a,s)=>bt(n,t,s)?a+1:a,0);return!(i===0||Ee(e.minContains)&&i<e.minContains||Ee(e.maxContains)&&i>e.maxContains)}o(Dg,"FromArray");function Bg(e,t,r){return Ns(r)}o(Bg,"FromAsyncIterator");function qg(e,t,r){return!(!Jt(r)||_e(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||_e(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||_e(e.maximum)&&!(r<=e.maximum)||_e(e.minimum)&&!(r>=e.minimum)||_e(e.multipleOf)&&r%e.multipleOf!==BigInt(0))}o(qg,"FromBigInt");function zg(e,t,r){return vn(r)}o(zg,"FromBoolean");function Vg(e,t,r){return bt(e.returns,t,r.prototype)}o(Vg,"FromConstructor");function Kg(e,t,r){return!(!qr(r)||_e(e.exclusiveMaximumTimestamp)&&!(r.getTime()<e.exclusiveMaximumTimestamp)||_e(e.exclusiveMinimumTimestamp)&&!(r.getTime()>e.exclusiveMinimumTimestamp)||_e(e.maximumTimestamp)&&!(r.getTime()<=e.maximumTimestamp)||_e(e.minimumTimestamp)&&!(r.getTime()>=e.minimumTimestamp)||_e(e.multipleOfTimestamp)&&r.getTime()%e.multipleOfTimestamp!==0)}o(Kg,"FromDate");function Gg(e,t,r){return Co(r)}o(Gg,"FromFunction");function Hg(e,t,r){return!(!Cs(r)||_e(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||_e(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||_e(e.maximum)&&!(r<=e.maximum)||_e(e.minimum)&&!(r>=e.minimum)||_e(e.multipleOf)&&r%e.multipleOf!==0)}o(Hg,"FromInteger");function Wg(e,t,r){let n=e.allOf.every(i=>bt(i,t,r));if(e.unevaluatedProperties===!1){let i=new RegExp(pn(e)),a=Object.getOwnPropertyNames(r).every(s=>i.test(s));return n&&a}else if(Ke(e.unevaluatedProperties)){let i=new RegExp(pn(e)),a=Object.getOwnPropertyNames(r).every(s=>i.test(s)||bt(e.unevaluatedProperties,t,r[s]));return n&&a}else return n}o(Wg,"FromIntersect");function Jg(e,t,r){return _s(r)}o(Jg,"FromIterator");function Zg(e,t,r){return r===e.const}o(Zg,"FromLiteral");function Yg(e,t,r){return!1}o(Yg,"FromNever");function Qg(e,t,r){return!bt(e.not,t,r)}o(Qg,"FromNot");function Xg(e,t,r){return Qn(r)}o(Xg,"FromNull");function ev(e,t,r){return!(!ut.IsNumberLike(r)||_e(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||_e(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||_e(e.minimum)&&!(r>=e.minimum)||_e(e.maximum)&&!(r<=e.maximum)||_e(e.multipleOf)&&r%e.multipleOf!==0)}o(ev,"FromNumber");function tv(e,t,r){if(!ut.IsObjectLike(r)||_e(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)||_e(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties))return!1;let n=Object.getOwnPropertyNames(e.properties);for(let i of n){let a=e.properties[i];if(e.required&&e.required.includes(i)){if(!bt(a,t,r[i])||(En(a)||Lg(a))&&!(i in r))return!1}else if(ut.IsExactOptionalProperty(r,i)&&!bt(a,t,r[i]))return!1}if(e.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return e.required&&e.required.length===n.length&&i.length===n.length?!0:i.every(a=>n.includes(a))}else return typeof e.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(i=>n.includes(i)||bt(e.additionalProperties,t,r[i])):!0}o(tv,"FromObject");function rv(e,t,r){return Rs(r)}o(rv,"FromPromise");function nv(e,t,r){if(!ut.IsRecordLike(r)||_e(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)||_e(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties))return!1;let[n,i]=Object.entries(e.patternProperties)[0],a=new RegExp(n),s=Object.entries(r).every(([c,p])=>a.test(c)?bt(i,t,p):!0),l=typeof e.additionalProperties=="object"?Object.entries(r).every(([c,p])=>a.test(c)?!0:bt(e.additionalProperties,t,p)):!0,d=e.additionalProperties===!1?Object.getOwnPropertyNames(r).every(c=>a.test(c)):!0;return s&&l&&d}o(nv,"FromRecord");function ov(e,t,r){return bt(lt(e,t),t,r)}o(ov,"FromRef");function iv(e,t,r){let n=new RegExp(e.source,e.flags);return _e(e.minLength)&&!(r.length>=e.minLength)||_e(e.maxLength)&&!(r.length<=e.maxLength)?!1:n.test(r)}o(iv,"FromRegExp");function av(e,t,r){return!Ze(r)||_e(e.minLength)&&!(r.length>=e.minLength)||_e(e.maxLength)&&!(r.length<=e.maxLength)||_e(e.pattern)&&!new RegExp(e.pattern).test(r)?!1:_e(e.format)?Ur.Has(e.format)?Ur.Get(e.format)(r):!1:!0}o(av,"FromString");function sv(e,t,r){return Xn(r)}o(sv,"FromSymbol");function lv(e,t,r){return Ze(r)&&new RegExp(e.pattern).test(r)}o(lv,"FromTemplateLiteral");function cv(e,t,r){return bt(lt(e,t),t,r)}o(cv,"FromThis");function uv(e,t,r){if(!Ve(r)||e.items===void 0&&r.length!==0||r.length!==e.maxItems)return!1;if(!e.items)return!0;for(let n=0;n<e.items.length;n++)if(!bt(e.items[n],t,r[n]))return!1;return!0}o(uv,"FromTuple");function dv(e,t,r){return Vt(r)}o(dv,"FromUndefined");function fv(e,t,r){return e.anyOf.some(n=>bt(n,t,r))}o(fv,"FromUnion");function pv(e,t,r){return!(!qi(r)||_e(e.maxByteLength)&&!(r.length<=e.maxByteLength)||_e(e.minByteLength)&&!(r.length>=e.minByteLength))}o(pv,"FromUint8Array");function mv(e,t,r){return!0}o(mv,"FromUnknown");function hv(e,t,r){return ut.IsVoidLike(r)}o(hv,"FromVoid");function yv(e,t,r){return rr.Has(e[fe])?rr.Get(e[fe])(e,r):!1}o(yv,"FromKind");function bt(e,t,r){let n=_e(e.$id)?[...t,e]:t,i=e;switch(i[fe]){case"Any":return Ug();case"Array":return Dg(i,n,r);case"AsyncIterator":return Bg(i,n,r);case"BigInt":return qg(i,n,r);case"Boolean":return zg(i,n,r);case"Constructor":return Vg(i,n,r);case"Date":return Kg(i,n,r);case"Function":return Gg(i,n,r);case"Integer":return Hg(i,n,r);case"Intersect":return Wg(i,n,r);case"Iterator":return Jg(i,n,r);case"Literal":return Zg(i,n,r);case"Never":return Yg();case"Not":return Qg(i,n,r);case"Null":return Xg(i,n,r);case"Number":return ev(i,n,r);case"Object":return tv(i,n,r);case"Promise":return rv(i,n,r);case"Record":return nv(i,n,r);case"Ref":return ov(i,n,r);case"RegExp":return iv(i,n,r);case"String":return av(i,n,r);case"Symbol":return sv(i,n,r);case"TemplateLiteral":return lv(i,n,r);case"This":return cv(i,n,r);case"Tuple":return uv(i,n,r);case"Undefined":return dv(i,n,r);case"Union":return fv(i,n,r);case"Uint8Array":return pv(i,n,r);case"Unknown":return mv();case"Void":return hv(i,n,r);default:if(!rr.Has(i[fe]))throw new fF(i);return yv(i,n,r)}}o(bt,"Visit");function Qe(...e){return e.length===3?bt(e[0],e[1],e[2]):bt(e[0],[],e[1])}o(Qe,"Check");var Z;(function(e){e[e.ArrayContains=0]="ArrayContains",e[e.ArrayMaxContains=1]="ArrayMaxContains",e[e.ArrayMaxItems=2]="ArrayMaxItems",e[e.ArrayMinContains=3]="ArrayMinContains",e[e.ArrayMinItems=4]="ArrayMinItems",e[e.ArrayUniqueItems=5]="ArrayUniqueItems",e[e.Array=6]="Array",e[e.AsyncIterator=7]="AsyncIterator",e[e.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",e[e.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",e[e.BigIntMaximum=10]="BigIntMaximum",e[e.BigIntMinimum=11]="BigIntMinimum",e[e.BigIntMultipleOf=12]="BigIntMultipleOf",e[e.BigInt=13]="BigInt",e[e.Boolean=14]="Boolean",e[e.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",e[e.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",e[e.DateMaximumTimestamp=17]="DateMaximumTimestamp",e[e.DateMinimumTimestamp=18]="DateMinimumTimestamp",e[e.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",e[e.Date=20]="Date",e[e.Function=21]="Function",e[e.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",e[e.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",e[e.IntegerMaximum=24]="IntegerMaximum",e[e.IntegerMinimum=25]="IntegerMinimum",e[e.IntegerMultipleOf=26]="IntegerMultipleOf",e[e.Integer=27]="Integer",e[e.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",e[e.Intersect=29]="Intersect",e[e.Iterator=30]="Iterator",e[e.Kind=31]="Kind",e[e.Literal=32]="Literal",e[e.Never=33]="Never",e[e.Not=34]="Not",e[e.Null=35]="Null",e[e.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",e[e.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",e[e.NumberMaximum=38]="NumberMaximum",e[e.NumberMinimum=39]="NumberMinimum",e[e.NumberMultipleOf=40]="NumberMultipleOf",e[e.Number=41]="Number",e[e.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",e[e.ObjectMaxProperties=43]="ObjectMaxProperties",e[e.ObjectMinProperties=44]="ObjectMinProperties",e[e.ObjectRequiredProperty=45]="ObjectRequiredProperty",e[e.Object=46]="Object",e[e.Promise=47]="Promise",e[e.RegExp=48]="RegExp",e[e.StringFormatUnknown=49]="StringFormatUnknown",e[e.StringFormat=50]="StringFormat",e[e.StringMaxLength=51]="StringMaxLength",e[e.StringMinLength=52]="StringMinLength",e[e.StringPattern=53]="StringPattern",e[e.String=54]="String",e[e.Symbol=55]="Symbol",e[e.TupleLength=56]="TupleLength",e[e.Tuple=57]="Tuple",e[e.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",e[e.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",e[e.Uint8Array=60]="Uint8Array",e[e.Undefined=61]="Undefined",e[e.Union=62]="Union",e[e.Void=63]="Void"})(Z||(Z={}));var gv=class extends Xe{constructor(t){super("Unknown type"),this.schema=t}};o(gv,"ValueErrorsUnknownTypeError");var pF=gv;function Sr(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}o(Sr,"EscapeKey");function Ne(e){return e!==void 0}o(Ne,"IsDefined");var vv=class{constructor(t){this.iterator=t}[Symbol.iterator](){return this.iterator}First(){let t=this.iterator.next();return t.done?void 0:t.value}};o(vv,"ValueErrorIterator");var po=vv;function me(e,t,r,n,i=[]){return{type:e,schema:t,path:r,value:n,message:vg()({errorType:e,path:r,schema:t,value:n,errors:i}),errors:i}}o(me,"Create");function*bv(e,t,r,n){}o(bv,"FromAny");function*Iv(e,t,r,n){if(!Ve(n))return yield me(Z.Array,e,r,n);Ne(e.minItems)&&!(n.length>=e.minItems)&&(yield me(Z.ArrayMinItems,e,r,n)),Ne(e.maxItems)&&!(n.length<=e.maxItems)&&(yield me(Z.ArrayMaxItems,e,r,n));for(let s=0;s<n.length;s++)yield*ce(It(e.items,t,"".concat(r,"/").concat(s),n[s]));if(e.uniqueItems===!0&&!(function(){let s=new Set;for(let l of n){let d=Jo(l);if(s.has(d))return!1;s.add(d)}return!0})()&&(yield me(Z.ArrayUniqueItems,e,r,n)),!(Ne(e.contains)||Ne(e.minContains)||Ne(e.maxContains)))return;let i=Ne(e.contains)?e.contains:At(),a=n.reduce((s,l,d)=>It(i,t,"".concat(r).concat(d),l).next().done===!0?s+1:s,0);a===0&&(yield me(Z.ArrayContains,e,r,n)),Ee(e.minContains)&&a<e.minContains&&(yield me(Z.ArrayMinContains,e,r,n)),Ee(e.maxContains)&&a>e.maxContains&&(yield me(Z.ArrayMaxContains,e,r,n))}o(Iv,"FromArray");function*wv(e,t,r,n){Ns(n)||(yield me(Z.AsyncIterator,e,r,n))}o(wv,"FromAsyncIterator");function*xv(e,t,r,n){if(!Jt(n))return yield me(Z.BigInt,e,r,n);Ne(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield me(Z.BigIntExclusiveMaximum,e,r,n)),Ne(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield me(Z.BigIntExclusiveMinimum,e,r,n)),Ne(e.maximum)&&!(n<=e.maximum)&&(yield me(Z.BigIntMaximum,e,r,n)),Ne(e.minimum)&&!(n>=e.minimum)&&(yield me(Z.BigIntMinimum,e,r,n)),Ne(e.multipleOf)&&n%e.multipleOf!==BigInt(0)&&(yield me(Z.BigIntMultipleOf,e,r,n))}o(xv,"FromBigInt");function*Ov(e,t,r,n){vn(n)||(yield me(Z.Boolean,e,r,n))}o(Ov,"FromBoolean");function*Pv(e,t,r,n){yield*ce(It(e.returns,t,r,n.prototype))}o(Pv,"FromConstructor");function*Ev(e,t,r,n){if(!qr(n))return yield me(Z.Date,e,r,n);Ne(e.exclusiveMaximumTimestamp)&&!(n.getTime()<e.exclusiveMaximumTimestamp)&&(yield me(Z.DateExclusiveMaximumTimestamp,e,r,n)),Ne(e.exclusiveMinimumTimestamp)&&!(n.getTime()>e.exclusiveMinimumTimestamp)&&(yield me(Z.DateExclusiveMinimumTimestamp,e,r,n)),Ne(e.maximumTimestamp)&&!(n.getTime()<=e.maximumTimestamp)&&(yield me(Z.DateMaximumTimestamp,e,r,n)),Ne(e.minimumTimestamp)&&!(n.getTime()>=e.minimumTimestamp)&&(yield me(Z.DateMinimumTimestamp,e,r,n)),Ne(e.multipleOfTimestamp)&&n.getTime()%e.multipleOfTimestamp!==0&&(yield me(Z.DateMultipleOfTimestamp,e,r,n))}o(Ev,"FromDate");function*Sv(e,t,r,n){Co(n)||(yield me(Z.Function,e,r,n))}o(Sv,"FromFunction");function*Fv(e,t,r,n){if(!Cs(n))return yield me(Z.Integer,e,r,n);Ne(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield me(Z.IntegerExclusiveMaximum,e,r,n)),Ne(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield me(Z.IntegerExclusiveMinimum,e,r,n)),Ne(e.maximum)&&!(n<=e.maximum)&&(yield me(Z.IntegerMaximum,e,r,n)),Ne(e.minimum)&&!(n>=e.minimum)&&(yield me(Z.IntegerMinimum,e,r,n)),Ne(e.multipleOf)&&n%e.multipleOf!==0&&(yield me(Z.IntegerMultipleOf,e,r,n))}o(Fv,"FromInteger");function*Tv(e,t,r,n){let i=!1;for(let a of e.allOf)for(let s of It(a,t,r,n))i=!0,yield s;if(i)return yield me(Z.Intersect,e,r,n);if(e.unevaluatedProperties===!1){let a=new RegExp(pn(e));for(let s of Object.getOwnPropertyNames(n))a.test(s)||(yield me(Z.IntersectUnevaluatedProperties,e,"".concat(r,"/").concat(s),n))}if(typeof e.unevaluatedProperties=="object"){let a=new RegExp(pn(e));for(let s of Object.getOwnPropertyNames(n))if(!a.test(s)){let l=It(e.unevaluatedProperties,t,"".concat(r,"/").concat(s),n[s]).next();l.done||(yield l.value)}}}o(Tv,"FromIntersect");function*jv(e,t,r,n){_s(n)||(yield me(Z.Iterator,e,r,n))}o(jv,"FromIterator");function*kv(e,t,r,n){n!==e.const&&(yield me(Z.Literal,e,r,n))}o(kv,"FromLiteral");function*Av(e,t,r,n){yield me(Z.Never,e,r,n)}o(Av,"FromNever");function*Nv(e,t,r,n){It(e.not,t,r,n).next().done===!0&&(yield me(Z.Not,e,r,n))}o(Nv,"FromNot");function*_v(e,t,r,n){Qn(n)||(yield me(Z.Null,e,r,n))}o(_v,"FromNull");function*$v(e,t,r,n){if(!ut.IsNumberLike(n))return yield me(Z.Number,e,r,n);Ne(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield me(Z.NumberExclusiveMaximum,e,r,n)),Ne(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield me(Z.NumberExclusiveMinimum,e,r,n)),Ne(e.maximum)&&!(n<=e.maximum)&&(yield me(Z.NumberMaximum,e,r,n)),Ne(e.minimum)&&!(n>=e.minimum)&&(yield me(Z.NumberMinimum,e,r,n)),Ne(e.multipleOf)&&n%e.multipleOf!==0&&(yield me(Z.NumberMultipleOf,e,r,n))}o($v,"FromNumber");function*Rv(e,t,r,n){if(!ut.IsObjectLike(n))return yield me(Z.Object,e,r,n);Ne(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)&&(yield me(Z.ObjectMinProperties,e,r,n)),Ne(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties)&&(yield me(Z.ObjectMaxProperties,e,r,n));let i=Array.isArray(e.required)?e.required:[],a=Object.getOwnPropertyNames(e.properties),s=Object.getOwnPropertyNames(n);for(let l of i)s.includes(l)||(yield me(Z.ObjectRequiredProperty,e.properties[l],"".concat(r,"/").concat(Sr(l)),void 0));if(e.additionalProperties===!1)for(let l of s)a.includes(l)||(yield me(Z.ObjectAdditionalProperties,e,"".concat(r,"/").concat(Sr(l)),n[l]));if(typeof e.additionalProperties=="object")for(let l of s)a.includes(l)||(yield*ce(It(e.additionalProperties,t,"".concat(r,"/").concat(Sr(l)),n[l])));for(let l of a){let d=e.properties[l];e.required&&e.required.includes(l)?(yield*ce(It(d,t,"".concat(r,"/").concat(Sr(l)),n[l])),En(e)&&!(l in n)&&(yield me(Z.ObjectRequiredProperty,d,"".concat(r,"/").concat(Sr(l)),void 0))):ut.IsExactOptionalProperty(n,l)&&(yield*ce(It(d,t,"".concat(r,"/").concat(Sr(l)),n[l])))}}o(Rv,"FromObject");function*Cv(e,t,r,n){Rs(n)||(yield me(Z.Promise,e,r,n))}o(Cv,"FromPromise");function*Mv(e,t,r,n){if(!ut.IsRecordLike(n))return yield me(Z.Object,e,r,n);Ne(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)&&(yield me(Z.ObjectMinProperties,e,r,n)),Ne(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties)&&(yield me(Z.ObjectMaxProperties,e,r,n));let[i,a]=Object.entries(e.patternProperties)[0],s=new RegExp(i);for(let[l,d]of Object.entries(n))s.test(l)&&(yield*ce(It(a,t,"".concat(r,"/").concat(Sr(l)),d)));if(typeof e.additionalProperties=="object")for(let[l,d]of Object.entries(n))s.test(l)||(yield*ce(It(e.additionalProperties,t,"".concat(r,"/").concat(Sr(l)),d)));if(e.additionalProperties===!1){for(let[l,d]of Object.entries(n))if(!s.test(l))return yield me(Z.ObjectAdditionalProperties,e,"".concat(r,"/").concat(Sr(l)),d)}}o(Mv,"FromRecord");function*Lv(e,t,r,n){yield*ce(It(lt(e,t),t,r,n))}o(Lv,"FromRef");function*Uv(e,t,r,n){if(!Ze(n))return yield me(Z.String,e,r,n);if(Ne(e.minLength)&&!(n.length>=e.minLength)&&(yield me(Z.StringMinLength,e,r,n)),Ne(e.maxLength)&&!(n.length<=e.maxLength)&&(yield me(Z.StringMaxLength,e,r,n)),!new RegExp(e.source,e.flags).test(n))return yield me(Z.RegExp,e,r,n)}o(Uv,"FromRegExp");function*Dv(e,t,r,n){if(!Ze(n))return yield me(Z.String,e,r,n);Ne(e.minLength)&&!(n.length>=e.minLength)&&(yield me(Z.StringMinLength,e,r,n)),Ne(e.maxLength)&&!(n.length<=e.maxLength)&&(yield me(Z.StringMaxLength,e,r,n)),Ze(e.pattern)&&(new RegExp(e.pattern).test(n)||(yield me(Z.StringPattern,e,r,n))),Ze(e.format)&&(Ur.Has(e.format)?Ur.Get(e.format)(n)||(yield me(Z.StringFormat,e,r,n)):yield me(Z.StringFormatUnknown,e,r,n))}o(Dv,"FromString");function*Bv(e,t,r,n){Xn(n)||(yield me(Z.Symbol,e,r,n))}o(Bv,"FromSymbol");function*qv(e,t,r,n){if(!Ze(n))return yield me(Z.String,e,r,n);new RegExp(e.pattern).test(n)||(yield me(Z.StringPattern,e,r,n))}o(qv,"FromTemplateLiteral");function*zv(e,t,r,n){yield*ce(It(lt(e,t),t,r,n))}o(zv,"FromThis");function*Vv(e,t,r,n){if(!Ve(n))return yield me(Z.Tuple,e,r,n);if(e.items===void 0&&n.length!==0)return yield me(Z.TupleLength,e,r,n);if(n.length!==e.maxItems)return yield me(Z.TupleLength,e,r,n);if(e.items)for(let i=0;i<e.items.length;i++)yield*ce(It(e.items[i],t,"".concat(r,"/").concat(i),n[i]))}o(Vv,"FromTuple");function*Kv(e,t,r,n){Vt(n)||(yield me(Z.Undefined,e,r,n))}o(Kv,"FromUndefined");function*Gv(e,t,r,n){if(Qe(e,t,n))return;let i=e.anyOf.map(a=>new po(It(a,t,r,n)));yield me(Z.Union,e,r,n,i)}o(Gv,"FromUnion");function*Hv(e,t,r,n){if(!qi(n))return yield me(Z.Uint8Array,e,r,n);Ne(e.maxByteLength)&&!(n.length<=e.maxByteLength)&&(yield me(Z.Uint8ArrayMaxByteLength,e,r,n)),Ne(e.minByteLength)&&!(n.length>=e.minByteLength)&&(yield me(Z.Uint8ArrayMinByteLength,e,r,n))}o(Hv,"FromUint8Array");function*Wv(e,t,r,n){}o(Wv,"FromUnknown");function*Jv(e,t,r,n){ut.IsVoidLike(n)||(yield me(Z.Void,e,r,n))}o(Jv,"FromVoid");function*Zv(e,t,r,n){rr.Get(e[fe])(e,n)||(yield me(Z.Kind,e,r,n))}o(Zv,"FromKind");function*It(e,t,r,n){let i=Ne(e.$id)?[...t,e]:t,a=e;switch(a[fe]){case"Any":return yield*ce(bv());case"Array":return yield*ce(Iv(a,i,r,n));case"AsyncIterator":return yield*ce(wv(a,i,r,n));case"BigInt":return yield*ce(xv(a,i,r,n));case"Boolean":return yield*ce(Ov(a,i,r,n));case"Constructor":return yield*ce(Pv(a,i,r,n));case"Date":return yield*ce(Ev(a,i,r,n));case"Function":return yield*ce(Sv(a,i,r,n));case"Integer":return yield*ce(Fv(a,i,r,n));case"Intersect":return yield*ce(Tv(a,i,r,n));case"Iterator":return yield*ce(jv(a,i,r,n));case"Literal":return yield*ce(kv(a,i,r,n));case"Never":return yield*ce(Av(a,i,r,n));case"Not":return yield*ce(Nv(a,i,r,n));case"Null":return yield*ce(_v(a,i,r,n));case"Number":return yield*ce($v(a,i,r,n));case"Object":return yield*ce(Rv(a,i,r,n));case"Promise":return yield*ce(Cv(a,i,r,n));case"Record":return yield*ce(Mv(a,i,r,n));case"Ref":return yield*ce(Lv(a,i,r,n));case"RegExp":return yield*ce(Uv(a,i,r,n));case"String":return yield*ce(Dv(a,i,r,n));case"Symbol":return yield*ce(Bv(a,i,r,n));case"TemplateLiteral":return yield*ce(qv(a,i,r,n));case"This":return yield*ce(zv(a,i,r,n));case"Tuple":return yield*ce(Vv(a,i,r,n));case"Undefined":return yield*ce(Kv(a,i,r,n));case"Union":return yield*ce(Gv(a,i,r,n));case"Uint8Array":return yield*ce(Hv(a,i,r,n));case"Unknown":return yield*ce(Wv());case"Void":return yield*ce(Jv(a,i,r,n));default:if(!rr.Has(a[fe]))throw new pF(e);return yield*ce(Zv(a,i,r,n))}}o(It,"Visit");function mo(...e){let t=e.length===3?It(e[0],e[1],"",e[2]):It(e[0],[],"",e[1]);return new po(t)}o(mo,"Errors");v();var mF=function(e,t,r,n,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r},Yv=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ka,Ei,Qv,Xv=class extends Xe{constructor(t){let r=t.First();super(r===void 0?"Invalid Value":r.message),Ka.add(this),Ei.set(this,void 0),mF(this,Ei,t),this.error=r}Errors(){return new po(Yv(this,Ka,"m",Qv).call(this))}};o(Xv,"AssertError");var hF=Xv;Ei=new WeakMap,Ka=new WeakSet,Qv=o(function*(){this.error&&(yield this.error),yield*ce(Yv(this,Ei,"f"))},"_AssertError_Iterator");function Ga(e,t,r){if(!Qe(e,t,r))throw new hF(mo(e,t,r))}o(Ga,"AssertValue");function yc(...e){return e.length===3?Ga(e[0],e[1],e[2]):Ga(e[0],[],e[1])}o(yc,"Assert");v();v();v();function eb(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=rt(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=rt(e[r]);return t}o(eb,"FromObject");function tb(e){return e.map(t=>rt(t))}o(tb,"FromArray");function rb(e){return e.slice()}o(rb,"FromTypedArray");function nb(e){return new Map(rt([...e.entries()]))}o(nb,"FromMap");function ob(e){return new Set(rt([...e.entries()]))}o(ob,"FromSet");function ib(e){return new Date(e.toISOString())}o(ib,"FromDate");function rt(e){if(Ve(e))return tb(e);if(qr(e))return ib(e);if(zr(e))return rb(e);if(Td(e))return nb(e);if(jd(e))return ob(e);if(qe(e))return eb(e);if(jr(e))return e;throw new Error("ValueClone: Unable to clone value")}o(rt,"Clone");var ab=class extends Xe{constructor(t,r){super(r),this.schema=t}};o(ab,"ValueCreateError");var cr=ab;function Le(e){return Co(e)?e():rt(e)}o(Le,"FromDefault");function sb(e,t){return Te(e,"default")?Le(e.default):{}}o(sb,"FromAny");function lb(e,t){if(e.uniqueItems===!0&&!Te(e,"default"))throw new cr(e,"Array with the uniqueItems constraint requires a default value");if("contains"in e&&!Te(e,"default"))throw new cr(e,"Array with the contains constraint requires a default value");return"default"in e?Le(e.default):e.minItems!==void 0?Array.from({length:e.minItems}).map(r=>qt(e.items,t)):[]}o(lb,"FromArray");function cb(e,t){return Te(e,"default")?Le(e.default):(function(){return IP(this,null,function*(){})})()}o(cb,"FromAsyncIterator");function ub(e,t){return Te(e,"default")?Le(e.default):BigInt(0)}o(ub,"FromBigInt");function db(e,t){return Te(e,"default")?Le(e.default):!1}o(db,"FromBoolean");function fb(e,t){if(Te(e,"default"))return Le(e.default);{let r=qt(e.returns,t);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let a=this;a[n]=i}}}:class{}}}o(fb,"FromConstructor");function pb(e,t){return Te(e,"default")?Le(e.default):e.minimumTimestamp!==void 0?new Date(e.minimumTimestamp):new Date}o(pb,"FromDate");function mb(e,t){return Te(e,"default")?Le(e.default):()=>qt(e.returns,t)}o(mb,"FromFunction");function hb(e,t){return Te(e,"default")?Le(e.default):e.minimum!==void 0?e.minimum:0}o(hb,"FromInteger");function yb(e,t){if(Te(e,"default"))return Le(e.default);{let r=e.allOf.reduce((n,i)=>{let a=qt(i,t);return typeof a=="object"?oe(oe({},n),a):a},{});if(!Qe(e,t,r))throw new cr(e,"Intersect produced invalid value. Consider using a default value.");return r}}o(yb,"FromIntersect");function gb(e,t){return Te(e,"default")?Le(e.default):(function*(){})()}o(gb,"FromIterator");function vb(e,t){return Te(e,"default")?Le(e.default):e.const}o(vb,"FromLiteral");function bb(e,t){if(Te(e,"default"))return Le(e.default);throw new cr(e,"Never types cannot be created. Consider using a default value.")}o(bb,"FromNever");function Ib(e,t){if(Te(e,"default"))return Le(e.default);throw new cr(e,"Not types must have a default value")}o(Ib,"FromNot");function wb(e,t){return Te(e,"default")?Le(e.default):null}o(wb,"FromNull");function xb(e,t){return Te(e,"default")?Le(e.default):e.minimum!==void 0?e.minimum:0}o(xb,"FromNumber");function Ob(e,t){if(Te(e,"default"))return Le(e.default);{let r=new Set(e.required),n={};for(let[i,a]of Object.entries(e.properties))r.has(i)&&(n[i]=qt(a,t));return n}}o(Ob,"FromObject");function Pb(e,t){return Te(e,"default")?Le(e.default):Promise.resolve(qt(e.item,t))}o(Pb,"FromPromise");function Eb(e,t){let[r,n]=Object.entries(e.patternProperties)[0];if(Te(e,"default"))return Le(e.default);if(r===zn||r===qn)return{};{let i=r.slice(1,r.length-1).split("|"),a={};for(let s of i)a[s]=qt(n,t);return a}}o(Eb,"FromRecord");function Sb(e,t){return Te(e,"default")?Le(e.default):qt(lt(e,t),t)}o(Sb,"FromRef");function Fb(e,t){if(Te(e,"default"))return Le(e.default);throw new cr(e,"RegExp types cannot be created. Consider using a default value.")}o(Fb,"FromRegExp");function Tb(e,t){if(e.pattern!==void 0){if(Te(e,"default"))return Le(e.default);throw new cr(e,"String types with patterns must specify a default value")}else if(e.format!==void 0){if(Te(e,"default"))return Le(e.default);throw new cr(e,"String types with formats must specify a default value")}else return Te(e,"default")?Le(e.default):e.minLength!==void 0?Array.from({length:e.minLength}).map(()=>" ").join(""):""}o(Tb,"FromString");function jb(e,t){return Te(e,"default")?Le(e.default):"value"in e?Symbol.for(e.value):Symbol()}o(jb,"FromSymbol");function kb(e,t){if(Te(e,"default"))return Le(e.default);if(!Al(e))throw new cr(e,"Can only create template literals that produce a finite variants. Consider using a default value.");return ta(e)[0]}o(kb,"FromTemplateLiteral");function Ab(e,t){if(Ub++>yF)throw new cr(e,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Te(e,"default")?Le(e.default):qt(lt(e,t),t)}o(Ab,"FromThis");function Nb(e,t){return Te(e,"default")?Le(e.default):e.items===void 0?[]:Array.from({length:e.minItems}).map((r,n)=>qt(e.items[n],t))}o(Nb,"FromTuple");function _b(e,t){if(Te(e,"default"))return Le(e.default)}o(_b,"FromUndefined");function $b(e,t){if(Te(e,"default"))return Le(e.default);if(e.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return qt(e.anyOf[0],t)}o($b,"FromUnion");function Rb(e,t){return Te(e,"default")?Le(e.default):e.minByteLength!==void 0?new Uint8Array(e.minByteLength):new Uint8Array(0)}o(Rb,"FromUint8Array");function Cb(e,t){return Te(e,"default")?Le(e.default):{}}o(Cb,"FromUnknown");function Mb(e,t){if(Te(e,"default"))return Le(e.default)}o(Mb,"FromVoid");function Lb(e,t){if(Te(e,"default"))return Le(e.default);throw new Error("User defined types must specify a default value")}o(Lb,"FromKind");function qt(e,t){let r=jn(e,t),n=e;switch(n[fe]){case"Any":return sb(n);case"Array":return lb(n,r);case"AsyncIterator":return cb(n);case"BigInt":return ub(n);case"Boolean":return db(n);case"Constructor":return fb(n,r);case"Date":return pb(n);case"Function":return mb(n,r);case"Integer":return hb(n);case"Intersect":return yb(n,r);case"Iterator":return gb(n);case"Literal":return vb(n);case"Never":return bb(n);case"Not":return Ib(n);case"Null":return wb(n);case"Number":return xb(n);case"Object":return Ob(n,r);case"Promise":return Pb(n,r);case"Record":return Eb(n,r);case"Ref":return Sb(n,r);case"RegExp":return Fb(n);case"String":return Tb(n);case"Symbol":return jb(n);case"TemplateLiteral":return kb(n);case"This":return Ab(n,r);case"Tuple":return Nb(n,r);case"Undefined":return _b(n);case"Union":return $b(n,r);case"Uint8Array":return Rb(n);case"Unknown":return Cb(n);case"Void":return Mb(n);default:if(!rr.Has(n[fe]))throw new cr(n,"Unknown type");return Lb(n)}}o(qt,"Visit");var yF=512,Ub=0;function ur(...e){return Ub=0,e.length===2?qt(e[0],e[1]):qt(e[0],[])}o(ur,"Create");var Db=class extends Xe{constructor(t,r){super(r),this.schema=t}};o(Db,"ValueCastError");var Bb=Db;function qb(e,t,r){if(e[fe]==="Object"&&typeof r=="object"&&!Qn(r)){let n=e,i=Object.getOwnPropertyNames(r),a=Object.entries(n.properties),[s,l]=[1/a.length,a.length];return a.reduce((d,[c,p])=>{let f=p[fe]==="Literal"&&p.const===r[c]?l:0,h=Qe(p,t,r[c])?s:0,w=i.includes(c)?s:0;return d+(f+h+w)},0)}else return Qe(e,t,r)?1:0}o(qb,"ScoreUnion");function zb(e,t,r){let n=e.anyOf.map(s=>lt(s,t)),[i,a]=[n[0],0];for(let s of n){let l=qb(s,t,r);l>a&&(i=s,a=l)}return i}o(zb,"SelectUnion");function Vb(e,t,r){if("default"in e)return typeof r=="function"?e.default:rt(e.default);{let n=zb(e,t,r);return gc(n,t,r)}}o(Vb,"CastUnion");function Kb(e,t,r){return Qe(e,t,r)?rt(r):ur(e,t)}o(Kb,"DefaultClone");function Gb(e,t,r){return Qe(e,t,r)?r:ur(e,t)}o(Gb,"Default");function Hb(e,t,r){if(Qe(e,t,r))return rt(r);let n=Ve(r)?rt(r):ur(e,t),i=Ee(e.minItems)&&n.length<e.minItems?[...n,...Array.from({length:e.minItems-n.length},()=>null)]:n,a=(Ee(e.maxItems)&&i.length>e.maxItems?i.slice(0,e.maxItems):i).map(l=>dr(e.items,t,l));if(e.uniqueItems!==!0)return a;let s=[...new Set(a)];if(!Qe(e,t,s))throw new Bb(e,"Array cast produced invalid data due to uniqueItems constraint");return s}o(Hb,"FromArray");function Wb(e,t,r){if(Qe(e,t,r))return ur(e,t);let n=new Set(e.returns.required||[]),i=o(function(){},"result");for(let[a,s]of Object.entries(e.returns.properties))!n.has(a)&&r.prototype[a]===void 0||(i.prototype[a]=dr(s,t,r.prototype[a]));return i}o(Wb,"FromConstructor");function Jb(e,t,r){let n=ur(e,t),i=qe(n)&&qe(r)?oe(oe({},n),r):r;return Qe(e,t,i)?i:ur(e,t)}o(Jb,"FromIntersect");function Zb(e,t,r){throw new Bb(e,"Never types cannot be cast")}o(Zb,"FromNever");function Yb(e,t,r){if(Qe(e,t,r))return r;if(r===null||typeof r!="object")return ur(e,t);let n=new Set(e.required||[]),i={};for(let[a,s]of Object.entries(e.properties))!n.has(a)&&r[a]===void 0||(i[a]=dr(s,t,r[a]));if(typeof e.additionalProperties=="object"){let a=Object.getOwnPropertyNames(e.properties);for(let s of Object.getOwnPropertyNames(r))a.includes(s)||(i[s]=dr(e.additionalProperties,t,r[s]))}return i}o(Yb,"FromObject");function Qb(e,t,r){if(Qe(e,t,r))return rt(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return ur(e,t);let n=Object.getOwnPropertyNames(e.patternProperties)[0],i=e.patternProperties[n],a={};for(let[s,l]of Object.entries(r))a[s]=dr(i,t,l);return a}o(Qb,"FromRecord");function Xb(e,t,r){return dr(lt(e,t),t,r)}o(Xb,"FromRef");function e0(e,t,r){return dr(lt(e,t),t,r)}o(e0,"FromThis");function t0(e,t,r){return Qe(e,t,r)?rt(r):Ve(r)?e.items===void 0?[]:e.items.map((n,i)=>dr(n,t,r[i])):ur(e,t)}o(t0,"FromTuple");function r0(e,t,r){return Qe(e,t,r)?rt(r):Vb(e,t,r)}o(r0,"FromUnion");function dr(e,t,r){let n=Ze(e.$id)?[...t,e]:t,i=e;switch(e[fe]){case"Array":return Hb(i,n,r);case"Constructor":return Wb(i,n,r);case"Intersect":return Jb(i,n,r);case"Never":return Zb(i);case"Object":return Yb(i,n,r);case"Record":return Qb(i,n,r);case"Ref":return Xb(i,n,r);case"This":return e0(i,n,r);case"Tuple":return t0(i,n,r);case"Union":return r0(i,n,r);case"Date":case"Symbol":case"Uint8Array":return Kb(e,t,r);default:return Gb(i,n,r)}}o(dr,"Visit");function gc(...e){return e.length===3?dr(e[0],e[1],e[2]):dr(e[0],[],e[1])}o(gc,"Cast");v();function n0(e){return wn(e)&&e[fe]!=="Unsafe"}o(n0,"IsCheckable");function o0(e,t,r){return Ve(r)?r.map(n=>zt(e.items,t,n)):r}o(o0,"FromArray");function i0(e,t,r){let n=e.unevaluatedProperties,i=e.allOf.map(s=>zt(s,t,rt(r))).reduce((s,l)=>qe(l)?oe(oe({},s),l):l,{});if(!qe(r)||!qe(i)||!wn(n))return i;let a=gr(e);for(let s of Object.getOwnPropertyNames(r))a.includes(s)||Qe(n,t,r[s])&&(i[s]=zt(n,t,r[s]));return i}o(i0,"FromIntersect");function a0(e,t,r){if(!qe(r)||Ve(r))return r;let n=e.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(Te(e.properties,i)){r[i]=zt(e.properties[i],t,r[i]);continue}if(wn(n)&&Qe(n,t,r[i])){r[i]=zt(n,t,r[i]);continue}delete r[i]}return r}o(a0,"FromObject");function s0(e,t,r){if(!qe(r))return r;let n=e.additionalProperties,i=Object.getOwnPropertyNames(r),[a,s]=Object.entries(e.patternProperties)[0],l=new RegExp(a);for(let d of i){if(l.test(d)){r[d]=zt(s,t,r[d]);continue}if(wn(n)&&Qe(n,t,r[d])){r[d]=zt(n,t,r[d]);continue}delete r[d]}return r}o(s0,"FromRecord");function l0(e,t,r){return zt(lt(e,t),t,r)}o(l0,"FromRef");function c0(e,t,r){return zt(lt(e,t),t,r)}o(c0,"FromThis");function u0(e,t,r){if(!Ve(r))return r;if(Vt(e.items))return[];let n=Math.min(r.length,e.items.length);for(let i=0;i<n;i++)r[i]=zt(e.items[i],t,r[i]);return r.length>n?r.slice(0,n):r}o(u0,"FromTuple");function d0(e,t,r){for(let n of e.anyOf)if(n0(n)&&Qe(n,t,r))return zt(n,t,r);return r}o(d0,"FromUnion");function zt(e,t,r){let n=Ze(e.$id)?[...t,e]:t,i=e;switch(i[fe]){case"Array":return o0(i,n,r);case"Intersect":return i0(i,n,r);case"Object":return a0(i,n,r);case"Record":return s0(i,n,r);case"Ref":return l0(i,n,r);case"This":return c0(i,n,r);case"Tuple":return u0(i,n,r);case"Union":return d0(i,n,r);default:return r}}o(zt,"Visit");function vc(...e){return e.length===3?zt(e[0],e[1],e[2]):zt(e[0],[],e[1])}o(vc,"Clean");v();function Zo(e){return Ze(e)&&!isNaN(e)&&!isNaN(parseFloat(e))}o(Zo,"IsStringNumeric");function f0(e){return Jt(e)||vn(e)||Ee(e)}o(f0,"IsValueToString");function ho(e){return e===!0||Ee(e)&&e===1||Jt(e)&&e===BigInt("1")||Ze(e)&&(e.toLowerCase()==="true"||e==="1")}o(ho,"IsValueTrue");function yo(e){return e===!1||Ee(e)&&(e===0||Object.is(e,-0))||Jt(e)&&e===BigInt("0")||Ze(e)&&(e.toLowerCase()==="false"||e==="0"||e==="-0")}o(yo,"IsValueFalse");function p0(e){return Ze(e)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e)}o(p0,"IsTimeStringWithTimeZone");function m0(e){return Ze(e)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e)}o(m0,"IsTimeStringWithoutTimeZone");function h0(e){return Ze(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e)}o(h0,"IsDateTimeStringWithTimeZone");function y0(e){return Ze(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e)}o(y0,"IsDateTimeStringWithoutTimeZone");function g0(e){return Ze(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e)}o(g0,"IsDateString");function v0(e,t){let r=Ic(e);return r===t?r:e}o(v0,"TryConvertLiteralString");function b0(e,t){let r=wc(e);return r===t?r:e}o(b0,"TryConvertLiteralNumber");function I0(e,t){let r=bc(e);return r===t?r:e}o(I0,"TryConvertLiteralBoolean");function w0(e,t){return Ze(e.const)?v0(t,e.const):Ee(e.const)?b0(t,e.const):vn(e.const)?I0(t,e.const):t}o(w0,"TryConvertLiteral");function bc(e){return ho(e)?!0:yo(e)?!1:e}o(bc,"TryConvertBoolean");function x0(e){let t=o(r=>r.split(".")[0],"truncateInteger");return Zo(e)?BigInt(t(e)):Ee(e)?BigInt(Math.trunc(e)):yo(e)?BigInt(0):ho(e)?BigInt(1):e}o(x0,"TryConvertBigInt");function Ic(e){return f0(e)?e.toString():Xn(e)&&e.description!==void 0?e.description.toString():e}o(Ic,"TryConvertString");function wc(e){return Zo(e)?parseFloat(e):ho(e)?1:yo(e)?0:e}o(wc,"TryConvertNumber");function O0(e){return Zo(e)?parseInt(e):Ee(e)?e|0:ho(e)?1:yo(e)?0:e}o(O0,"TryConvertInteger");function P0(e){return Ze(e)&&e.toLowerCase()==="null"?null:e}o(P0,"TryConvertNull");function E0(e){return Ze(e)&&e==="undefined"?void 0:e}o(E0,"TryConvertUndefined");function S0(e){return qr(e)?e:Ee(e)?new Date(e):ho(e)?new Date(1):yo(e)?new Date(0):Zo(e)?new Date(parseInt(e)):m0(e)?new Date("1970-01-01T".concat(e,".000Z")):p0(e)?new Date("1970-01-01T".concat(e)):y0(e)?new Date("".concat(e,".000Z")):h0(e)?new Date(e):g0(e)?new Date("".concat(e,"T00:00:00.000Z")):e}o(S0,"TryConvertDate");function F0(e,t,r){return(Ve(r)?r:[r]).map(n=>fr(e.items,t,n))}o(F0,"FromArray");function T0(e,t,r){return x0(r)}o(T0,"FromBigInt");function j0(e,t,r){return bc(r)}o(j0,"FromBoolean");function k0(e,t,r){return S0(r)}o(k0,"FromDate");function A0(e,t,r){return O0(r)}o(A0,"FromInteger");function N0(e,t,r){return e.allOf.reduce((n,i)=>fr(i,t,n),r)}o(N0,"FromIntersect");function _0(e,t,r){return w0(e,r)}o(_0,"FromLiteral");function $0(e,t,r){return P0(r)}o($0,"FromNull");function R0(e,t,r){return wc(r)}o(R0,"FromNumber");function C0(e,t,r){if(!qe(r))return r;for(let n of Object.getOwnPropertyNames(e.properties))Te(r,n)&&(r[n]=fr(e.properties[n],t,r[n]));return r}o(C0,"FromObject");function M0(e,t,r){if(!qe(r))return r;let n=Object.getOwnPropertyNames(e.patternProperties)[0],i=e.patternProperties[n];for(let[a,s]of Object.entries(r))r[a]=fr(i,t,s);return r}o(M0,"FromRecord");function L0(e,t,r){return fr(lt(e,t),t,r)}o(L0,"FromRef");function U0(e,t,r){return Ic(r)}o(U0,"FromString");function D0(e,t,r){return Ze(r)||Ee(r)?Symbol(r):r}o(D0,"FromSymbol");function B0(e,t,r){return fr(lt(e,t),t,r)}o(B0,"FromThis");function q0(e,t,r){return Ve(r)&&!Vt(e.items)?r.map((n,i)=>i<e.items.length?fr(e.items[i],t,n):n):r}o(q0,"FromTuple");function z0(e,t,r){return E0(r)}o(z0,"FromUndefined");function V0(e,t,r){for(let n of e.anyOf){let i=fr(n,t,rt(r));if(Qe(n,t,i))return i}return r}o(V0,"FromUnion");function fr(e,t,r){let n=jn(e,t),i=e;switch(e[fe]){case"Array":return F0(i,n,r);case"BigInt":return T0(i,n,r);case"Boolean":return j0(i,n,r);case"Date":return k0(i,n,r);case"Integer":return A0(i,n,r);case"Intersect":return N0(i,n,r);case"Literal":return _0(i,n,r);case"Null":return $0(i,n,r);case"Number":return R0(i,n,r);case"Object":return C0(i,n,r);case"Record":return M0(i,n,r);case"Ref":return L0(i,n,r);case"String":return U0(i,n,r);case"Symbol":return D0(i,n,r);case"This":return B0(i,n,r);case"Tuple":return q0(i,n,r);case"Undefined":return z0(i,n,r);case"Union":return V0(i,n,r);default:return r}}o(fr,"Visit");function xc(...e){return e.length===3?fr(e[0],e[1],e[2]):fr(e[0],[],e[1])}o(xc,"Convert");v();v();var K0=class extends Xe{constructor(t,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=t,this.value=r,this.error=n}};o(K0,"TransformDecodeCheckError");var G0=K0,H0=class extends Xe{constructor(t,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=t,this.path=r,this.value=n,this.error=i}};o(H0,"TransformDecodeError");var Oc=H0;function ot(e,t,r){try{return st(e)?e[Lt].Decode(r):r}catch(n){throw new Oc(e,t,r,n)}}o(ot,"Default");function W0(e,t,r,n){return Ve(n)?ot(e,r,n.map((i,a)=>br(e.items,t,"".concat(r,"/").concat(a),i))):ot(e,r,n)}o(W0,"FromArray");function J0(e,t,r,n){if(!qe(n)||jr(n))return ot(e,r,n);let i=Vo(e),a=i.map(p=>p[0]),s=oe({},n);for(let[p,f]of i)p in s&&(s[p]=br(f,t,"".concat(r,"/").concat(p),s[p]));if(!st(e.unevaluatedProperties))return ot(e,r,s);let l=Object.getOwnPropertyNames(s),d=e.unevaluatedProperties,c=oe({},s);for(let p of l)a.includes(p)||(c[p]=ot(d,"".concat(r,"/").concat(p),c[p]));return ot(e,r,c)}o(J0,"FromIntersect");function Z0(e,t,r,n){return ot(e,r,br(e.not,t,r,n))}o(Z0,"FromNot");function Y0(e,t,r,n){if(!qe(n))return ot(e,r,n);let i=gr(e),a=oe({},n);for(let c of i)Te(a,c)&&(Vt(a[c])&&(!Bo(e.properties[c])||ut.IsExactOptionalProperty(a,c))||(a[c]=br(e.properties[c],t,"".concat(r,"/").concat(c),a[c])));if(!Ke(e.additionalProperties))return ot(e,r,a);let s=Object.getOwnPropertyNames(a),l=e.additionalProperties,d=oe({},a);for(let c of s)i.includes(c)||(d[c]=ot(l,"".concat(r,"/").concat(c),d[c]));return ot(e,r,d)}o(Y0,"FromObject");function Q0(e,t,r,n){if(!qe(n))return ot(e,r,n);let i=Object.getOwnPropertyNames(e.patternProperties)[0],a=new RegExp(i),s=oe({},n);for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(s[p]=br(e.patternProperties[i],t,"".concat(r,"/").concat(p),s[p]));if(!Ke(e.additionalProperties))return ot(e,r,s);let l=Object.getOwnPropertyNames(s),d=e.additionalProperties,c=oe({},s);for(let p of l)a.test(p)||(c[p]=ot(d,"".concat(r,"/").concat(p),c[p]));return ot(e,r,c)}o(Q0,"FromRecord");function X0(e,t,r,n){let i=lt(e,t);return ot(e,r,br(i,t,r,n))}o(X0,"FromRef");function eI(e,t,r,n){let i=lt(e,t);return ot(e,r,br(i,t,r,n))}o(eI,"FromThis");function tI(e,t,r,n){return Ve(n)&&Ve(e.items)?ot(e,r,e.items.map((i,a)=>br(i,t,"".concat(r,"/").concat(a),n[a]))):ot(e,r,n)}o(tI,"FromTuple");function rI(e,t,r,n){for(let i of e.anyOf){if(!Qe(i,t,n))continue;let a=br(i,t,r,n);return ot(e,r,a)}return ot(e,r,n)}o(rI,"FromUnion");function br(e,t,r,n){let i=jn(e,t),a=e;switch(e[fe]){case"Array":return W0(a,i,r,n);case"Intersect":return J0(a,i,r,n);case"Not":return Z0(a,i,r,n);case"Object":return Y0(a,i,r,n);case"Record":return Q0(a,i,r,n);case"Ref":return X0(a,i,r,n);case"Symbol":return ot(a,r,n);case"This":return eI(a,i,r,n);case"Tuple":return tI(a,i,r,n);case"Union":return rI(a,i,r,n);default:return ot(a,r,n)}}o(br,"Visit");function ba(e,t,r){return br(e,t,"",r)}o(ba,"TransformDecode");v();var nI=class extends Xe{constructor(t,r,n){super("The encoded value does not match the expected schema"),this.schema=t,this.value=r,this.error=n}};o(nI,"TransformEncodeCheckError");var oI=nI,iI=class extends Xe{constructor(t,r,n,i){super("".concat(i instanceof Error?i.message:"Unknown error")),this.schema=t,this.path=r,this.value=n,this.error=i}};o(iI,"TransformEncodeError");var Pc=iI;function Ft(e,t,r){try{return st(e)?e[Lt].Encode(r):r}catch(n){throw new Pc(e,t,r,n)}}o(Ft,"Default");function aI(e,t,r,n){let i=Ft(e,r,n);return Ve(i)?i.map((a,s)=>pr(e.items,t,"".concat(r,"/").concat(s),a)):i}o(aI,"FromArray");function sI(e,t,r,n){let i=Ft(e,r,n);if(!qe(n)||jr(n))return i;let a=Vo(e),s=a.map(f=>f[0]),l=oe({},i);for(let[f,h]of a)f in l&&(l[f]=pr(h,t,"".concat(r,"/").concat(f),l[f]));if(!st(e.unevaluatedProperties))return l;let d=Object.getOwnPropertyNames(l),c=e.unevaluatedProperties,p=oe({},l);for(let f of d)s.includes(f)||(p[f]=Ft(c,"".concat(r,"/").concat(f),p[f]));return p}o(sI,"FromIntersect");function lI(e,t,r,n){return Ft(e.not,r,Ft(e,r,n))}o(lI,"FromNot");function cI(e,t,r,n){let i=Ft(e,r,n);if(!qe(i))return i;let a=gr(e),s=oe({},i);for(let p of a)Te(s,p)&&(Vt(s[p])&&(!Bo(e.properties[p])||ut.IsExactOptionalProperty(s,p))||(s[p]=pr(e.properties[p],t,"".concat(r,"/").concat(p),s[p])));if(!Ke(e.additionalProperties))return s;let l=Object.getOwnPropertyNames(s),d=e.additionalProperties,c=oe({},s);for(let p of l)a.includes(p)||(c[p]=Ft(d,"".concat(r,"/").concat(p),c[p]));return c}o(cI,"FromObject");function uI(e,t,r,n){let i=Ft(e,r,n);if(!qe(n))return i;let a=Object.getOwnPropertyNames(e.patternProperties)[0],s=new RegExp(a),l=oe({},i);for(let f of Object.getOwnPropertyNames(n))s.test(f)&&(l[f]=pr(e.patternProperties[a],t,"".concat(r,"/").concat(f),l[f]));if(!Ke(e.additionalProperties))return l;let d=Object.getOwnPropertyNames(l),c=e.additionalProperties,p=oe({},l);for(let f of d)s.test(f)||(p[f]=Ft(c,"".concat(r,"/").concat(f),p[f]));return p}o(uI,"FromRecord");function dI(e,t,r,n){let i=lt(e,t),a=pr(i,t,r,n);return Ft(e,r,a)}o(dI,"FromRef");function fI(e,t,r,n){let i=lt(e,t),a=pr(i,t,r,n);return Ft(e,r,a)}o(fI,"FromThis");function pI(e,t,r,n){let i=Ft(e,r,n);return Ve(e.items)?e.items.map((a,s)=>pr(a,t,"".concat(r,"/").concat(s),i[s])):[]}o(pI,"FromTuple");function mI(e,t,r,n){for(let i of e.anyOf){if(!Qe(i,t,n))continue;let a=pr(i,t,r,n);return Ft(e,r,a)}for(let i of e.anyOf){let a=pr(i,t,r,n);if(Qe(e,t,a))return Ft(e,r,a)}return Ft(e,r,n)}o(mI,"FromUnion");function pr(e,t,r,n){let i=jn(e,t),a=e;switch(e[fe]){case"Array":return aI(a,i,r,n);case"Intersect":return sI(a,i,r,n);case"Not":return lI(a,i,r,n);case"Object":return cI(a,i,r,n);case"Record":return uI(a,i,r,n);case"Ref":return dI(a,i,r,n);case"This":return fI(a,i,r,n);case"Tuple":return pI(a,i,r,n);case"Union":return mI(a,i,r,n);default:return Ft(a,r,n)}}o(pr,"Visit");function Ec(e,t,r){return pr(e,t,"",r)}o(Ec,"TransformEncode");v();function hI(e,t){return st(e)||vt(e.items,t)}o(hI,"FromArray");function yI(e,t){return st(e)||vt(e.items,t)}o(yI,"FromAsyncIterator");function gI(e,t){return st(e)||vt(e.returns,t)||e.parameters.some(r=>vt(r,t))}o(gI,"FromConstructor");function vI(e,t){return st(e)||vt(e.returns,t)||e.parameters.some(r=>vt(r,t))}o(vI,"FromFunction");function bI(e,t){return st(e)||st(e.unevaluatedProperties)||e.allOf.some(r=>vt(r,t))}o(bI,"FromIntersect");function II(e,t){return st(e)||vt(e.items,t)}o(II,"FromIterator");function wI(e,t){return st(e)||vt(e.not,t)}o(wI,"FromNot");function xI(e,t){return st(e)||Object.values(e.properties).some(r=>vt(r,t))||Ke(e.additionalProperties)&&vt(e.additionalProperties,t)}o(xI,"FromObject");function OI(e,t){return st(e)||vt(e.item,t)}o(OI,"FromPromise");function PI(e,t){let r=Object.getOwnPropertyNames(e.patternProperties)[0],n=e.patternProperties[r];return st(e)||vt(n,t)||Ke(e.additionalProperties)&&st(e.additionalProperties)}o(PI,"FromRecord");function EI(e,t){return st(e)?!0:vt(lt(e,t),t)}o(EI,"FromRef");function SI(e,t){return st(e)?!0:vt(lt(e,t),t)}o(SI,"FromThis");function FI(e,t){return st(e)||!Vt(e.items)&&e.items.some(r=>vt(r,t))}o(FI,"FromTuple");function TI(e,t){return st(e)||e.anyOf.some(r=>vt(r,t))}o(TI,"FromUnion");function vt(e,t){let r=jn(e,t),n=e;if(e.$id&&Ha.has(e.$id))return!1;switch(e.$id&&Ha.add(e.$id),e[fe]){case"Array":return hI(n,r);case"AsyncIterator":return yI(n,r);case"Constructor":return gI(n,r);case"Function":return vI(n,r);case"Intersect":return bI(n,r);case"Iterator":return II(n,r);case"Not":return wI(n,r);case"Object":return xI(n,r);case"Promise":return OI(n,r);case"Record":return PI(n,r);case"Ref":return EI(n,r);case"This":return SI(n,r);case"Tuple":return FI(n,r);case"Union":return TI(n,r);default:return st(e)}}o(vt,"Visit");var Ha=new Set;function go(e,t){return Ha.clear(),vt(e,t)}o(go,"HasTransform");function jI(...e){let[t,r,n]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]];if(!Qe(t,r,n))throw new G0(t,n,mo(t,r,n).First());return go(t,r)?ba(t,r,n):n}o(jI,"Decode");v();function kr(e,t){let r=Te(e,"default")?e.default:void 0,n=Co(r)?r():rt(r);return Vt(t)?n:qe(t)&&qe(n)?Object.assign(n,t):t}o(kr,"ValueOrDefault");function Si(e){return wn(e)&&"default"in e}o(Si,"HasDefaultProperty");function kI(e,t,r){let n=kr(e,r);if(!Ve(n))return n;for(let i=0;i<n.length;i++)n[i]=Ut(e.items,t,n[i]);return n}o(kI,"FromArray");function AI(e,t,r){return qr(r)?r:kr(e,r)}o(AI,"FromDate");function NI(e,t,r){let n=kr(e,r);return e.allOf.reduce((i,a)=>{let s=Ut(a,t,n);return qe(s)?oe(oe({},i),s):s},{})}o(NI,"FromIntersect");function _I(e,t,r){let n=kr(e,r);if(!qe(n))return n;let i=Object.getOwnPropertyNames(e.properties);for(let a of i){let s=Ut(e.properties[a],t,n[a]);Vt(s)||(n[a]=Ut(e.properties[a],t,n[a]))}if(!Si(e.additionalProperties))return n;for(let a of Object.getOwnPropertyNames(n))i.includes(a)||(n[a]=Ut(e.additionalProperties,t,n[a]));return n}o(_I,"FromObject");function $I(e,t,r){let n=kr(e,r);if(!qe(n))return n;let i=e.additionalProperties,[a,s]=Object.entries(e.patternProperties)[0],l=new RegExp(a);for(let d of Object.getOwnPropertyNames(n))l.test(d)&&Si(s)&&(n[d]=Ut(s,t,n[d]));if(!Si(i))return n;for(let d of Object.getOwnPropertyNames(n))l.test(d)||(n[d]=Ut(i,t,n[d]));return n}o($I,"FromRecord");function RI(e,t,r){return Ut(lt(e,t),t,kr(e,r))}o(RI,"FromRef");function CI(e,t,r){return Ut(lt(e,t),t,r)}o(CI,"FromThis");function MI(e,t,r){let n=kr(e,r);if(!Ve(n)||Vt(e.items))return n;let[i,a]=[e.items,Math.max(e.items.length,n.length)];for(let s=0;s<a;s++)s<i.length&&(n[s]=Ut(i[s],t,n[s]));return n}o(MI,"FromTuple");function LI(e,t,r){let n=kr(e,r);for(let i of e.anyOf){let a=Ut(i,t,rt(n));if(Qe(i,t,a))return a}return n}o(LI,"FromUnion");function Ut(e,t,r){let n=jn(e,t),i=e;switch(i[fe]){case"Array":return kI(i,n,r);case"Date":return AI(i,n,r);case"Intersect":return NI(i,n,r);case"Object":return _I(i,n,r);case"Record":return $I(i,n,r);case"Ref":return RI(i,n,r);case"This":return CI(i,n,r);case"Tuple":return MI(i,n,r);case"Union":return LI(i,n,r);default:return kr(i,r)}}o(Ut,"Visit");function Sc(...e){return e.length===3?Ut(e[0],e[1],e[2]):Ut(e[0],[],e[1])}o(Sc,"Default");v();v();var Qr={};yn(Qr,{Delete:()=>VI,Format:()=>vo,Get:()=>GI,Has:()=>KI,Set:()=>zI,ValuePointerRootDeleteError:()=>qI,ValuePointerRootSetError:()=>DI});v();var UI=class extends Xe{constructor(t,r,n){super("Cannot set root value"),this.value=t,this.path=r,this.update=n}};o(UI,"ValuePointerRootSetError");var DI=UI,BI=class extends Xe{constructor(t,r){super("Cannot delete root value"),this.value=t,this.path=r}};o(BI,"ValuePointerRootDeleteError");var qI=BI;function Wa(e){return e.indexOf("~")===-1?e:e.replace(/~1/g,"/").replace(/~0/g,"~")}o(Wa,"Escape");function*vo(e){if(e==="")return;let[t,r]=[0,0];for(let n=0;n<e.length;n++)e.charAt(n)==="/"?(n===0||(r=n,yield Wa(e.slice(t,r))),t=n+1):r=n;yield Wa(e.slice(t))}o(vo,"Format");function zI(e,t,r){if(t==="")throw new DI(e,t,r);let[n,i,a]=[null,e,""];for(let s of vo(t))i[s]===void 0&&(i[s]={}),n=i,i=i[s],a=s;n[a]=r}o(zI,"Set");function VI(e,t){if(t==="")throw new qI(e,t);let[r,n,i]=[null,e,""];for(let a of vo(t)){if(n[a]===void 0||n[a]===null)return;r=n,n=n[a],i=a}if(Array.isArray(r)){let a=parseInt(i);r.splice(a,1)}else delete r[i]}o(VI,"Delete");function KI(e,t){if(t==="")return!0;let[r,n,i]=[null,e,""];for(let a of vo(t)){if(n[a]===void 0)return!1;r=n,n=n[a],i=a}return Object.getOwnPropertyNames(r).includes(i)}o(KI,"Has");function GI(e,t){if(t==="")return e;let r=e;for(let n of vo(t)){if(r[n]===void 0)return;r=r[n]}return r}o(GI,"Get");v();function HI(e,t){if(!qe(t))return!1;let r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)];return r.length!==n.length?!1:r.every(i=>bo(e[i],t[i]))}o(HI,"ObjectType");function WI(e,t){return qr(t)&&e.getTime()===t.getTime()}o(WI,"DateType");function JI(e,t){return!Ve(t)||e.length!==t.length?!1:e.every((r,n)=>bo(r,t[n]))}o(JI,"ArrayType");function ZI(e,t){return!zr(t)||e.length!==t.length||Object.getPrototypeOf(e).constructor.name!==Object.getPrototypeOf(t).constructor.name?!1:e.every((r,n)=>bo(r,t[n]))}o(ZI,"TypedArrayType");function YI(e,t){return e===t}o(YI,"ValueType");function bo(e,t){if(qr(e))return WI(e,t);if(zr(e))return ZI(e,t);if(Ve(e))return JI(e,t);if(qe(e))return HI(e,t);if(jr(e))return YI(e,t);throw new Error("ValueEquals: Unable to compare value")}o(bo,"Equal");var gF=wt({type:dt("insert"),path:Dr(),value:so()}),vF=wt({type:dt("update"),path:Dr(),value:so()}),bF=wt({type:dt("delete"),path:Dr()}),IF=_t([gF,vF,bF]),QI=class extends Xe{constructor(t,r){super(r),this.value=t}};o(QI,"ValueDiffError");var XI=QI;function Yo(e,t){return{type:"update",path:e,value:t}}o(Yo,"CreateUpdate");function Fc(e,t){return{type:"insert",path:e,value:t}}o(Fc,"CreateInsert");function Tc(e){return{type:"delete",path:e}}o(Tc,"CreateDelete");function Ja(e){if(globalThis.Object.getOwnPropertySymbols(e).length>0)throw new XI(e,"Cannot diff objects with symbols")}o(Ja,"AssertDiffable");function*ew(e,t,r){if(Ja(t),Ja(r),!$s(r))return yield Yo(e,r);let n=globalThis.Object.getOwnPropertyNames(t),i=globalThis.Object.getOwnPropertyNames(r);for(let a of i)Te(t,a)||(yield Fc("".concat(e,"/").concat(a),r[a]));for(let a of n)Te(r,a)&&(bo(t,r)||(yield*ce(Qo("".concat(e,"/").concat(a),t[a],r[a]))));for(let a of n)Te(r,a)||(yield Tc("".concat(e,"/").concat(a)))}o(ew,"ObjectType");function*tw(e,t,r){if(!Ve(r))return yield Yo(e,r);for(let n=0;n<Math.min(t.length,r.length);n++)yield*ce(Qo("".concat(e,"/").concat(n),t[n],r[n]));for(let n=0;n<r.length;n++)n<t.length||(yield Fc("".concat(e,"/").concat(n),r[n]));for(let n=t.length-1;n>=0;n--)n<r.length||(yield Tc("".concat(e,"/").concat(n)))}o(tw,"ArrayType");function*rw(e,t,r){if(!zr(r)||t.length!==r.length||globalThis.Object.getPrototypeOf(t).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield Yo(e,r);for(let n=0;n<Math.min(t.length,r.length);n++)yield*ce(Qo("".concat(e,"/").concat(n),t[n],r[n]))}o(rw,"TypedArrayType");function*nw(e,t,r){t!==r&&(yield Yo(e,r))}o(nw,"ValueType");function*Qo(e,t,r){if($s(t))return yield*ce(ew(e,t,r));if(Ve(t))return yield*ce(tw(e,t,r));if(zr(t))return yield*ce(rw(e,t,r));if(jr(t))return yield*ce(nw(e,t,r));throw new XI(t,"Unable to diff value")}o(Qo,"Visit");function ow(e,t){return[...Qo("",e,t)]}o(ow,"Diff");function iw(e){return e.length>0&&e[0].path===""&&e[0].type==="update"}o(iw,"IsRootUpdate");function aw(e){return e.length===0}o(aw,"IsIdentity");function sw(e,t){if(iw(t))return rt(t[0].value);if(aw(t))return rt(e);let r=rt(e);for(let n of t)switch(n.type){case"insert":{Qr.Set(r,n.path,n.value);break}case"update":{Qr.Set(r,n.path,n.value);break}case"delete":{Qr.Delete(r,n.path);break}}return r}o(sw,"Patch");v();function lw(...e){let[t,r,n]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]],i=go(t,r)?Ec(t,r,n):n;if(!Qe(t,r,i))throw new oI(t,i,mo(t,r,i).First());return i}o(lw,"Encode");v();var cw=class extends Xe{constructor(t){super(t)}};o(cw,"ValueMutateError");var pu=cw;function uw(e,t,r,n){if(!qe(r))Qr.Set(e,t,rt(n));else{let i=Object.getOwnPropertyNames(r),a=Object.getOwnPropertyNames(n);for(let s of i)a.includes(s)||delete r[s];for(let s of a)i.includes(s)||(r[s]=null);for(let s of a)Ia(e,"".concat(t,"/").concat(s),r[s],n[s])}}o(uw,"ObjectType");function dw(e,t,r,n){if(!Ve(r))Qr.Set(e,t,rt(n));else{for(let i=0;i<n.length;i++)Ia(e,"".concat(t,"/").concat(i),r[i],n[i]);r.splice(n.length)}}o(dw,"ArrayType");function fw(e,t,r,n){if(zr(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else Qr.Set(e,t,rt(n))}o(fw,"TypedArrayType");function pw(e,t,r,n){r!==n&&Qr.Set(e,t,n)}o(pw,"ValueType");function Ia(e,t,r,n){if(Ve(n))return dw(e,t,r,n);if(zr(n))return fw(e,t,r,n);if(qe(n))return uw(e,t,r,n);if(jr(n))return pw(e,t,r,n)}o(Ia,"Visit");function Za(e){return zr(e)||jr(e)}o(Za,"IsNonMutableValue");function mw(e,t){return qe(e)&&Ve(t)||Ve(e)&&qe(t)}o(mw,"IsMismatchedValue");function hw(e,t){if(Za(e)||Za(t))throw new pu("Only object and array types can be mutated at the root level");if(mw(e,t))throw new pu("Cannot assign due type mismatch of assignable values");Ia(e,"",e,t)}o(hw,"Mutate");v();var wF=[(e,t,r)=>rt(r),(e,t,r)=>Sc(e,t,r),(e,t,r)=>vc(e,t,r),(e,t,r)=>xc(e,t,r),(e,t,r)=>(yc(e,t,r),r),(e,t,r)=>go(e,t)?ba(e,t,r):r];function Ya(e,t,r){return wF.reduce((n,i)=>i(e,t,n),r)}o(Ya,"ParseValue");function yw(...e){return e.length===3?Ya(e[0],e[1],e[2]):Ya(e[0],[],e[1])}o(yw,"Parse");v();var Fi={};yn(Fi,{Assert:()=>yc,Cast:()=>gc,Check:()=>Qe,Clean:()=>vc,Clone:()=>rt,Convert:()=>xc,Create:()=>ur,Decode:()=>jI,Default:()=>Sc,Diff:()=>ow,Edit:()=>IF,Encode:()=>lw,Equal:()=>bo,Errors:()=>mo,Hash:()=>Jo,Mutate:()=>hw,Parse:()=>yw,Patch:()=>sw,ValueErrorIterator:()=>po});v();v();var gw=class extends Xe{constructor(t){super("Unable to dereference schema with $id '".concat(t.$ref,"'")),we(this,"schema"),this.schema=t}};o(gw,"TypeDereferenceError");var xF=gw;function vw(e,t){let r=t.find(n=>n.$id===e.$ref);if(r===void 0)throw new xF(e);return Io(r,t)}o(vw,"Resolve");function jc(e,t){return!nt.IsString(e.$id)||t.some(r=>r.$id===e.$id)||t.push(e),t}o(jc,"Pushref");function Io(e,t){return e[fe]==="This"||e[fe]==="Ref"?vw(e,t):e}o(Io,"Deref");v();function bw(e,t,r){let n=e.get(t);if(n!==void 0)return n;let i=go(t,r);return e.set(t,i),i}o(bw,"HasTransformCached");function kc(){let e=new WeakMap;return{HasTransform:o((t,r)=>bw(e,t,r),"HasTransform")}}o(kc,"CreateTransformCache");function it(e,t,r){try{return U.IsTransform(e)?e[Lt].Decode(r):r}catch(n){throw new Oc(e,t,r,n)}}o(it,"Default");function Iw(e,t,r,n,i){return nt.IsArray(n)?it(e,r,n.map((a,s)=>Ir(e.items,t,"".concat(r,"/").concat(s),a,i))):it(e,r,n)}o(Iw,"FromArray");function ww(e,t,r,n,i){if(!nt.IsObject(n)||jr(n))return it(e,r,n);let a=Vo(e),s=a.map(f=>f[0]),l=oe({},n);for(let[f,h]of a)f in l&&(l[f]=Ir(h,t,"".concat(r,"/").concat(f),l[f],i));if(!U.IsTransform(e.unevaluatedProperties))return it(e,r,l);let d=Object.getOwnPropertyNames(l),c=e.unevaluatedProperties,p=oe({},l);for(let f of d)s.includes(f)||(p[f]=it(c,"".concat(r,"/").concat(f),p[f]));return it(e,r,p)}o(ww,"FromIntersect");function xw(e,t,r,n,i){return it(e,r,Ir(e.not,t,r,n,i))}o(xw,"FromNot");function Ow(e,t,r,n,i){if(!nt.IsObject(n))return it(e,r,n);let a=gr(e),s=oe({},n);for(let p of a)nt.HasPropertyKey(s,p)&&(nt.IsUndefined(s[p])&&(!U.IsUndefined(e.properties[p])||ut.IsExactOptionalProperty(s,p))||(s[p]=Ir(e.properties[p],t,"".concat(r,"/").concat(p),s[p],i)));if(!U.IsSchema(e.additionalProperties))return it(e,r,s);let l=Object.getOwnPropertyNames(s),d=e.additionalProperties,c=oe({},s);for(let p of l)a.includes(p)||(c[p]=it(d,"".concat(r,"/").concat(p),c[p]));return it(e,r,c)}o(Ow,"FromObject");function Pw(e,t,r,n,i){if(!nt.IsObject(n))return it(e,r,n);let a=Object.getOwnPropertyNames(e.patternProperties)[0],s=new RegExp(a),l=oe({},n);for(let f of Object.getOwnPropertyNames(n))s.test(f)&&(l[f]=Ir(e.patternProperties[a],t,"".concat(r,"/").concat(f),l[f],i));if(!U.IsSchema(e.additionalProperties))return it(e,r,l);let d=Object.getOwnPropertyNames(l),c=e.additionalProperties,p=oe({},l);for(let f of d)s.test(f)||(p[f]=it(c,"".concat(r,"/").concat(f),p[f]));return it(e,r,p)}o(Pw,"FromRecord");function Ew(e,t,r,n,i){let a=Io(e,t);return it(e,r,Ir(a,t,r,n,i))}o(Ew,"FromRef");function Sw(e,t,r,n,i){let a=Io(e,t);return it(e,r,Ir(a,t,r,n,i))}o(Sw,"FromThis");function Fw(e,t,r,n,i){return nt.IsArray(n)&&nt.IsArray(e.items)?it(e,r,e.items.map((a,s)=>Ir(a,t,"".concat(r,"/").concat(s),n[s],i))):it(e,r,n)}o(Fw,"FromTuple");function Tw(e,t,r,n,i){for(let a of e.anyOf){if(!Fi.Check(a,t,n))continue;let s=Ir(a,t,r,n,i);return it(e,r,s)}return it(e,r,n)}o(Tw,"FromUnion");function Ir(e,t,r,n,i){if(!i.HasTransform(e,t))return n;let a=jc(e,t),s=e;switch(e[fe]){case"Array":return Iw(s,a,r,n,i);case"Intersect":return ww(s,a,r,n,i);case"Not":return xw(s,a,r,n,i);case"Object":return Ow(s,a,r,n,i);case"Record":return Pw(s,a,r,n,i);case"Ref":return Ew(s,a,r,n,i);case"Symbol":return it(s,r,n);case"This":return Sw(s,a,r,n,i);case"Tuple":return Fw(s,a,r,n,i);case"Union":return Tw(s,a,r,n,i);default:return it(s,r,n)}}o(Ir,"Visit");function jw(e,t,r){let n=kc();return Ir(e,t,"",r,n)}o(jw,"FastTransformDecode");v();function Tt(e,t,r){try{return U.IsTransform(e)?e[Lt].Encode(r):r}catch(n){throw new Pc(e,t,r,n)}}o(Tt,"Default");function kw(e,t,r,n,i){let a=Tt(e,r,n);return nt.IsArray(a)?a.map((s,l)=>mr(e.items,t,"".concat(r,"/").concat(l),s,i)):a}o(kw,"FromArray");function Aw(e,t,r,n,i){let a=Tt(e,r,n);if(!nt.IsObject(n)||jr(n))return a;let s=Vo(e),l=s.map(h=>h[0]),d=oe({},a);for(let[h,w]of s)h in d&&(d[h]=mr(w,t,"".concat(r,"/").concat(h),d[h],i));if(!U.IsTransform(e.unevaluatedProperties))return d;let c=Object.getOwnPropertyNames(d),p=e.unevaluatedProperties,f=oe({},d);for(let h of c)l.includes(h)||(f[h]=Tt(p,"".concat(r,"/").concat(h),f[h]));return f}o(Aw,"FromIntersect");function Nw(e,t,r,n){return Tt(e.not,r,Tt(e,r,n))}o(Nw,"FromNot");function _w(e,t,r,n,i){let a=Tt(e,r,n);if(!nt.IsObject(a))return a;let s=gr(e),l=oe({},a);for(let f of s)nt.HasPropertyKey(l,f)&&(nt.IsUndefined(l[f])&&(!U.IsUndefined(e.properties[f])||ut.IsExactOptionalProperty(l,f))||(l[f]=mr(e.properties[f],t,"".concat(r,"/").concat(f),l[f],i)));if(!U.IsSchema(e.additionalProperties))return l;let d=Object.getOwnPropertyNames(l),c=e.additionalProperties,p=oe({},l);for(let f of d)s.includes(f)||(p[f]=Tt(c,"".concat(r,"/").concat(f),p[f]));return p}o(_w,"FromObject");function $w(e,t,r,n,i){let a=Tt(e,r,n);if(!nt.IsObject(n))return a;let s=Object.getOwnPropertyNames(e.patternProperties)[0],l=new RegExp(s),d=oe({},a);for(let h of Object.getOwnPropertyNames(n))l.test(h)&&(d[h]=mr(e.patternProperties[s],t,"".concat(r,"/").concat(h),d[h],i));if(!U.IsSchema(e.additionalProperties))return d;let c=Object.getOwnPropertyNames(d),p=e.additionalProperties,f=oe({},d);for(let h of c)l.test(h)||(f[h]=Tt(p,"".concat(r,"/").concat(h),f[h]));return f}o($w,"FromRecord");function Rw(e,t,r,n,i){let a=Io(e,t),s=mr(a,t,r,n,i);return Tt(e,r,s)}o(Rw,"FromRef");function Cw(e,t,r,n,i){let a=Io(e,t),s=mr(a,t,r,n,i);return Tt(e,r,s)}o(Cw,"FromThis");function Mw(e,t,r,n,i){let a=Tt(e,r,n);return nt.IsArray(e.items)?e.items.map((s,l)=>mr(s,t,"".concat(r,"/").concat(l),a[l],i)):[]}o(Mw,"FromTuple");function Lw(e,t,r,n,i){for(let a of e.anyOf){if(!Fi.Check(a,t,n))continue;let s=mr(a,t,r,n,i);return Tt(e,r,s)}for(let a of e.anyOf){let s=mr(a,t,r,n,i);if(Fi.Check(e,t,s))return Tt(e,r,s)}return Tt(e,r,n)}o(Lw,"FromUnion");function mr(e,t,r,n,i){if(!i.HasTransform(e,t))return n;let a=jc(e,t),s=e;switch(e[fe]){case"Array":return kw(s,a,r,n,i);case"Intersect":return Aw(s,a,r,n,i);case"Not":return Nw(s,a,r,n);case"Object":return _w(s,a,r,n,i);case"Record":return $w(s,a,r,n,i);case"Ref":return Rw(s,a,r,n,i);case"This":return Cw(s,a,r,n,i);case"Tuple":return Mw(s,a,r,n,i);case"Union":return Lw(s,a,r,n,i);default:return Tt(s,r,n)}}o(mr,"Visit");function Uw(e,t,r){let n=kc();return mr(e,t,"",r,n)}o(Uw,"FastTransformEncode");v();var Dw=class{constructor(t,r,n,i){this.schema=t,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=go(t,r)}Code(){return this.code}Errors(t){return mo(this.schema,this.references,t)}Check(t){return this.checkFunc(t)}Decode(t){if(!this.checkFunc(t))throw new G0(this.schema,t,this.Errors(t).First());return this.hasTransform?ba(this.schema,this.references,t):t}Encode(t){let r=this.hasTransform?Ec(this.schema,this.references,t):t;if(!this.checkFunc(r))throw new oI(this.schema,t,this.Errors(t).First());return r}};o(Dw,"TypeCheck");var OF=Dw,Cr;(function(e){function t(a){return a===36}o(t,"DollarSign"),e.DollarSign=t;function r(a){return a===95}o(r,"IsUnderscore"),e.IsUnderscore=r;function n(a){return a>=65&&a<=90||a>=97&&a<=122}o(n,"IsAlpha"),e.IsAlpha=n;function i(a){return a>=48&&a<=57}o(i,"IsNumeric"),e.IsNumeric=i})(Cr||(Cr={}));var Ti;(function(e){function t(a){return a.length===0?!1:Cr.IsNumeric(a.charCodeAt(0))}o(t,"IsFirstCharacterNumeric");function r(a){if(t(a))return!1;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);if(!(Cr.IsAlpha(l)||Cr.IsNumeric(l)||Cr.DollarSign(l)||Cr.IsUnderscore(l)))return!1}return!0}o(r,"IsAccessor");function n(a){return a.replace(/'/g,"\\'")}o(n,"EscapeHyphen");function i(a,s){return r(s)?"".concat(a,".").concat(s):"".concat(a,"['").concat(n(s),"']")}o(i,"Encode"),e.Encode=i})(Ti||(Ti={}));var Qa;(function(e){function t(r){let n=[];for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);Cr.IsNumeric(a)||Cr.IsAlpha(a)?n.push(r.charAt(i)):n.push("_".concat(a,"_"))}return n.join("").replace(/__/g,"_")}o(t,"Encode"),e.Encode=t})(Qa||(Qa={}));var Xa;(function(e){function t(r){return r.replace(/'/g,"\\'")}o(t,"Escape"),e.Escape=t})(Xa||(Xa={}));var Bw=class extends Xe{constructor(t){super("Unknown type"),this.schema=t}};o(Bw,"TypeCompilerUnknownTypeError");var PF=Bw,qw=class extends Xe{constructor(t){super("Preflight validation check failed to guard for the given schema"),this.schema=t}};o(qw,"TypeCompilerTypeGuardError");var mu=qw,cn;(function(e){function t(s,l,d){return ut.ExactOptionalPropertyTypes?"('".concat(l,"' in ").concat(s," ? ").concat(d," : true)"):"(".concat(Ti.Encode(s,l)," !== undefined ? ").concat(d," : true)")}o(t,"IsExactOptionalProperty"),e.IsExactOptionalProperty=t;function r(s){return ut.AllowArrayObject?"(typeof ".concat(s," === 'object' && ").concat(s," !== null)"):"(typeof ".concat(s," === 'object' && ").concat(s," !== null && !Array.isArray(").concat(s,"))")}o(r,"IsObjectLike"),e.IsObjectLike=r;function n(s){return ut.AllowArrayObject?"(typeof ".concat(s," === 'object' && ").concat(s," !== null && !(").concat(s," instanceof Date) && !(").concat(s," instanceof Uint8Array))"):"(typeof ".concat(s," === 'object' && ").concat(s," !== null && !Array.isArray(").concat(s,") && !(").concat(s," instanceof Date) && !(").concat(s," instanceof Uint8Array))")}o(n,"IsRecordLike"),e.IsRecordLike=n;function i(s){return ut.AllowNaN?"typeof ".concat(s," === 'number'"):"Number.isFinite(".concat(s,")")}o(i,"IsNumberLike"),e.IsNumberLike=i;function a(s){return ut.AllowNullVoid?"(".concat(s," === undefined || ").concat(s," === null)"):"".concat(s," === undefined")}o(a,"IsVoidLike"),e.IsVoidLike=a})(cn||(cn={}));var es;(function(e){function t(E){return E[fe]==="Any"||E[fe]==="Unknown"}o(t,"IsAnyOrUnknown");function*r(E,V,A){yield"true"}o(r,"FromAny");function*n(E,V,A){yield"Array.isArray(".concat(A,")");let[re,ie]=[_("value","any"),_("acc","number")];Ee(E.maxItems)&&(yield"".concat(A,".length <= ").concat(E.maxItems)),Ee(E.minItems)&&(yield"".concat(A,".length >= ").concat(E.minItems));let le=de(E.items,V,"value");if(yield"".concat(A,".every((").concat(re,") => ").concat(le,")"),Ke(E.contains)||Ee(E.minContains)||Ee(E.maxContains)){let be=Ke(E.contains)?E.contains:At(),he=de(be,V,"value"),ve=Ee(E.minContains)?["(count >= ".concat(E.minContains,")")]:[],je=Ee(E.maxContains)?["(count <= ".concat(E.maxContains,")")]:[],Oe="const count = value.reduce((".concat(ie,", ").concat(re,") => ").concat(he," ? acc + 1 : acc, 0)"),ge=["(count > 0)",...ve,...je].join(" && ");yield"((".concat(re,") => { ").concat(Oe,"; return ").concat(ge,"})(").concat(A,")")}if(E.uniqueItems===!0){let be="const set = new Set(); for(const element of value) { ".concat("const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true"," }");yield"((".concat(re,") => { ").concat(be," )(").concat(A,")")}}o(n,"FromArray");function*i(E,V,A){yield"(typeof value === 'object' && Symbol.asyncIterator in ".concat(A,")")}o(i,"FromAsyncIterator");function*a(E,V,A){yield"(typeof ".concat(A," === 'bigint')"),Jt(E.exclusiveMaximum)&&(yield"".concat(A," < BigInt(").concat(E.exclusiveMaximum,")")),Jt(E.exclusiveMinimum)&&(yield"".concat(A," > BigInt(").concat(E.exclusiveMinimum,")")),Jt(E.maximum)&&(yield"".concat(A," <= BigInt(").concat(E.maximum,")")),Jt(E.minimum)&&(yield"".concat(A," >= BigInt(").concat(E.minimum,")")),Jt(E.multipleOf)&&(yield"(".concat(A," % BigInt(").concat(E.multipleOf,")) === 0"))}o(a,"FromBigInt");function*s(E,V,A){yield"(typeof ".concat(A," === 'boolean')")}o(s,"FromBoolean");function*l(E,V,A){yield*ce(X(E.returns,V,"".concat(A,".prototype")))}o(l,"FromConstructor");function*d(E,V,A){yield"(".concat(A," instanceof Date) && Number.isFinite(").concat(A,".getTime())"),Ee(E.exclusiveMaximumTimestamp)&&(yield"".concat(A,".getTime() < ").concat(E.exclusiveMaximumTimestamp)),Ee(E.exclusiveMinimumTimestamp)&&(yield"".concat(A,".getTime() > ").concat(E.exclusiveMinimumTimestamp)),Ee(E.maximumTimestamp)&&(yield"".concat(A,".getTime() <= ").concat(E.maximumTimestamp)),Ee(E.minimumTimestamp)&&(yield"".concat(A,".getTime() >= ").concat(E.minimumTimestamp)),Ee(E.multipleOfTimestamp)&&(yield"(".concat(A,".getTime() % ").concat(E.multipleOfTimestamp,") === 0"))}o(d,"FromDate");function*c(E,V,A){yield"(typeof ".concat(A," === 'function')")}o(c,"FromFunction");function*p(E,V,A){yield"Number.isInteger(".concat(A,")"),Ee(E.exclusiveMaximum)&&(yield"".concat(A," < ").concat(E.exclusiveMaximum)),Ee(E.exclusiveMinimum)&&(yield"".concat(A," > ").concat(E.exclusiveMinimum)),Ee(E.maximum)&&(yield"".concat(A," <= ").concat(E.maximum)),Ee(E.minimum)&&(yield"".concat(A," >= ").concat(E.minimum)),Ee(E.multipleOf)&&(yield"(".concat(A," % ").concat(E.multipleOf,") === 0"))}o(p,"FromInteger");function*f(E,V,A){let re=E.allOf.map(ie=>de(ie,V,A)).join(" && ");if(E.unevaluatedProperties===!1){let ie=$("".concat(new RegExp(pn(E)),";")),le="Object.getOwnPropertyNames(".concat(A,").every(key => ").concat(ie,".test(key))");yield"(".concat(re," && ").concat(le,")")}else if(Ke(E.unevaluatedProperties)){let ie=$("".concat(new RegExp(pn(E)),";")),le="Object.getOwnPropertyNames(".concat(A,").every(key => ").concat(ie,".test(key) || ").concat(de(E.unevaluatedProperties,V,"".concat(A,"[key]")),")");yield"(".concat(re," && ").concat(le,")")}else yield"(".concat(re,")")}o(f,"FromIntersect");function*h(E,V,A){yield"(typeof value === 'object' && Symbol.iterator in ".concat(A,")")}o(h,"FromIterator");function*w(E,V,A){typeof E.const=="number"||typeof E.const=="boolean"?yield"(".concat(A," === ").concat(E.const,")"):yield"(".concat(A," === '").concat(Xa.Escape(E.const),"')")}o(w,"FromLiteral");function*N(E,V,A){yield"false"}o(N,"FromNever");function*k(E,V,A){let re=de(E.not,V,A);yield"(!".concat(re,")")}o(k,"FromNot");function*O(E,V,A){yield"(".concat(A," === null)")}o(O,"FromNull");function*g(E,V,A){yield cn.IsNumberLike(A),Ee(E.exclusiveMaximum)&&(yield"".concat(A," < ").concat(E.exclusiveMaximum)),Ee(E.exclusiveMinimum)&&(yield"".concat(A," > ").concat(E.exclusiveMinimum)),Ee(E.maximum)&&(yield"".concat(A," <= ").concat(E.maximum)),Ee(E.minimum)&&(yield"".concat(A," >= ").concat(E.minimum)),Ee(E.multipleOf)&&(yield"(".concat(A," % ").concat(E.multipleOf,") === 0"))}o(g,"FromNumber");function*y(E,V,A){yield cn.IsObjectLike(A),Ee(E.minProperties)&&(yield"Object.getOwnPropertyNames(".concat(A,").length >= ").concat(E.minProperties)),Ee(E.maxProperties)&&(yield"Object.getOwnPropertyNames(".concat(A,").length <= ").concat(E.maxProperties));let re=Object.getOwnPropertyNames(E.properties);for(let ie of re){let le=Ti.Encode(A,ie),be=E.properties[ie];if(E.required&&E.required.includes(ie))yield*ce(X(be,V,le)),(En(be)||t(be))&&(yield"('".concat(ie,"' in ").concat(A,")"));else{let he=de(be,V,le);yield cn.IsExactOptionalProperty(A,ie,he)}}if(E.additionalProperties===!1)if(E.required&&E.required.length===re.length)yield"Object.getOwnPropertyNames(".concat(A,").length === ").concat(re.length);else{let ie="[".concat(re.map(le=>"'".concat(le,"'")).join(", "),"]");yield"Object.getOwnPropertyNames(".concat(A,").every(key => ").concat(ie,".includes(key))")}if(typeof E.additionalProperties=="object"){let ie=de(E.additionalProperties,V,"".concat(A,"[key]")),le="[".concat(re.map(be=>"'".concat(be,"'")).join(", "),"]");yield"(Object.getOwnPropertyNames(".concat(A,").every(key => ").concat(le,".includes(key) || ").concat(ie,"))")}}o(y,"FromObject");function*I(E,V,A){yield"(typeof value === 'object' && typeof ".concat(A,".then === 'function')")}o(I,"FromPromise");function*m(E,V,A){yield cn.IsRecordLike(A),Ee(E.minProperties)&&(yield"Object.getOwnPropertyNames(".concat(A,").length >= ").concat(E.minProperties)),Ee(E.maxProperties)&&(yield"Object.getOwnPropertyNames(".concat(A,").length <= ").concat(E.maxProperties));let[re,ie]=Object.entries(E.patternProperties)[0],le=$("".concat(new RegExp(re))),be=de(ie,V,"value"),he=Ke(E.additionalProperties)?de(E.additionalProperties,V,A):E.additionalProperties===!1?"false":"true",ve="(".concat(le,".test(key) ? ").concat(be," : ").concat(he,")");yield"(Object.entries(".concat(A,").every(([key, value]) => ").concat(ve,"))")}o(m,"FromRecord");function*b(E,V,A){let re=lt(E,V);if(J.functions.has(E.$ref))return yield"".concat(H(E.$ref),"(").concat(A,")");yield*ce(X(re,V,A))}o(b,"FromRef");function*x(E,V,A){let re=$("".concat(new RegExp(E.source,E.flags),";"));yield"(typeof ".concat(A," === 'string')"),Ee(E.maxLength)&&(yield"".concat(A,".length <= ").concat(E.maxLength)),Ee(E.minLength)&&(yield"".concat(A,".length >= ").concat(E.minLength)),yield"".concat(re,".test(").concat(A,")")}o(x,"FromRegExp");function*P(E,V,A){if(yield"(typeof ".concat(A," === 'string')"),Ee(E.maxLength)&&(yield"".concat(A,".length <= ").concat(E.maxLength)),Ee(E.minLength)&&(yield"".concat(A,".length >= ").concat(E.minLength)),E.pattern!==void 0){let re=$("".concat(new RegExp(E.pattern),";"));yield"".concat(re,".test(").concat(A,")")}E.format!==void 0&&(yield"format('".concat(E.format,"', ").concat(A,")"))}o(P,"FromString");function*F(E,V,A){yield"(typeof ".concat(A," === 'symbol')")}o(F,"FromSymbol");function*S(E,V,A){yield"(typeof ".concat(A," === 'string')");let re=$("".concat(new RegExp(E.pattern),";"));yield"".concat(re,".test(").concat(A,")")}o(S,"FromTemplateLiteral");function*C(E,V,A){yield"".concat(H(E.$ref),"(").concat(A,")")}o(C,"FromThis");function*q(E,V,A){if(yield"Array.isArray(".concat(A,")"),E.items===void 0)return yield"".concat(A,".length === 0");yield"(".concat(A,".length === ").concat(E.maxItems,")");for(let re=0;re<E.items.length;re++){let ie=de(E.items[re],V,"".concat(A,"[").concat(re,"]"));yield"".concat(ie)}}o(q,"FromTuple");function*M(E,V,A){yield"".concat(A," === undefined")}o(M,"FromUndefined");function*z(E,V,A){let re=E.anyOf.map(ie=>de(ie,V,A));yield"(".concat(re.join(" || "),")")}o(z,"FromUnion");function*Q(E,V,A){yield"".concat(A," instanceof Uint8Array"),Ee(E.maxByteLength)&&(yield"(".concat(A,".length <= ").concat(E.maxByteLength,")")),Ee(E.minByteLength)&&(yield"(".concat(A,".length >= ").concat(E.minByteLength,")"))}o(Q,"FromUint8Array");function*ae(E,V,A){yield"true"}o(ae,"FromUnknown");function*Y(E,V,A){yield cn.IsVoidLike(A)}o(Y,"FromVoid");function*ne(E,V,A){let re=J.instances.size;J.instances.set(re,E),yield"kind('".concat(E[fe],"', ").concat(re,", ").concat(A,")")}o(ne,"FromKind");function*X(E,V,A,re=!0){let ie=Ze(E.$id)?[...V,E]:V,le=E;if(re&&Ze(E.$id)){let be=H(E.$id);if(J.functions.has(be))return yield"".concat(be,"(").concat(A,")");{let he=D(be,E,V,"value",!1);return J.functions.set(be,he),yield"".concat(be,"(").concat(A,")")}}switch(le[fe]){case"Any":return yield*ce(r());case"Array":return yield*ce(n(le,ie,A));case"AsyncIterator":return yield*ce(i(le,ie,A));case"BigInt":return yield*ce(a(le,ie,A));case"Boolean":return yield*ce(s(le,ie,A));case"Constructor":return yield*ce(l(le,ie,A));case"Date":return yield*ce(d(le,ie,A));case"Function":return yield*ce(c(le,ie,A));case"Integer":return yield*ce(p(le,ie,A));case"Intersect":return yield*ce(f(le,ie,A));case"Iterator":return yield*ce(h(le,ie,A));case"Literal":return yield*ce(w(le,ie,A));case"Never":return yield*ce(N());case"Not":return yield*ce(k(le,ie,A));case"Null":return yield*ce(O(le,ie,A));case"Number":return yield*ce(g(le,ie,A));case"Object":return yield*ce(y(le,ie,A));case"Promise":return yield*ce(I(le,ie,A));case"Record":return yield*ce(m(le,ie,A));case"Ref":return yield*ce(b(le,ie,A));case"RegExp":return yield*ce(x(le,ie,A));case"String":return yield*ce(P(le,ie,A));case"Symbol":return yield*ce(F(le,ie,A));case"TemplateLiteral":return yield*ce(S(le,ie,A));case"This":return yield*ce(C(le,ie,A));case"Tuple":return yield*ce(q(le,ie,A));case"Undefined":return yield*ce(M(le,ie,A));case"Union":return yield*ce(z(le,ie,A));case"Uint8Array":return yield*ce(Q(le,ie,A));case"Unknown":return yield*ce(ae());case"Void":return yield*ce(Y(le,ie,A));default:if(!rr.Has(le[fe]))throw new PF(E);return yield*ce(ne(le,ie,A))}}o(X,"Visit");let J={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function de(E,V,A,re=!0){return"(".concat([...X(E,V,A,re)].join(" && "),")")}o(de,"CreateExpression");function H(E){return"check_".concat(Qa.Encode(E))}o(H,"CreateFunctionName");function $(E){let V="local_".concat(J.variables.size);return J.variables.set(V,"const ".concat(V," = ").concat(E)),V}o($,"CreateVariable");function D(E,V,A,re,ie=!0){let[le,be]=[`
`,Oe=>"".padStart(Oe," ")],he=_("value","any"),ve=j("boolean"),je=[...X(V,A,re,ie)].map(Oe=>"".concat(be(4)).concat(Oe)).join(" &&".concat(le));return"function ".concat(E,"(").concat(he,")").concat(ve," {").concat(le).concat(be(2),"return (").concat(le).concat(je).concat(le).concat(be(2),`)
}`)}o(D,"CreateFunction");function _(E,V){let A=J.language==="typescript"?": ".concat(V):"";return"".concat(E).concat(A)}o(_,"CreateParameter");function j(E){return J.language==="typescript"?": ".concat(E):""}o(j,"CreateReturns");function L(E,V,A){let re=D("check",E,V,"value"),ie=_("value","any"),le=j("boolean"),be=[...J.functions.values()],he=[...J.variables.values()],ve=Ze(E.$id)?"return function check(".concat(ie,")").concat(le,` {
  return `).concat(H(E.$id),`(value)
}`):"return ".concat(re);return[...he,...be,ve].join(`
`)}o(L,"Build");function G(...E){let V={language:"javascript"},[A,re,ie]=E.length===2&&Ve(E[1])?[E[0],E[1],V]:E.length===2&&!Ve(E[1])?[E[0],[],E[1]]:E.length===3?[E[0],E[1],E[2]]:E.length===1?[E[0],[],V]:[null,[],V];if(J.language=ie.language,J.variables.clear(),J.functions.clear(),J.instances.clear(),!Ke(A))throw new mu(A);for(let le of re)if(!Ke(le))throw new mu(le);return L(A,re)}o(G,"Code"),e.Code=G;function te(E,V=[]){let A=G(E,V,{language:"javascript"}),re=globalThis.Function("kind","format","hash",A),ie=new Map(J.instances);function le(je,Oe,ge){if(!rr.Has(je)||!ie.has(Oe))return!1;let Re=rr.Get(je),De=ie.get(Oe);return Re(De,ge)}o(le,"typeRegistryFunction");function be(je,Oe){return Ur.Has(je)?Ur.Get(je)(Oe):!1}o(be,"formatRegistryFunction");function he(je){return Jo(je)}o(he,"hashFunction");let ve=re(le,be,he);return new OF(E,V,ve,A)}o(te,"Compile"),e.Compile=te})(es||(es={}));v();v();var hu={},EF=o(function(e,t,r,n,i){var a=new Worker(hu[t]||(hu[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(s){var l=s.data,d=l.$e$;if(d){var c=new Error(d[0]);c.code=d[1],c.stack=d[2],i(c,null)}else i(null,l)},a.postMessage(r,n),a},"wk"),tt=Uint8Array,Rt=Uint16Array,Xo=Int32Array,wo=new tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xo=new tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ko=new tt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zw=o(function(e,t){for(var r=new Rt(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new Xo(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},"freb"),Vw=zw(wo,2),Ac=Vw.b,ji=Vw.r;Ac[28]=258,ji[258]=28;var Kw=zw(xo,0),Gw=Kw.b,ts=Kw.r,Ao=new Rt(32768);for(Ge=0;Ge<32768;++Ge)$r=(Ge&43690)>>1|(Ge&21845)<<1,$r=($r&52428)>>2|($r&13107)<<2,$r=($r&61680)>>4|($r&3855)<<4,Ao[Ge]=(($r&65280)>>8|($r&255)<<8)>>1;var $r,Ge,nr=o(function(e,t,r){for(var n=e.length,i=0,a=new Rt(t);i<n;++i)e[i]&&++a[e[i]-1];var s=new Rt(t);for(i=1;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;var l;if(r){l=new Rt(1<<t);var d=15-t;for(i=0;i<n;++i)if(e[i])for(var c=i<<4|e[i],p=t-e[i],f=s[e[i]-1]++<<p,h=f|(1<<p)-1;f<=h;++f)l[Ao[f]>>d]=c}else for(l=new Rt(n),i=0;i<n;++i)e[i]&&(l[i]=Ao[s[e[i]-1]++]>>15-e[i]);return l},"hMap"),Br=new tt(288);for(Ge=0;Ge<144;++Ge)Br[Ge]=8;var Ge;for(Ge=144;Ge<256;++Ge)Br[Ge]=9;var Ge;for(Ge=256;Ge<280;++Ge)Br[Ge]=7;var Ge;for(Ge=280;Ge<288;++Ge)Br[Ge]=8;var Ge,Hn=new tt(32);for(Ge=0;Ge<32;++Ge)Hn[Ge]=5;var Ge,Hw=nr(Br,9,0),Ww=nr(Br,9,1),Jw=nr(Hn,5,0),Zw=nr(Hn,5,1),ci=o(function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},"max"),tr=o(function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},"bits"),ui=o(function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},"bits16"),ei=o(function(e){return(e+7)/8|0},"shft"),kn=o(function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new tt(e.subarray(t,r))},"slc"),Yw={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},Qw=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ht=o(function(e,t,r){var n=new Error(t||Qw[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,ht),!r)throw n;return n},"err"),Xw=o(function(e,t,r,n){var i=e.length,a=n?n.length:0;if(!i||t.f&&!t.l)return r||new tt(0);var s=!r,l=s||t.i!=2,d=t.i;s&&(r=new tt(i*3));var c=o(function(A){var re=r.length;if(A>re){var ie=new tt(Math.max(re*2,A));ie.set(r),r=ie}},"cbuf"),p=t.f||0,f=t.p||0,h=t.b||0,w=t.l,N=t.d,k=t.m,O=t.n,g=i*8;do{if(!w){p=tr(e,f,1);var y=tr(e,f+1,3);if(f+=3,y)if(y==1)w=Ww,N=Zw,k=9,O=5;else if(y==2){var I=tr(e,f,31)+257,m=tr(e,f+10,15)+4,b=I+tr(e,f+5,31)+1;f+=14;for(var x=new tt(b),P=new tt(19),F=0;F<m;++F)P[ko[F]]=tr(e,f+F*3,7);f+=m*3;for(var S=ci(P),C=(1<<S)-1,q=nr(P,S,1),F=0;F<b;){var M=q[tr(e,f,C)];f+=M&15;var z=M>>4;if(z<16)x[F++]=z;else{var Q=0,ae=0;for(z==16?(ae=3+tr(e,f,3),f+=2,Q=x[F-1]):z==17?(ae=3+tr(e,f,7),f+=3):z==18&&(ae=11+tr(e,f,127),f+=7);ae--;)x[F++]=Q}}var Y=x.subarray(0,I),ne=x.subarray(I);k=ci(Y),O=ci(ne),w=nr(Y,k,1),N=nr(ne,O,1)}else ht(1);else{var z=ei(f)+4,X=e[z-4]|e[z-3]<<8,J=z+X;if(J>i){d&&ht(0);break}l&&c(h+X),r.set(e.subarray(z,J),h),t.b=h+=X,t.p=f=J*8,t.f=p;continue}if(f>g){d&&ht(0);break}}l&&c(h+131072);for(var de=(1<<k)-1,H=(1<<O)-1,$=f;;$=f){var Q=w[ui(e,f)&de],D=Q>>4;if(f+=Q&15,f>g){d&&ht(0);break}if(Q||ht(2),D<256)r[h++]=D;else if(D==256){$=f,w=null;break}else{var _=D-254;if(D>264){var F=D-257,j=wo[F];_=tr(e,f,(1<<j)-1)+Ac[F],f+=j}var L=N[ui(e,f)&H],G=L>>4;L||ht(3),f+=L&15;var ne=Gw[G];if(G>3){var j=xo[G];ne+=ui(e,f)&(1<<j)-1,f+=j}if(f>g){d&&ht(0);break}l&&c(h+131072);var te=h+_;if(h<ne){var E=a-ne,V=Math.min(ne,te);for(E+h<0&&ht(3);h<V;++h)r[h]=n[E+h]}for(;h<te;++h)r[h]=r[h-ne]}}t.l=w,t.p=$,t.b=h,t.f=p,w&&(p=1,t.m=k,t.d=N,t.n=O)}while(!p);return h!=r.length&&s?kn(r,0,h):r.subarray(0,h)},"inflt"),Pr=o(function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},"wbits"),$n=o(function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},"wbits16"),di=o(function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:_c,l:0};if(i==1){var s=new tt(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(b,x){return b.f-x.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],c=0,p=1,f=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};p!=i-1;)l=r[r[c].f<r[f].f?c++:f++],d=r[c!=p&&r[c].f<r[f].f?c++:f++],r[p++]={s:-1,f:l.f+d.f,l,r:d};for(var h=a[0].s,n=1;n<i;++n)a[n].s>h&&(h=a[n].s);var w=new Rt(h+1),N=ki(r[p-1],w,0);if(N>t){var n=0,k=0,O=N-t,g=1<<O;for(a.sort(function(x,P){return w[P.s]-w[x.s]||x.f-P.f});n<i;++n){var y=a[n].s;if(w[y]>t)k+=g-(1<<N-w[y]),w[y]=t;else break}for(k>>=O;k>0;){var I=a[n].s;w[I]<t?k-=1<<t-w[I]++-1:++n}for(;n>=0&&k;--n){var m=a[n].s;w[m]==t&&(--w[m],++k)}N=t}return{t:new tt(w),l:N}},"hTree"),ki=o(function(e,t,r){return e.s==-1?Math.max(ki(e.l,t,r+1),ki(e.r,t,r+1)):t[e.s]=r},"ln"),rs=o(function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Rt(++t),n=0,i=e[0],a=1,s=o(function(d){r[n++]=d},"w"),l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[l]}return{c:r.subarray(0,n),n:t}},"lc"),Rn=o(function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},"clen"),Nc=o(function(e,t,r){var n=r.length,i=ei(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},"wfblk"),ns=o(function(e,t,r,n,i,a,s,l,d,c,p){Pr(t,p++,r),++i[256];for(var f=di(i,15),h=f.t,w=f.l,N=di(a,15),k=N.t,O=N.l,g=rs(h),y=g.c,I=g.n,m=rs(k),b=m.c,x=m.n,P=new Rt(19),F=0;F<y.length;++F)++P[y[F]&31];for(var F=0;F<b.length;++F)++P[b[F]&31];for(var S=di(P,7),C=S.t,q=S.l,M=19;M>4&&!C[ko[M-1]];--M);var z=c+5<<3,Q=Rn(i,Br)+Rn(a,Hn)+s,ae=Rn(i,h)+Rn(a,k)+s+14+3*M+Rn(P,C)+2*P[16]+3*P[17]+7*P[18];if(d>=0&&z<=Q&&z<=ae)return Nc(t,p,e.subarray(d,d+c));var Y,ne,X,J;if(Pr(t,p,1+(ae<Q)),p+=2,ae<Q){Y=nr(h,w,0),ne=h,X=nr(k,O,0),J=k;var de=nr(C,q,0);Pr(t,p,I-257),Pr(t,p+5,x-1),Pr(t,p+10,M-4),p+=14;for(var F=0;F<M;++F)Pr(t,p+3*F,C[ko[F]]);p+=3*M;for(var H=[y,b],$=0;$<2;++$)for(var D=H[$],F=0;F<D.length;++F){var _=D[F]&31;Pr(t,p,de[_]),p+=C[_],_>15&&(Pr(t,p,D[F]>>5&127),p+=D[F]>>12)}}else Y=Hw,ne=Br,X=Jw,J=Hn;for(var F=0;F<l;++F){var j=n[F];if(j>255){var _=j>>18&31;$n(t,p,Y[_+257]),p+=ne[_+257],_>7&&(Pr(t,p,j>>23&31),p+=wo[_]);var L=j&31;$n(t,p,X[L]),p+=J[L],L>3&&($n(t,p,j>>5&8191),p+=xo[L])}else $n(t,p,Y[j]),p+=ne[j]}return $n(t,p,Y[256]),p+ne[256]},"wblk"),ex=new Xo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_c=new tt(0),tx=o(function(e,t,r,n,i,a){var s=a.z||e.length,l=new tt(n+s+5*(1+Math.ceil(s/7e3))+i),d=l.subarray(n,l.length-i),c=a.l,p=(a.r||0)&7;if(t){p&&(d[0]=a.r>>3);for(var f=ex[t-1],h=f>>13,w=f&8191,N=(1<<r)-1,k=a.p||new Rt(32768),O=a.h||new Rt(N+1),g=Math.ceil(r/3),y=2*g,I=o(function(le){return(e[le]^e[le+1]<<g^e[le+2]<<y)&N},"hsh"),m=new Xo(25e3),b=new Rt(288),x=new Rt(32),P=0,F=0,S=a.i||0,C=0,q=a.w||0,M=0;S+2<s;++S){var z=I(S),Q=S&32767,ae=O[z];if(k[Q]=ae,O[z]=Q,q<=S){var Y=s-S;if((P>7e3||C>24576)&&(Y>423||!c)){p=ns(e,d,0,m,b,x,F,C,M,S-M,p),C=P=F=0,M=S;for(var ne=0;ne<286;++ne)b[ne]=0;for(var ne=0;ne<30;++ne)x[ne]=0}var X=2,J=0,de=w,H=Q-ae&32767;if(Y>2&&z==I(S-H))for(var $=Math.min(h,Y)-1,D=Math.min(32767,S),_=Math.min(258,Y);H<=D&&--de&&Q!=ae;){if(e[S+X]==e[S+X-H]){for(var j=0;j<_&&e[S+j]==e[S+j-H];++j);if(j>X){if(X=j,J=H,j>$)break;for(var L=Math.min(H,j-2),G=0,ne=0;ne<L;++ne){var te=S-H+ne&32767,E=k[te],V=te-E&32767;V>G&&(G=V,ae=te)}}}Q=ae,ae=k[Q],H+=Q-ae&32767}if(J){m[C++]=268435456|ji[X]<<18|ts[J];var A=ji[X]&31,re=ts[J]&31;F+=wo[A]+xo[re],++b[257+A],++x[re],q=S+X,++P}else m[C++]=e[S],++b[e[S]]}}for(S=Math.max(S,q);S<s;++S)m[C++]=e[S],++b[e[S]];p=ns(e,d,c,m,b,x,F,C,M,S-M,p),c||(a.r=p&7|d[p/8|0]<<3,p-=7,a.h=O,a.p=k,a.i=S,a.w=q)}else{for(var S=a.w||0;S<s+c;S+=65535){var ie=S+65535;ie>=s&&(d[p/8|0]=c,ie=s),p=Nc(d,p+1,e.subarray(S,ie))}a.i=s}return kn(l,0,n+ei(p)+i)},"dflt"),SF=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(r&1&&-306674912)^r>>>1;e[t]=r}return e})(),FF=o(function(){var e=-1;return{p:o(function(t){for(var r=e,n=0;n<t.length;++n)r=SF[r&255^t[n]]^r>>>8;e=r},"p"),d:o(function(){return~e},"d")}},"crc"),rx=o(function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new tt(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return tx(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},"dopt"),$c=o(function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},"mrg"),yu=o(function(e,t,r){for(var n=e(),i=e.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<n.length;++s){var l=n[s],d=a[s];if(typeof l=="function"){t+=";"+d+"=";var c=l.toString();if(l.prototype)if(c.indexOf("[native code]")!=-1){var p=c.indexOf(" ",8)+1;t+=c.slice(p,c.indexOf("(",p))}else{t+=c;for(var f in l.prototype)t+=";"+d+".prototype."+f+"="+l.prototype[f].toString()}else t+=c}else r[d]=l}return t},"wcln"),oi=[],TF=o(function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},"cbfs"),jF=o(function(e,t,r,n){if(!oi[r]){for(var i="",a={},s=e.length-1,l=0;l<s;++l)i=yu(e[l],i,a);oi[r]={c:yu(e[s],i,a),e:a}}var d=$c({},oi[r].e);return EF(oi[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,d,TF(d),n)},"wrkr"),kF=o(function(){return[tt,Rt,Xo,wo,xo,ko,Ac,Gw,Ww,Zw,Ao,Qw,nr,ci,tr,ui,ei,kn,ht,Xw,Oa,wa,nx]},"bInflt"),AF=o(function(){return[tt,Rt,Xo,wo,xo,ko,ji,ts,Hw,Br,Jw,Hn,Ao,ex,_c,nr,Pr,$n,di,ki,rs,Rn,Nc,ns,ei,kn,tx,rx,xa,wa]},"bDflt"),wa=o(function(e){return postMessage(e,[e.buffer])},"pbf"),nx=o(function(e){return e&&{out:e.size&&new tt(e.size),dictionary:e.dictionary}},"gopt"),ox=o(function(e,t,r,n,i,a){var s=jF(r,n,i,function(l,d){s.terminate(),a(l,d)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},"cbify"),Fr=o(function(e,t){return e[t]|e[t+1]<<8},"b2"),lr=o(function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},"b4"),Aa=o(function(e,t){return lr(e,t)+lr(e,t+4)*4294967296},"b8"),St=o(function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},"wbytes");function ix(e,t,r){return r||(r=t,t={}),typeof r!="function"&&ht(7),ox(e,t,[AF],function(n){return wa(xa(n.data[0],n.data[1]))},0,r)}o(ix,"deflate");function xa(e,t){return rx(e,t||{},0,0)}o(xa,"deflateSync");function ax(e,t,r){return r||(r=t,t={}),typeof r!="function"&&ht(7),ox(e,t,[kF],function(n){return wa(Oa(n.data[0],nx(n.data[1])))},1,r)}o(ax,"inflate");function Oa(e,t){return Xw(e,{i:2},t&&t.out,t&&t.dictionary)}o(Oa,"inflateSync");var sx=o(function(e,t,r,n){for(var i in e){var a=e[i],s=t+i,l=n;Array.isArray(a)&&(l=$c(n,a[1]),a=a[0]),a instanceof tt?r[s]=[a,l]:(r[s+="/"]=[new tt(0),l],sx(a,s,r,n))}},"fltn"),gu=typeof TextEncoder<"u"&&new TextEncoder,os=typeof TextDecoder<"u"&&new TextDecoder,NF=0;try{os.decode(_c,{stream:!0}),NF=1}catch{}var _F=o(function(e){for(var t="",r=0;;){var n=e[r++],i=(n>127)+(n>223)+(n>239);if(r+i>e.length)return{s:t,r:kn(e,r-1)};i?i==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}},"dutf8");function Ai(e,t){if(t){for(var r=new tt(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(gu)return gu.encode(e);for(var i=e.length,a=new tt(e.length+(e.length>>1)),s=0,l=o(function(f){a[s++]=f},"w"),n=0;n<i;++n){if(s+5>a.length){var d=new tt(s+8+(i-n<<1));d.set(a),a=d}var c=e.charCodeAt(n);c<128||t?l(c):c<2048?(l(192|c>>6),l(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++n)&1023,l(240|c>>18),l(128|c>>12&63),l(128|c>>6&63),l(128|c&63)):(l(224|c>>12),l(128|c>>6&63),l(128|c&63))}return kn(a,0,s)}o(Ai,"strToU8");function Rc(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(os)return os.decode(e);var i=_F(e),a=i.s,r=i.r;return r.length&&ht(8),a}}o(Rc,"strFromU8");var $F=o(function(e,t){return t+30+Fr(e,t+26)+Fr(e,t+28)},"slzh"),RF=o(function(e,t,r){var n=Fr(e,t+28),i=Rc(e.subarray(t+46,t+46+n),!(Fr(e,t+8)&2048)),a=t+46+n,s=lr(e,t+20),l=r&&s==4294967295?CF(e,a):[s,lr(e,t+24),lr(e,t+42)],d=l[0],c=l[1],p=l[2];return[Fr(e,t+10),d,c,i,a+Fr(e,t+30)+Fr(e,t+32),p]},"zh"),CF=o(function(e,t){for(;Fr(e,t)!=1;t+=4+Fr(e,t+2));return[Aa(e,t+12),Aa(e,t+4),Aa(e,t+20)]},"z64e"),is=o(function(e){var t=0;if(e)for(var r in e){var n=e[r].length;n>65535&&ht(9),t+=n+4}return t},"exfl"),vu=o(function(e,t,r,n,i,a,s,l){var d=n.length,c=r.extra,p=l&&l.length,f=is(c);St(e,t,s!=null?33639248:67324752),t+=4,s!=null&&(e[t++]=20,e[t++]=r.os),e[t]=20,t+=2,e[t++]=r.flag<<1|(a<0&&8),e[t++]=i&&8,e[t++]=r.compression&255,e[t++]=r.compression>>8;var h=new Date(r.mtime==null?Date.now():r.mtime),w=h.getFullYear()-1980;if((w<0||w>119)&&ht(10),St(e,t,w<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),t+=4,a!=-1&&(St(e,t,r.crc),St(e,t+4,a<0?-a-2:a),St(e,t+8,r.size)),St(e,t+12,d),St(e,t+14,f),t+=16,s!=null&&(St(e,t,p),St(e,t+6,r.attrs),St(e,t+10,s),t+=14),e.set(n,t),t+=d,f)for(var N in c){var k=c[N],O=k.length;St(e,t,+N),St(e,t+2,O),e.set(k,t+4),t+=4+O}return p&&(e.set(l,t),t+=p),t},"wzh"),MF=o(function(e,t,r,n,i){St(e,t,101010256),St(e,t+8,r),St(e,t+10,r),St(e,t+12,n),St(e,t+16,i)},"wzf");function lx(e,t,r){r||(r=t,t={}),typeof r!="function"&&ht(7);var n={};sx(e,"",n,t);var i=Object.keys(n),a=i.length,s=0,l=0,d=a,c=new Array(a),p=[],f=o(function(){for(var O=0;O<p.length;++O)p[O]()},"tAll"),h=o(function(O,g){Ni(function(){r(O,g)})},"cbd");Ni(function(){h=r});var w=o(function(){var O=new tt(l+22),g=s,y=l-s;l=0;for(var I=0;I<d;++I){var m=c[I];try{var b=m.c.length;vu(O,l,m,m.f,m.u,b);var x=30+m.f.length+is(m.extra),P=l+x;O.set(m.c,P),vu(O,s,m,m.f,m.u,b,l,m.m),s+=16+x+(m.m?m.m.length:0),l=P+b}catch(F){return h(F,null)}}MF(O,s,c.length,y,g),h(null,O)},"cbf");a||w();for(var N=o(function(O){var g=i[O],y=n[g],I=y[0],m=y[1],b=FF(),x=I.length;b.p(I);var P=Ai(g),F=P.length,S=m.comment,C=S&&Ai(S),q=C&&C.length,M=is(m.extra),z=m.level==0?0:8,Q=o(function(ae,Y){if(ae)f(),h(ae,null);else{var ne=Y.length;c[O]=$c(m,{size:x,crc:b.d(),c:Y,f:P,m:C,u:F!=g.length||C&&S.length!=q,compression:z}),s+=30+F+M+ne,l+=76+2*(F+M)+(q||0)+ne,--a||w()}},"cbl");if(F>65535&&Q(ht(11,0,1),null),!z)Q(null,I);else if(x<16e4)try{Q(null,xa(I,m))}catch(ae){Q(ae,null)}else p.push(ix(I,m,Q))},"_loop_1"),k=0;k<d;++k)N(k);return f}o(lx,"zip");var Ni=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function cx(e,t,r){r||(r=t,t={}),typeof r!="function"&&ht(7);var n=[],i=o(function(){for(var O=0;O<n.length;++O)n[O]()},"tAll"),a={},s=o(function(O,g){Ni(function(){r(O,g)})},"cbd");Ni(function(){s=r});for(var l=e.length-22;lr(e,l)!=101010256;--l)if(!l||e.length-l>65558)return s(ht(13,0,1),null),i;var d=Fr(e,l+8);if(d){var c=d,p=lr(e,l+16),f=p==4294967295||c==65535;if(f){var h=lr(e,l-12);f=lr(e,h)==101075792,f&&(c=d=lr(e,h+32),p=lr(e,h+48))}for(var w=t&&t.filter,N=o(function(O){var g=RF(e,p,f),y=g[0],I=g[1],m=g[2],b=g[3],x=g[4],P=g[5],F=$F(e,P);p=x;var S=o(function(q,M){q?(i(),s(q,null)):(M&&(a[b]=M),--d||s(null,a))},"cbl");if(!w||w({name:b,size:I,originalSize:m,compression:y}))if(!y)S(null,kn(e,F,F+I));else if(y==8){var C=e.subarray(F,F+I);if(m<524288||I>.8*m)try{S(null,Oa(C,{out:new tt(m)}))}catch(q){S(q,null)}else n.push(ax(C,{size:m},S))}else S(ht(14,"unknown compression type "+y,1),null);else S(null,null)},"_loop_3"),k=0;k<c;++k)N(k)}else s(null,{});return i}o(cx,"unzip");v();var LF=o(e=>{if(e!=null)return e.trim()===""?void 0:e},"maybePath"),UF=o(e=>e!=null,"notNull"),fi=o((e,t,r=0)=>{var n;if(U.IsNull(e))return"null";if(U.IsUndefined(e))return"undefined";if(U.IsString(e))return"<string>";if(U.IsNumber(e))return"<number>";if(U.IsBoolean(e))return"<boolean>";if(U.IsLiteral(e))return typeof e.const=="string"?"'".concat(e.const,"'"):"".concat(e.const);if(U.IsRef(e)){let i=t.find(a=>a.$id===e.$ref);return i==null?e.$ref:fi(i,t,r)}if(U.IsArray(e))return"".concat(fi(e.items,t,r+1),"[]");if(U.IsUnion(e)&&(!(e.anyOf.length>5)||e.$id==null)){let i="".concat(e.anyOf.map(a=>fi(a,t,r+1)).filter(UF).join(" | "));return r>0?"(".concat(i,")"):i}return(n=e.$id)!=null?n:""},"resolveSchemaIdent"),DF=o((e,t,r)=>{var n;let i=t.message;U.IsUnion(t.schema)&&(i="Expected one of: ".concat(fi(t.schema,r)));let a="#/definitions/".concat(e).concat((n=LF(t.path))!=null?n:"");return"".concat(a,": ").concat(i)},"errorHandler"),ux=o((e,t,r)=>{let n=t.First();if(n!=null)return DF(e,n,r)},"shortError"),Wn;(function(e){e.Archive="Archive",e.Validate="Validate",e.Encode="Encode",e.Unknown="Unknown"})(Wn||(Wn={}));var dx=class extends Error{constructor(t,r){super(r),we(this,"name"),we(this,"kind"),this.name="CompressError",this.kind=t}};o(dx,"CompressError");var Pa=dx,BF=o(e=>new Pa(Wn.Archive,e.message),"flateErrorIntoCompressError"),qF=o(e=>{let t=Object.values(Yw);return e instanceof Error&&"code"in e&&typeof e.code=="number"&&t.includes(e.code)},"isFlateError"),zF=o((e,t,r)=>{var n;return new Pa(Wn.Validate,(n=ux(e,t,r))!=null?n:"Unknown validate error")},"checkErrorIntoCompressError"),VF=o(e=>new Pa(Wn.Encode,e.message),"encodeErrorIntoCompressError"),KF=o(e=>new Pa(Wn.Unknown,e instanceof Error?e.message:String(e)),"unknownErrorIntoCompressError"),bu=o((e,t,r)=>t instanceof Pc?VF(t):t instanceof po?zF(e,t,r):qF(t)?BF(t):KF(t),"intoCompressError");v();var Jn;(function(e){e.Unarchive="Unarchive",e.Validate="Validate",e.Decode="Decode",e.Unknown="Unknown"})(Jn||(Jn={}));var fx=class extends Error{constructor(t,r){super(r),we(this,"name"),we(this,"kind"),this.name="DecompressError",this.kind=t}};o(fx,"DecompressError");var Ea=fx,GF=o(e=>new Ea(Jn.Unarchive,e.message),"flateErrorIntoDecompressError"),HF=o(e=>{let t=Object.values(Yw);return e instanceof Error&&"code"in e&&typeof e.code=="number"&&t.includes(e.code)},"isFlateError"),WF=o((e,t,r)=>{var n;return new Ea(Jn.Validate,(n=ux(e,t,r))!=null?n:"Unknown validate error")},"checkErrorIntoDecompressError"),JF=o(e=>new Ea(Jn.Decode,e.message),"decodeErrorIntoDecompressError"),ZF=o(e=>new Ea(Jn.Unknown,e instanceof Error?e.message:String(e)),"unknownErrorIntoDecompressError"),Iu=o((e,t,r)=>t instanceof Oc?JF(t):t instanceof po?WF(e,t,r):HF(t)?GF(t):ZF(t),"intoDecompressError");v();v();v();var YF=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,QF=[0,31,28,31,30,31,30,31,31,30,31,30,31],XF=o(e=>e%4===0&&(e%100!==0||e%400===0),"isLeapYear"),px=o(e=>{let t=YF.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(n===2&&XF(r)?29:QF[n])},"date");v();var eT=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i,mx=o(e=>{let t=eT.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3],a=t[4],s=t[5]==="-"?-1:1,l=+(t[6]||0),d=+(t[7]||0);if(l>23||d>59||!a)return!1;if(r<=23&&n<=59&&i<60)return!0;let c=n-d*s,p=r-l*s-(c<0?1:0);return(p===23||p===-1)&&(c===59||c===-1)&&i<61},"time"),tT=/t|\s/i,rT=o(e=>{let t=e.split(tT);return t.length===2&&px(t[0])&&mx(t[1])},"dateTime");v();var nT=/\/|:/,oT=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,iT=o(e=>nT.test(e)&&oT.test(e),"uri"),aT=[["date",px],["time",mx],["date-time",rT],["uri",iT]],sT=o(()=>{for(let[e,t]of aT)try{Va.Format(e,t)}catch(r){if(r instanceof yg)continue;throw r}},"registerFormats");v();v();v();var lT=o(e=>e instanceof Error?e:new Error(String(e)),"asError"),hx=o(e=>(...t)=>{try{return Se(e(...t))}catch(r){return Fe(lT(r))}},"safeFn"),cT=hx((e,t)=>{let r={};for(let n of t)for(let i of n.intoBundle(e))r[i.path]=Ai(JSON.stringify(i.contents));return r}),wu=o(async(e,t,r)=>cT(e,t).andThenAsync(n=>new Promise(i=>{lx(n,Me(oe({},r),{consume:!0}),(a,s)=>{i(a?Fe(a):Se(s))})})),"compress");v();v();function _i(e,t,r=[]){let n=oe({},e);for(let[i,a]of Object.entries(t))if(a!==void 0)if(i in n){let s=i;if(Array.isArray(a)&&a.length>0){let l=yx(a[0],r);if(l){let d=n[s];if(!Array.isArray(d))throw new Error("Expected array at ".concat(i,", got ").concat(typeof d));let c=new Map(a.map(f=>[as(f,l),f])),p=d.map(f=>{let h=c.get(as(f,l));return h?_i(f,h,r):f});n[s]=p}else n[s]=a}else{let l=n[s];typeof l=="object"&&l!==null&&typeof a=="object"&&a!==null?Object.keys(a).length===0?n[s]=a:n[s]=_i(l,a,r):n[i]=a}}else n[i]=a;return n}o(_i,"deepMergeOn");function yx(e,t){function r(n){if(typeof n!="object"||n===null)return null;for(let i of t)if(i in n&&typeof n[i]<"u")return[i];if(Array.isArray(n))return null;for(let[i,a]of Object.entries(n)){let s=r(a);if(s)return[i,...s]}return null}return o(r,"search"),r(e)}o(yx,"findIdentifierKey");function as(e,t){return t.reduce((r,n)=>{if(r&&typeof r=="object")return r[n]},e)}o(as,"getValueByKeyPath");var uT=o(e=>e,"identity"),dT=o(e=>JSON.parse(Rc(e)),"jsonDecode"),fT=o((e,t)=>t.some(r=>r.fromBundle(e.name,new Uint8Array,uT)!==void 0),"isFileExpected"),pT=hx((e,t)=>{let r={};for(let n of Object.keys(e)){let i=e[n];for(let a of t){let s=a.fromBundle(n,i,dT);if(s){r=_i(r,s,[]);break}}}return r}),xu=o(async(e,t)=>new Promise(r=>cx(e,{filter:o(n=>fT(n,t),"filter")},(n,i)=>{r(n?Fe(n):Se(i))})).then(r=>r.andThen(n=>pT(n,t))),"decompress");v();var mT=o(e=>typeof e=="object"&&e!=null&&"$ref"in e&&typeof e.$ref=="string","isRef"),hT=o(e=>{if(e.length<2)return!1;let t=e.filter(mT);if(t.length!==e.length)return!1;let r=t[0].$ref;return t.slice(1).every(n=>n.$ref===r)},"isDuplicateRef"),ss=o(e=>typeof e=="object"&&e!=null&&"allOf"in e&&Array.isArray(e.allOf)&&hT(e.allOf)?e.allOf[0]:typeof e=="object"&&e!=null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,ss(r)])):Array.isArray(e)?e.map(ss):e,"fixDuplicateAllOf");v();var ls=o(e=>typeof e=="object"&&e!=null&&"$ref"in e?Me(oe({},e),{$ref:"#/definitions/".concat(e.$ref)}):typeof e=="object"&&e!=null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,ls(r)])):Array.isArray(e)?e.map(ls):e,"prefixReferences"),Dn;(function(e){e.InvalidTypeboxSchema="InvalidTypeboxSchema",e.MissingReferenceId="MissingReferenceId",e.DuplicateReferenceId="DuplicateReferenceId",e.TypeboxError="TypeboxError",e.UnknownError="UnknownError"})(Dn||(Dn={}));var yT=o(e=>({next(){for(let t of e){let r=t.next();if(!r.done)return r}return{done:!0,value:void 0}},[Symbol.iterator](){return this}}),"join"),gT=o((...e)=>{let t=new Map;for(let r of yT(e)){if(!r.$id)continue;let n=t.get(r.$id);if(n!=null&&n!==r)return Fe({kind:Dn.DuplicateReferenceId,message:"Failed to register a reference for a schema with an $id that has already been used",schema:r});t.set(r.$id,r)}return Se(t)},"computeReferenceMap"),sr,Cn,Yr,Er,gx=class vx{constructor(t,r,n,i){Oo(this,sr),Oo(this,Cn),Oo(this,Yr,[]),Oo(this,Er),ri(this,sr,t),ri(this,Cn,r),ri(this,Yr,n),ri(this,Er,i),this.is=this.is.bind(this),this.parse=this.parse.bind(this),this.verify=this.verify.bind(this),this.jsonSchema=this.jsonSchema.bind(this),this.compress=this.compress.bind(this),this.decompress=this.decompress.bind(this)}static create(t,r="CoreMVF"){let n=u.Composite(t.extensions.map(a=>a.schema),{$id:r});if(!U.IsSchema(n))return Fe({kind:Dn.InvalidTypeboxSchema,message:"Attempting to merge schemas produced an invalid schema",schema:n});let i=gT(DS.values(),CS.values(),MS.values(),LS.values(),US.values(),XS.values(),t.extensions.flatMap(a=>{var s;return(s=a.references)!=null?s:[]}).values());if(!i.isOk())return i;try{sT();let a=es.Compile(n,[...i.value.values()]);return Se(new vx(n,a,t.extensions,i.value))}catch(a){return a instanceof Xe?Fe({kind:Dn.TypeboxError,message:a.message,original:a}):Fe({kind:Dn.UnknownError,message:"An unknown error occurred while compiling the schema",original:a})}}is(t){return et(this,Cn).Check(t)}parse(t){return et(this,Cn).Check(t)?Se(t):Fe(et(this,Cn).Errors(t))}decode(t){try{return Se(jw(et(this,sr),[...et(this,Er).values()],t))}catch(r){return Fe(r)}}encode(t){try{return Se(Uw(et(this,sr),[...et(this,Er).values()],t))}catch(r){return Fe(r)}}verify(t){for(let r of et(this,Yr))if(r.integrityCheck){let n=r.integrityCheck(t);if(n.isErr())return Fe(n.error)}return Se(!0)}jsonSchema(){var t;let r=JSON.parse(JSON.stringify([et(this,sr),...et(this,Er).values()])),n=ss(ls({$id:"#/definitions/".concat((t=et(this,sr).$id)!=null?t:"CoreMVF"),$schema:"http://json-schema.org/draft-07/schema#",references:r}));return JSON.stringify(n,null,2)}async compress(t){return this.encode(t).andThen(r=>this.parse(r)).andThenAsync(r=>wu(r,et(this,Yr))).then(r=>r.mapErr(n=>{var i;return bu((i=et(this,sr).$id)!=null?i:"CoreMVF",n,[...et(this,Er).values()])}))}async compressUnsafe(t){return this.encode(t).andThenAsync(r=>wu(r,et(this,Yr))).then(r=>r.mapErr(n=>{var i;return bu((i=et(this,sr).$id)!=null?i:"CoreMVF",n,[...et(this,Er).values()])}))}async decompress(t){return xu(t,et(this,Yr)).then(r=>r.andThen(n=>this.parse(n)).andThen(n=>this.decode(n)).mapErr(n=>{var i;return Iu((i=et(this,sr).$id)!=null?i:"CoreMVF",n,[...et(this,Er).values()])}))}async decompressUnsafe(t){return xu(t,et(this,Yr)).then(r=>r.andThen(n=>this.decode(n)).mapErr(n=>{var i;return Iu((i=et(this,sr).$id)!=null?i:"CoreMVF",n,[...et(this,Er).values()])}))}};sr=new WeakMap,Cn=new WeakMap,Yr=new WeakMap,Er=new WeakMap,o(gx,"MVFParser");var vT=gx,Eo,bx=class{constructor(){Oo(this,Eo,[]),this.extend=this.extend.bind(this)}extend(t){return et(this,Eo).push(t),this}extendOptional(t){let r=Me(oe({},t),{schema:u.Partial(t.schema)});return et(this,Eo).push(r),this}build(){return vT.create(this)}get extensions(){return et(this,Eo)}};Eo=new WeakMap,o(bx,"MVFParserBuilder");var bT=bx,IT=o(()=>new bT().extend(qS).extend(JS).extend(QS),"createParser"),No=Mt("lcat","LocationCategoryId"),Ix=u.Intersect([u.Object({id:u.Ref(No),parent:u.Optional(u.Ref(No))}),uc(["name"]),Wo],{$id:"LocationCategory"}),wT=[No,Ix];v();v();var Un;(function(e){e.UnknownCategoryError="UnknownCategoryError",e.UnknownParentCategoryError="UnknownParentCategoryError",e.UnknownParentLocationError="UnknownParentLocationError"})(Un||(Un={}));var xT=o(e=>{var t,r,n,i,a,s,l,d,c;if(e.locationCategories==null&&e.locations==null)return Se(!0);let p=new Set((r=(t=e.locationCategories)==null?void 0:t.map(w=>w.id))!=null?r:[]);for(let w of(n=e.locationCategories)!=null?n:[])if(w.parent!=null&&!p.has(w.parent))return Fe({kind:Un.UnknownParentCategoryError,properties:{categoryId:w.id,parentCategoryId:w.parent}});let f=Wr(e);for(let w of(i=e.locations)!=null?i:[]){for(let N of w.categories)if(!p.has(N))return Fe({kind:Un.UnknownCategoryError,properties:{locationId:w.id,categoryId:N}});for(let N of w.geometryAnchors){let k=f(N.floorId,N.geometryId);if(k.isErr())return k}}let h=new Set((s=(a=e.locations)==null?void 0:a.map(w=>w.id))!=null?s:[]);for(let w of(l=e.locationInstances)!=null?l:[]){if(!h.has(w.parentId))return Fe({kind:Un.UnknownParentLocationError,properties:{locationInstanceId:w.id,parentLocationId:w.parentId}});for(let N of(d=w.categories)!=null?d:[])if(!p.has(N))return Fe({kind:Un.UnknownCategoryError,properties:{locationId:w.id,categoryId:N}});for(let N of(c=w.geometryAnchors)!=null?c:[]){let k=f(N.floorId,N.geometryId);if(k.isErr())return k}}return Se(!0)},"validateLocations");v();var ti=Mt("loc","LocationId"),Cc=Mt("loci","LocationInstanceId"),wx=u.Object({name:u.String(),url:u.String({format:"uri"})},{$id:"LocationSocial"}),xx=u.Object({url:u.String({format:"uri"})},{$id:"LocationImage"}),cs=u.Object({label:u.String(),url:u.String({format:"uri"})},{$id:"LocationLink"}),us=u.String({pattern:"^[0-2][0-9]:[0-6][0-9](:[0-6][0-9])?$",$id:"OpeningHoursTime"}),Ox=u.Union([u.Literal("Sunday"),u.Literal("Monday"),u.Literal("Tuesday"),u.Literal("Wednesday"),u.Literal("Thursday"),u.Literal("Friday"),u.Literal("Saturday")],{$id:"OpeningHoursDay"}),OT="PublicHolidays",ds=u.Union([Ox,u.Literal(OT)],{$id:"OpeningHoursDayOrPublicHoliday"}),Mc=u.Object({"@type":u.Optional(u.Literal("OpeningHoursSpecification",{description:"The type of opening hours"})),opens:u.Optional(u.Ref(us,{description:"The time the opening hours start"})),closes:u.Optional(u.Ref(us,{description:"The time the opening hours end"})),dayOfWeek:u.Optional(u.Union([u.Ref(ds),u.Array(u.Ref(ds))],{description:"The days of the week the opening hours apply to"})),validFrom:u.Optional(u.String({format:"date-time",description:"The date the opening hours start, in ISO 8601 format"})),validTo:u.Optional(u.String({format:"date-time",description:"The date the opening hours end, in ISO 8601 format"}))},{$id:"OpeningHoursSpecification"}),Lc=u.Intersect([u.Object({id:u.Ref(ti),categories:u.Array(u.Ref(No)),logo:u.Optional(u.String({format:"uri"})),phone:u.Optional(u.String()),social:u.Array(u.Ref(wx)),images:u.Array(u.Ref(xx)),links:u.Array(u.Ref(cs)),website:u.Optional(u.Ref(cs)),openingHours:u.Optional(u.Array(u.Ref(Mc)))}),uc(["name"]),dc(),Wo],{$id:"Location"}),Px=u.Intersect([u.Object({id:u.Ref(Cc),parentId:u.Ref(ti)}),u.Partial(u.Omit(Lc,["id","parentId"]))],{$id:"LocationInstance"}),Ex=[ti,Cc,wx,xx,cs,us,Ox,ds,Mc,Lc,Px],PT=u.Object({locations:u.Array(u.Ref(Lc)),locationCategories:u.Array(u.Ref(Ix)),locationInstances:u.Optional(u.Array(u.Ref(Px)))},{$id:"LocationsExtensionSchema"}),Ou="locations.json",Pu="location-categories.json",Eu="location-instances.json",ET={name:"ext:locations",schema:PT,intoBundle:o(function*(e){e.locations!=null&&(yield{path:Ou,contents:e.locations}),e.locationCategories!=null&&(yield{path:Pu,contents:e.locationCategories}),e.locationInstances!=null&&(yield{path:Eu,contents:e.locationInstances})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e===Ou)return{locations:r(t)};if(e===Pu)return{locationCategories:r(t)};if(e===Eu)return{locationInstances:r(t)}},"fromBundle"),references:[...wT,...Ex],integrityCheck:xT};v();v();var Rr;(function(e){e.UnknownEnterpriseLocationError="UnknownEnterpriseLocationError",e.EnterpriseLocationWithUnknownLocationError="EnterpriseLocationWithUnknownLocationError",e.EnterpriseCategoryWithUnknownLocationCategoryError="EnterpriseCategoryWithUnknownLocationCategoryError",e.InstanceWithUnknownLocationInstanceError="InstanceWithUnknownLocationInstanceError",e.InstanceWithUnknownEnterpriseLocationError="InstanceWithUnknownEnterpriseLocationError",e.EnterpriseLocationWithUnknownSibling="EnterpriseLocationWithUnknownSibling",e.EnterpriseLocationInstanceWithUnknownSibling="EnterpriseLocationInstanceWithUnknownSibling"})(Rr||(Rr={}));var ST=o(e=>{var t,r,n,i,a,s,l,d,c,p,f,h,w,N,k,O,g,y,I,m;if(e.enterprise==null)return Se(!0);let b=e.enterprise,x=new Set((r=(t=e.locationCategories)==null?void 0:t.map(M=>M.id))!=null?r:[]);for(let M of(n=b.categories)!=null?n:[])if(!x.has(M.categoryId))return Fe({kind:Rr.EnterpriseCategoryWithUnknownLocationCategoryError,properties:{enterpriseCategoryId:M.id,locationCategoryId:M.categoryId}});let P=new Set((a=(i=e.locations)==null?void 0:i.map(M=>M.id))!=null?a:[]);for(let M of(s=b.locations)!=null?s:[]){if(!P.has(M.locationId))return Fe({kind:Rr.EnterpriseLocationWithUnknownLocationError,properties:{enterpriseLocationId:M.id,locationId:M.locationId}});for(let z of(l=M.siblingGroups)!=null?l:[])for(let Q of(d=z.siblings)!=null?d:[])if(!P.has(Q))return Fe({kind:Rr.EnterpriseLocationWithUnknownSibling,properties:{enterpriseLocationId:M.id,siblingLocationId:Q,label:z.label}})}let F=new Set((p=(c=e.enterprise.locations)==null?void 0:c.map(M=>M.id))!=null?p:[]);if(((f=b.venue)==null?void 0:f.topLocations)!=null){for(let M of b.venue.topLocations)if(!F.has(M))return Fe({kind:Rr.UnknownEnterpriseLocationError,properties:{enterpriseLocationId:M}})}let S=new Set((w=(h=e.locationInstances)==null?void 0:h.map(M=>M.id))!=null?w:[]);for(let M of(N=b.locationInstances)!=null?N:[]){if(!F.has(M.parentId))return Fe({kind:Rr.InstanceWithUnknownEnterpriseLocationError,properties:{enterpriseLocationInstanceId:M.id,enterpriseLocationId:M.parentId}});if(!S.has(M.locationInstanceId))return Fe({kind:Rr.InstanceWithUnknownLocationInstanceError,properties:{enterpriseLocationInstanceId:M.id,locationInstanceId:M.locationInstanceId}});for(let z of(k=M.siblingGroups)!=null?k:[])for(let Q of(O=z.siblings)!=null?O:[])if(!P.has(Q))return Fe({kind:Rr.EnterpriseLocationInstanceWithUnknownSibling,properties:{enterpriseLocationInstanceId:M.id,siblingLocationId:Q,label:z.label}})}let C=va(e),q=Wr(e);for(let[M,z]of gt((g=b.floorText)!=null?g:{})){let Q=C(M);if(Q.isErr())return Q;for(let ae of z.features){if(!("geometryId"in ae.properties))continue;let Y=q(M,ae.properties.geometryId);if(Y.isErr())return Y}}for(let[M,z]of gt((y=b.textures)!=null?y:{})){let Q=C(M);if(Q.isErr())return Q;for(let ae of z){let Y=q(M,ae.geometryId);if(Y.isErr())return Y}}for(let[M,z]of gt((I=b.layers)!=null?I:{})){let Q=C(M);if(Q.isErr())return Q;for(let ae of yt(z??{})){let Y=q(M,ae);if(Y.isErr())return Y}}for(let[M,z]of gt((m=b.textAreas)!=null?m:{})){let Q=C(M);if(Q.isErr())return Q;for(let ae of z.features)if("geometryId"in ae.properties){let Y=q(M,ae.properties.geometryId);if(Y.isErr())return Y}}return Se(!0)},"validateCMS");v();v();var Sa=Mt("el","EnterpriseLocationId"),Sx=Mt("ec","EnterpriseCategoryId"),Fx=Mt("eli","EnterpriseLocationInstanceId"),Tx=Mt("ev","EnterpriseVenueId"),jx=Mt("eft","EnterpriseFloorTextId"),FT=[Sa,Sx,Fx,Tx,jx],kx=u.Object({id:u.Ref(Sx),categoryId:u.Ref(No),color:u.Optional(u.String()),sortOrder:u.Number(),iconFromDefaultList:u.Optional(u.Union([u.String(),u.Null()])),picture:u.Optional(u.String({format:"uri",description:"The category's picture"}))},{$id:"EnterpriseCategory"}),Ax=u.Object({categories:u.Optional(u.Array(u.Ref(kx)))},{$id:"EnterpriseCategoriesSchema"}),TT=[kx,Ax];v();var Nx=Tn(["left","center","right"]),jT=Nx.schema;Nx.values;var Uc=u.Object({id:u.Ref(jx),text:u.String(),visible:u.Boolean({default:!0}),fontSize:u.Number({default:12,minimum:1}),fontFamily:u.String({default:"Droid Sans"}),color:u.String({default:"black"}),rotation:u.Number({minimum:0,maximum:360}),align:jT},{$id:"FloorTextCommonProperties"}),Dc=u.Intersect([u.Ref(Uc),fo],{$id:"AnchoredFloorTextProperties"}),Bc=u.Intersect([u.Ref(Uc),u.Object({verticalOffset:u.Number()})],{$id:"FloatingFloorTextProperties"}),_x=u.Union([u.Ref(Dc),u.Ref(Bc)],{$id:"FloorTextProperties"}),$x=Hr(Gr,u.Ref(_x),{$id:"FloorTextFeature"}),kT=Hr(Gr,u.Ref(Dc),{$id:"AnchoredFloorTextFeature"}),AT=Hr(Gr,u.Ref(Bc),{$id:"FloatingFloorTextFeature"}),Rx=Fn(u.Ref($x),{$id:"EnterpriseFloorTextFeatureCollection"}),Cx=u.Record(xt,u.Ref(Rx),{$id:"EnterpriseFloorTextCollectionsByFloor",additionalProperties:!1}),Mx=u.Object({floorText:u.Optional(u.Ref(Cx))},{$id:"EnterpriseFloorTextSchema"}),NT=[Uc,Dc,Bc,_x,$x,kT,AT,Rx,Cx,Mx];v();var Lx=Bt(u.Record(Kr,u.String({minLength:1}),{additionalProperties:!1,$id:"EnterpriseLayers"})),Ux=Bt(u.Record(xt,u.Ref(Lx),{additionalProperties:!1,$id:"EnterpriseLayersByFloor"})),Dx=u.Object({layers:u.Optional(u.Ref(Ux))},{$id:"EnterpriseLayersSchema"}),_T=[Lx,Ux,Dx];v();v();v();var qc=Tn(["closed-temporarily","new","pop-up","coming-soon","relocated"]),$T=qc.schema;qc.values;qc.record;var Bx=u.Object({type:$T,start:u.Optional(u.String({format:"date",description:"The start date of the state"})),end:u.Optional(u.String({format:"date",description:"The end date of the state"}))},{$id:"LocationState",description:"The state of a location. Start and end dates are optional."}),qx=u.Object({label:u.String(),siblings:u.Array(u.Ref(ti))},{$id:"SiblingGroup"}),fs=u.Object({name:u.String(),code:u.String()},{$id:"Language"}),RT=[Bx,qx,fs],zc=u.Object({id:u.Ref(Sa),locationId:u.Ref(ti),type:u.String(),sortOrder:u.Number(),tags:u.Optional(u.Array(u.String())),picture:u.Optional(u.String({format:"uri",description:"The picture of the location"})),states:u.Optional(u.Array(u.Ref(Bx),{description:"The location's state. No more than one state should be active at a time, and all but at most one should have dates set"})),siblingGroups:u.Optional(u.Array(u.Ref(qx))),gallery:u.Optional(u.Array(u.Object({caption:u.Optional(u.String()),image:u.String({format:"uri"}),embeddedUrl:u.Optional(u.String({format:"uri",description:"The URL to link from the image"}))},{description:"The location's image gallery"}),{description:"The location's image gallery"})),showFloatingLabelWhenImagePresent:u.Optional(u.Boolean({description:"Whether to show the flat label when an image is present"})),amenity:u.Optional(u.String({description:"The location's amenity type. Only set if the location is an amenity"})),showLogo:u.Optional(u.Boolean({description:"Whether to show the logo of the location"}))},{$id:"EnterpriseLocation"}),zx=u.Object({locations:u.Optional(u.Array(u.Ref(zc)))},{$id:"EnterpriseLocationsSchema"}),CT=[zc,zx],Vx=u.Intersect([u.Object({id:u.Ref(Fx),parentId:u.Ref(Sa),locationInstanceId:u.Ref(Cc)}),u.Partial(u.Omit(zc,["id","parentId","locationId"]))],{$id:"EnterpriseLocationInstance",description:"A locationInstance is a particular instance of an Enterprise Location that has some properties different from the parent."}),Kx=u.Object({locationInstances:u.Optional(u.Array(u.Ref(Vx)))},{$id:"EnterpriseLocationInstancesSchema"}),MT=[Vx,Kx];v();var Vc=Tn(["near","center"],{$id:"EnterpriseTextAreaAlignment"}),Gx=Vc.schema;Vc.values;Vc.record;var Kc=u.Object({maxWidth:u.Number({exclusiveMinimum:0,description:"The maximum width of the label, in meters."}),maxHeight:u.Number({exclusiveMinimum:0,description:"The maximum height of the label, in meters."}),align:u.Ref(Gx),rotation:u.Number({minimum:0,maximum:360,description:"Rotation in degrees, about the center of the image. North is 0, east is 90."})},{$id:"EnterpriseBaseTextAreaProperties"}),Hx=u.Intersect([u.Ref(Kc),fo],{$id:"EnterpriseAnchoredTextAreaProperties"}),Wx=u.Intersect([u.Ref(Kc),u.Object({verticalOffset:u.Number({minimum:0,description:"How high to position the image, in meters, relative to the ground plane."})})],{$id:"EnterpriseFloatingTextAreaProperties"}),Jx=u.Union([Hx,Wx],{$id:"EnterpriseTextAreaProperties"}),Zx=Hr(u.Ref(Gr),Jx,{$id:"EnterpriseTextAreaFeature"}),Yx=Fn(u.Ref(Zx),{$id:"EnterpriseTextAreaCollection"}),Qx=u.Record(xt,u.Ref(Yx),{$id:"EnterpriseTextAreasByFloor",additionalProperties:!1}),LT=u.Object({textAreas:u.Optional(u.Ref(Qx))},{$id:"EnterpriseTextAreasSchema"}),UT=[Gx,Kc,Hx,Wx,Jx,Zx,Yx,Qx];v();var ps=u.Object({u:u.Number(),v:u.Number()},{$id:"EnterpriseTextureUV"}),Gc=Tn(["top","side"],{$id:"EnterpriseTextureFace"}),Xx=Gc.schema;Gc.values;Gc.record;var Hc=Tn(["inside","outside","both"],{$id:"EnterpriseTextureSurface"}),eO=Hc.schema;Hc.values;Hc.record;var tO=u.Tuple([xi,Oi,xi,Oi],{$id:"EnterpriseTextureBounds"}),rO=u.Intersect([u.Object({repeat:u.Ref(ps),offset:u.Ref(ps),rotation:u.Number({minimum:0,maximum:360}),path:u.String({format:"uri"}),face:u.Ref(Xx),surface:u.Ref(eO),bounds:u.Ref(tO)},{$id:"EnterpriseTextureProperties"}),fo],{$id:"EnterpriseTexture"}),nO=u.Array(u.Ref(rO),{$id:"EnterpriseTextures"}),oO=u.Record(xt,u.Ref(nO),{$id:"EnterpriseTexturesByFloor",additionalProperties:!1}),iO=u.Object({textures:u.Optional(u.Ref(oO))},{$id:"EnterpriseTexturesSchema"}),DT=[rO,nO,iO,ps,Xx,eO,tO,oO];v();var aO=u.Intersect([u.Object({id:u.Ref(Tx),slug:u.String(),defaultLanguage:u.Ref(fs),languages:u.Array(u.Ref(fs)),countrycode:u.Optional(u.String()),logo:u.Optional(u.String({format:"uri"})),mappedinWebUrl:u.Optional(u.String({format:"uri"})),topLocations:u.Optional(u.Array(u.Ref(Sa))),operationHours:u.Optional(u.Array(u.Ref(Mc))),coverImage:u.Optional(u.String({format:"uri"}))}),uc(["name"]),Wo],{$id:"EnterpriseVenue"}),sO=u.Object({venue:u.Optional(u.Ref(aO))},{$id:"EnterpriseVenueSchema"}),BT=[aO,sO],lO=u.Intersect([sO,zx,Kx,Ax,iO,Mx,Dx,LT],{$id:"EnterpriseProperties"}),Su=u.Object({enterprise:u.Optional(u.Ref(lO))},{$id:"CMSExtensionSchema"}),qT=/^enterprise\/(?:([^/]+)\/)?([^/]+)\.(?:json|geojson)$/,zT={name:"ext:cms",schema:Su,intoBundle:o(function*(e){var t,r,n,i,a,s;if(e.enterprise==null)return;let l=e.enterprise;for(let d of yt(l))switch(d){case"floorText":for(let c of yt((t=l.floorText)!=null?t:{}))yield{path:"enterprise/floorText/".concat(c,".geojson"),contents:((r=l.floorText)!=null?r:{})[c]};continue;case"textures":for(let c of yt((n=l.textures)!=null?n:{}))yield{path:"enterprise/textures/".concat(c,".json"),contents:((i=l.textures)!=null?i:{})[c]};continue;case"textAreas":for(let c of yt((a=l.textAreas)!=null?a:{}))yield{path:"enterprise/textAreas/".concat(c,".geojson"),contents:((s=l.textAreas)!=null?s:{})[c]};continue;default:yield{path:"enterprise/".concat(d,".json"),contents:l[d]};continue}},"intoBundle"),fromBundle:o((e,t,r)=>{let n=e.match(qT);if(!n)return;let[,i,a]=n,s=r(t);switch(i){case"floorText":case"textures":case"textAreas":return{enterprise:{[i]:{[a]:s}}};default:return{enterprise:{[a]:s}}}},"fromBundle"),references:[lO,Su,...BT,...CT,...MT,...TT,...DT,..._T,...NT,...UT,...FT,...RT,...Ex],integrityCheck:ST};v();v();v();v();var Mr;(function(e){e.NavigationFlagMissingDeclaration="NavigationFlagMissingDeclaration",e.NavigationFlagDuplicateBit="NavigationFlagDuplicateBit",e.NavigationFlagIncorrectFlagsLength="NavigationFlagIncorrectFlagsLength",e.NavigationFlagValueTooBig="NavigationFlagValueTooBig"})(Mr||(Mr={}));var VT=o(e=>{let{navigationFlags:t}=e;if(!t||Object.keys(t).length===0)return Se(!0);let r=Object.entries(t).map(([a,s])=>oe({key:a},s)).sort((a,s)=>a.index!==s.index?a.index-s.index:a.bit-s.bit),n=0,i=-1;for(let a of r){if(a.bit===i)return Fe({kind:Mr.NavigationFlagDuplicateBit,properties:{index:a.index,bit:a.bit,path:"navigationFlags.".concat(a.key)}});if(a.index!=n){if(i!=31)return Fe({kind:Mr.NavigationFlagMissingDeclaration,properties:{index:n,bit:i+1,path:"navigationFlags"}});if(a.index!=n+1||a.bit!=0)return Fe({kind:Mr.NavigationFlagMissingDeclaration,properties:{index:n+1,bit:0,path:"navigationFlags"}});n=a.index,i=0}else{if(a.bit!==i+1)return Fe({kind:Mr.NavigationFlagMissingDeclaration,properties:{index:a.index,bit:i+1,path:"navigationFlags"}});i=a.bit}}return Se(!0)},"validateNavigationFlags");v();function _o(e,t){return t&&(e.flags[t.index]&1<<t.bit)!==0}o(_o,"hasFlag");v();var Fu=2**32-1,cO=o(e=>{var t;let r=Object.keys((t=e.navigationFlags)!=null?t:{}).length;if(r===0)return{index:-1,flag:0};let n=Math.floor(r/32),i=r%32;return{index:n,flag:2**i-1}},"determineMaxNavigationFlags"),ms=o((e,t,r)=>{if(t.index==-1&&e.length===0)return Se(!0);let n=t.flag>0||t.index===-1?t.index+1:t.index;if(e.length!==n)return Fe({kind:Mr.NavigationFlagIncorrectFlagsLength,properties:{expected:n,actual:e.length,path:r}});for(let i=0;i<e.length;i++){let a=e[i];if(i<t.index){if(a>Fu)return Fe({kind:Mr.NavigationFlagValueTooBig,properties:{index:i,flagValue:a,expectedMaxFlagValue:Fu,path:r}});continue}else if(a>t.flag)return Fe({kind:Mr.NavigationFlagValueTooBig,properties:{index:i,flagValue:a,expectedMaxFlagValue:t.flag,path:r}})}return Se(!0)},"validateFlags"),KT=u.Object({index:u.Integer({description:"The index of the flag in a flags array.",minimum:0}),bit:u.Integer({description:"The bit position of the flag in a flag's bitfield.",minimum:0,maximum:31})},{$id:"NavigationFlagDeclarationCore"}),uO=u.Intersect([KT,Ho],{$id:"NavigationFlagDeclaration",description:'A NavigationFlagDeclaration describes the relationship between a "key" that a developer might use to wayfind using that flag, and the index and bit position in an object\'s `flags` array.'}),Tu={accessible:"accessible",outdoors:"outdoors"},dO=u.Record(u.String(),uO,{$id:"NavigationFlagDeclarations",description:"Any well known and custom flags present in the MVF"}),GT=u.Object({navigationFlags:u.Ref(dO)},{$id:"NavigationFlagsSchema"}),Wc=u.Array(u.Integer({minimum:0,maximum:Math.pow(2,32)-1}),{$id:"Flags"}),fO=u.Object({flags:u.Ref(Wc)},{$id:"WithFlags"}),Zn=u.Intersect([ga,fO],{$id:"FlaggedGeometryAnchor"}),HT=u.Object({geometryAnchor:Zn},{$id:"WithFlaggedGeometryAnchor"}),WT=u.Object({geometryAnchors:u.Array(Zn)},{$id:"WithFlaggedGeometryAnchors"}),JT={name:"ext:mvf-navigation-flags",schema:GT,intoBundle:o(function*(e){e.navigationFlags!=null&&(yield{path:"navigationFlags.json",contents:e.navigationFlags})},"intoBundle"),fromBundle:o((e,t,r)=>e!=="navigationFlags.json"?void 0:{navigationFlags:r(t)},"fromBundle"),references:[uO,dO,Wc,Zn,HT,WT],integrityCheck:VT};v();var ZT=o(e=>{if(e.connections==null)return Se(!0);let t=Wr(e),r=cO(e);for(let[n,i]of e.connections.entries()){for(let[a,s]of i.entrances.entries()){let l=t(s.floorId,s.geometryId);if(l.isErr())return l;let d=ms(s.flags,r,"connections[".concat(n,"].entrances[").concat(a,"]"));if(d.isErr())return d}for(let[a,s]of i.exits.entries()){let l=t(s.floorId,s.geometryId);if(l.isErr())return l;let d=ms(s.flags,r,"connections[".concat(n,"].exits[").concat(a,"]"));if(d.isErr())return d}}return Se(!0)},"validateConnections"),pO=Mt("c","ConnectionId"),{schema:YT,values:KA,record:QT}=Tn(["elevator","escalator","travelator","stairs","door","ramp"],{$id:"ConnectionType"}),mO=YT,hO=QT,yO=u.Intersect([u.Object({id:u.Ref(pO,{description:"The unique identifier for the connection."}),entrances:u.Array(u.Ref(Zn)),exits:u.Array(u.Ref(Zn)),entryCost:u.Number({description:"The cost to enter the connection.",minimum:0}),floorCostMultiplier:u.Number({description:"The cost multiplier for each floor transitioned.",minimum:1}),type:u.Ref(mO,{description:"The type of connection."})}),Ho,Wo],{$id:"ConnectionsProperties"}),gO=u.Array(u.Ref(yO),{$id:"ConnectionsCollection"}),XT=u.Object({connections:u.Ref(gO)},{$id:"ConnectionsExtensionSchema"}),ju="connections.json",ej={name:"ext:connections",schema:XT,intoBundle:o(function*(e){e.connections!=null&&(yield{path:ju,contents:e.connections})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e===ju)return{connections:r(t)}},"fromBundle"),references:[yO,gO,mO,pO,Zn,Wc],integrityCheck:ZT};v();v();var tj=o(e=>{if(e.defaultStyle==null)return Se(!0);let t=Wr(e);for(let r of Object.values(e.defaultStyle))if(r!=null)for(let n of r.geometryAnchors){let i=t(n.floorId,n.geometryId);if(i.isErr())return i}return Se(!0)},"validateDefaultStyle"),vO=u.Intersect([dc(),Wo,u.Object({altitude:u.Number({description:"How far off the bottom of the floor the objects with this style should be drawn, in meters."}),color:u.String({pattern:"^#[0-9a-fA-F]{6}$",description:"Color should be represented with a hash (#), followed by 6 hexadecimal digits. ex: #RRGGBB"}),height:u.Number({minimum:0,description:"The height of the objects belonging to this layer, in meters."}),opacity:u.Number({minimum:0,maximum:1,description:"The opacity of the objects belonging to this layer, from 0 to 1."}),buffer:u.Number({description:"The buffer amount to apply to the geometry, in meters. This can be used to inflate line string geometry for walls, but might also be applicable as a way to grow or shrink polygon geometry for aesthetic purposes. Can be negative."}),hidden:u.Optional(u.Boolean({description:"Whether or not the objects with this style should be hidden."}))})],{$id:"DefaultStyle"}),bO=u.Record(u.String(),u.Ref(vO),{$id:"DefaultStyleCollection",additionalProperties:!1}),rj=u.Object({defaultStyle:u.Ref(bO)},{$id:"DefaultStyleSchema"}),nj={name:"ext:mvf-default-style",schema:rj,intoBundle:o(function*(e){e.defaultStyle!=null&&(yield{path:"default-style.json",contents:e.defaultStyle})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e==="default-style.json")return{defaultStyle:r(t)}},"fromBundle"),references:[vO,bO],integrityCheck:tj};v();v();v();v();var hs;(function(e){e.InvalidDefaultFloorError="InvalidDefaultFloorError"})(hs||(hs={}));var oj=o(e=>{if(e.floorStacks==null)return Se(!0);let t=va(e);for(let r of e.floorStacks){for(let n of r.floors){let i=t(n);if(i.isErr())return i}if(r.defaultFloor!=null&&!r.floors.includes(r.defaultFloor))return Fe({kind:hs.InvalidDefaultFloorError,properties:{floorStackId:r.id,floorId:r.defaultFloor}})}return Se(!0)},"validateFloorStacks"),Jc=Mt("fs","FloorStackId"),IO=u.Intersect([u.Object({id:u.Ref(Jc,{description:"The unique identifier for the floor stack."}),floors:u.Array(u.Ref(xt),{uniqueItems:!0,minItems:1,description:"The floors that are part of this floor stack."}),defaultFloor:u.Optional(u.Ref(xt,{description:"The default floor for the floor stack."}))}),Ho],{$id:"FloorStacksProperties"}),wO=u.Array(u.Ref(IO),{$id:"FloorStackCollection"}),ij=u.Object({floorStacks:u.Ref(wO)},{$id:"FloorStackExtensionSchema"}),ku="floor-stacks.json",aj={name:"ext:floor-stacks",schema:ij,intoBundle:o(function*(e){e.floorStacks!=null&&(yield{path:ku,contents:e.floorStacks})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e===ku)return{floorStacks:r(t)}},"fromBundle"),references:[Jc,IO,wO],integrityCheck:oj};v();v();var $i;(function(e){e.MissingFloorStackError="MissingFloorStackError",e.UnknownFloorStackError="UnknownFloorStackError"})($i||($i={}));var sj=o(e=>{if(e.facade==null)return Se(!0);if(e.floorStacks==null)return Fe({kind:$i.MissingFloorStackError,properties:null});let t=new Set(e.floorStacks.map(n=>n.id)),r=Wr(e);for(let[n,i]of gt(e.facade))if(i!=null){if(!t.has(n))return Fe({kind:$i.UnknownFloorStackError,properties:{floorStackId:n}});for(let a of i.geometryAnchors){let s=r(a.floorId,a.geometryId);if(s.isErr())return s}}return Se(!0)},"validateFacade"),xO=Mt("fc","FacadeId"),OO=u.Intersect([u.Object({id:u.Ref(xO)}),dc({minItems:1})],{$id:"FacadeProperties"}),lj=u.Object({facade:Bt(u.Record(Jc,u.Ref(OO),{additionalProperties:!1}))},{$id:"FacadeExtensionSchema"}),cj=/^facade\/(.*)\.json$/,uj={name:"ext:facade",schema:lj,intoBundle:o(function*(e){if(e.facade!=null)for(let t of yt(e.facade))yield{path:"facade/".concat(t,".json"),contents:e.facade[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n;let i=(n=e.match(cj))==null?void 0:n[1];if(i)return{facade:{[i]:r(t)}}},"fromBundle"),references:[xO,OO],integrityCheck:sj};v();v();var dj=o(e=>{if(e.floorImages==null)return Se(!0);let t=Wr(e);for(let[r,n]of gt(e.floorImages))if(n!=null)for(let i of n.features){if(!("geometryId"in i.properties))continue;let a=i.properties.geometryId,s=t(r,a);if(s.isErr())return s}return Se(!0)},"validateFloorImages"),Zc=u.Object({path:u.String({format:"uri",description:"The path to the image. This will be a remote URL."}),width:u.Number({minimum:0,description:"The width of the image when represented on the map, in meters."}),height:u.Number({minimum:0,description:"The height of the image when represented on the map, in meters."}),rotation:u.Number({minimum:0,maximum:360,description:"Rotation in degrees, about the center of the image. North is 0, east is 90."})},{$id:"BaseFloorImageProperties"}),PO=u.Intersect([u.Ref(Zc),fo],{$id:"AnchoredFloorImageProperties"}),EO=u.Intersect([u.Ref(Zc),u.Object({verticalOffset:u.Number({minimum:0,description:"How high to position the image, in meters, relative to the ground plane."})})],{$id:"FloatingFloorImageProperties"}),SO=u.Union([PO,EO],{$id:"FloorImageProperties"}),FO=Hr(u.Ref(Gr),SO,{$id:"FloorImageFeature"}),TO=Fn(u.Ref(FO),{$id:"FloorImageCollection"}),fj=u.Object({floorImages:Bt(u.Record(xt,u.Ref(TO),{additionalProperties:!1}))},{$id:"FloorImagesExtensionSchema"}),pj=/^floorImages\/(.*)\.geojson$/,mj={name:"ext:floor-images",schema:fj,intoBundle:o(function*(e){if(e.floorImages!=null)for(let t of yt(e.floorImages))yield{path:"floorImages/".concat(t,".geojson"),contents:e.floorImages[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n;let i=(n=e.match(pj))==null?void 0:n[1];if(i)return{floorImages:{[i]:r(t)}}},"fromBundle"),references:[Zc,PO,EO,SO,FO,TO],integrityCheck:dj};v();v();var hj=o(e=>{if(e.kinds==null)return Se(!0);let t=Wr(e);for(let[r,n]of gt(e.kinds))if(n!=null)for(let i of yt(n)){let a=t(r,i);if(a.isErr())return a}return Se(!0)},"validateKinds"),{values:GA,schema:yj,record:HA}=Tn(["room","hallway","wall","desk","poi","area","window"],{$id:"Kind"}),jO=yj,kO=Bt(u.Record(Kr,u.Ref(jO),{additionalProperties:!1,$id:"GeometryKinds"})),gj=u.Object({kinds:Bt(u.Record(xt,u.Ref(kO),{additionalProperties:!1}))},{$id:"KindsExtensionSchema"}),vj=/^kinds\/(.*)\.json$/,bj={name:"ext:kinds",schema:gj,intoBundle:o(function*(e){if(e.kinds!=null)for(let t of yt(e.kinds))yield{path:"kinds/".concat(t,".json"),contents:e.kinds[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n;let i=(n=e.match(vj))==null?void 0:n[1];if(i)return{kinds:{[i]:r(t)}}},"fromBundle"),references:[jO,kO],integrityCheck:hj};v();v();v();var ys;(function(e){e.UnknownNeighbor="UnknownNeighbor"})(ys||(ys={}));var Ij=o(e=>{if(e.nodes==null)return Se(!0);let t=Wr(e),r=cO(e);for(let[n,i]of gt(e.nodes)){if(i==null)continue;let a=new Set(i.features.map(s=>s.properties.id));for(let[s,l]of i.features.entries()){for(let d of l.properties.geometryIds){let c=t(n,d);if(c.isErr())return c}for(let[d,c]of l.properties.neighbors.entries()){if(!a.has(c.id))return Fe({kind:ys.UnknownNeighbor,properties:{floorId:n,nodeId:l.properties.id,neighborId:c.id}});let p=ms(c.flags,r,'nodes["'.concat(n,'"].features[').concat(s,"].properties.neighbors[").concat(d,"]"));if(p.isErr())return p}}}return Se(!0)},"validateNodes"),Yc=Mt("n","NodeId"),AO=u.Intersect([u.Object({id:u.Ref(Yc,{description:"The unique identifier for the node."}),extraCost:u.Number({minimum:0,description:"The extra cost to traverse to the node, above the straight-line distance."})}),fO],{$id:"NodeNeighbor"}),NO=u.Intersect([u.Object({id:u.Ref(Yc,{description:"The unique identifier for the node."}),neighbors:u.Array(u.Ref(AO),{description:"The neighbors of the node."})}),dg],{$id:"NodeProperties"}),_O=Hr(u.Ref(Gr),NO,{$id:"NodeFeature"}),$O=Fn(u.Ref(_O),{$id:"NodeCollection"}),wj=u.Object({nodes:Bt(u.Record(xt,u.Ref($O),{additionalProperties:!1}))},{$id:"NodesExtensionSchema"}),xj=/^nodes\/(.*)\.json$/,Oj={name:"ext:nodes",schema:wj,intoBundle:o(function*(e){if(e.nodes!=null)for(let t of yt(e.nodes))yield{path:"nodes/".concat(t,".json"),contents:e.nodes[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n;let i=(n=e.match(xj))==null?void 0:n[1];if(i)return{nodes:{[i]:r(t)}}},"fromBundle"),references:[Yc,AO,NO,_O,$O],integrityCheck:Ij};v();v();v();var gs;(function(e){e.FloorInFloorStackError="FloorInFloorStackError"})(gs||(gs={}));var Pj=o(e=>{if(e.outdoors==null)return Se(!0);let t=va(e);for(let r of e.outdoors.floors){let n=t(r);if(n.isErr())return n;if(e.floorStacks!=null){for(let i of e.floorStacks)if(i.floors.includes(r))return Fe({kind:gs.FloorInFloorStackError,properties:{floorId:r,floorStackId:i.id}})}}return Se(!0)},"validateOutdoors"),RO=u.Object({floors:u.Array(u.Ref(xt),{uniqueItems:!0,description:"A list of floor IDs that should be considered to contain outdoor features."})},{$id:"Outdoors"}),Ej=u.Object({outdoors:u.Ref(RO)},{$id:"OutdoorsExtensionSchema"}),Au="outdoors.json",Sj={name:"ext:outdoors",schema:Ej,intoBundle:o(function*(e){e.outdoors!=null&&(yield{path:Au,contents:e.outdoors})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e===Au)return{outdoors:r(t)}},"fromBundle"),references:[RO],integrityCheck:Pj};v();v();v();var vs;(function(e){e.TilesetDuplicateKeyError="TilesetDuplicateKeyError"})(vs||(vs={}));var Fj=o(e=>{if(e.tileset==null)return Se(!0);let t=new Set;if(t.add(e.tileset.default.key),e.tileset.others)for(let r of e.tileset.others){if(t.has(r.key))return Fe({kind:vs.TilesetDuplicateKeyError,properties:{key:r.key}});t.add(r.key)}return Se(!0)},"validateTilesets"),bs=u.Object({key:u.String({minLength:1,description:"Unique identifier for the tileset style."}),name:u.String({minLength:1,description:"Display name of the tileset style."}),url:u.String({format:"uri",description:"URL of the tileset style."})},{$id:"TilesetStyle",description:"A tileset style definition."}),CO=u.Object({default:u.Ref(bs,{description:"The default tileset style, which should be used."}),others:u.Optional(u.Array(u.Ref(bs,{description:"Additional tileset styles that can be used."})))},{$id:"TilesetCollection"}),Tj=u.Object({tileset:u.Ref(CO)},{$id:"TilesetExtensionSchema"}),jj={name:"ext:mvf-tileset",schema:Tj,intoBundle:o(function*(e){e.tileset!=null&&(yield{path:"tileset.json",contents:e.tileset})},"intoBundle"),fromBundle:o((e,t,r)=>{if(e==="tileset.json")return{tileset:r(t)}},"fromBundle"),references:[bs,CO],integrityCheck:Fj};v();var MO=u.Object({},{$id:"WalkableProperties"}),LO=u.Object({},{$id:"NonWalkableProperties"}),UO=Bt(u.Record(Kr,u.Ref(MO),{$id:"WalkableGeometries",additionalProperties:!1})),DO=Bt(u.Record(Kr,u.Ref(LO),{$id:"NonWalkableGeometries",additionalProperties:!1})),kj=u.Object({walkable:Bt(u.Record(xt,u.Ref(UO),{additionalProperties:!1})),nonwalkable:Bt(u.Record(xt,u.Ref(DO),{additionalProperties:!1}))},{$id:"TraversabilitySchema"}),Aj=/^walkable\/(.*)\.json$/,Nj=/^nonwalkable\/(.*)\.json$/,_j={name:"ext:mvf-traversability",schema:kj,intoBundle:o(function*(e){if(e.walkable!=null)for(let t of yt(e.walkable))yield{path:"walkable/".concat(t,".json"),contents:e.walkable[t]};if(e.nonwalkable!=null)for(let t of yt(e.nonwalkable))yield{path:"nonwalkable/".concat(t,".json"),contents:e.nonwalkable[t]}},"intoBundle"),fromBundle:o((e,t,r)=>{var n,i;let a=(n=e.match(Aj))==null?void 0:n[1];if(a!=null)return{walkable:{[a]:r(t)}};let s=(i=e.match(Nj))==null?void 0:i[1];if(s!=null)return{nonwalkable:{[s]:r(t)}}},"fromBundle"),references:[MO,LO,UO,DO]};v();v();function Is(e){return e.replace(/^g_/,"s_")}o(Is,"toSpaceId");function BO(e){return e.replace(/^g_/,"o_")}o(BO,"toObstructionId");function qO(e){return e.replace(/^g_/,"w_")}o(qO,"toWindowId");function zO(e){return e.replace(/^g_/,"ar_")}o(zO,"convertAreaId");function VO(e,t,r){switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":{let n=[],i=0,a=e.geometry.type.replace("Multi","");for(let s of e.geometry.coordinates)n.push(Me(oe({},e),{geometry:{type:a,coordinates:s},properties:Me(oe({},e.properties),{id:"".concat(t,"-").concat(i++),kind:r})}));return n}default:return[Me(oe({},e),{properties:Me(oe({},e.properties),{id:t,kind:r})})]}}o(VO,"splitMultiPartGeometryFeatureWithNewId");function Mn(e,t,r,n){let i=new Map;for(let{feature:a,floorId:s}of e){let l=a.properties.id,d=n.get(l);if(t.has(l)){let c=VO(a,r(l),d),p=c.map(h=>h.properties.id),f=p.map(h=>({geometryId:h,floorId:s}));i.set(l,{ids:p,features:c,anchors:f})}}return i}o(Mn,"mapGeometryToOtherIds");function KO(e){var t,r,n;let i={space:new Map,obstruction:new Map,area:new Map,window:new Map};if(!e.geometry)return i;let a=new Map(Object.values((t=e.kinds)!=null?t:{}).filter(f=>f!==void 0).flatMap(gt)),s=gt(e.geometry).flatMap(([f,h])=>{var w;return((w=h?.features)!=null?w:[]).map(N=>({feature:N,floorId:f}))}).flat(),l=new Set(Object.values((r=e.walkable)!=null?r:{}).filter(f=>f!==void 0).flatMap(yt)),d=new Set(Object.values((n=e.nonwalkable)!=null?n:{}).filter(f=>f!==void 0).flatMap(yt)),c=new Set(Array.from(a.entries()).filter(([f,h])=>h==="area").map(([f])=>f)),p=new Set(Array.from(a.entries()).filter(([f,h])=>h==="window").map(([f])=>f));return l.size>0&&(i.space=Mn(s,l,Is,a)),d.size>0&&(i.obstruction=Mn(s,d,BO,a)),c.size>0&&(i.area=Mn(s,c,zO,a)),p.size>0&&(i.window=Mn(s,p,qO,a)),l.size===0&&d.size===0&&c.size===0&&(i.space=Mn(s,new Set(s.map(f=>f.feature.properties.id)),Is,a)),i}o(KO,"createGeometryMaps");function GO(e){let t=HO(e),r=KO(e),n=WO(e);return{geometryMaps:r,nodesByGeometryId:t,geometryFeatureById:n}}o(GO,"buildBuilderOptions");function HO(e){var t,r,n;let i=new Map;for(let a of Object.values((t=e.nodes)!=null?t:{}))for(let s of(r=a?.features)!=null?r:[])if(s.properties.geometryIds.length>0)for(let l of s.properties.geometryIds){let d=(n=i.get(l))!=null?n:[];d.push(s.properties.id),i.set(l,d)}return i}o(HO,"buildNodesByGeometryId");function WO(e){var t,r;let n=new Map;for(let i of Object.values((t=e.geometry)!=null?t:{}))for(let a of(r=i?.features)!=null?r:[])n.set(a.properties.id,a);return n}o(WO,"buildGeometryFeatureById");v();function JO(e,t){if(!e.annotations||!e.annotationSymbols||!e.geometry)return{};let r={};for(let[n,i]of gt(e.annotations)){if(!i||i.length===0||!e.geometry[n]||e.geometry[n].features.length===0)continue;let a=new Map(e.geometry[n].features.map(l=>[l.properties.id,l])),s={type:"FeatureCollection",features:[]};for(let l of i){let d=a.get(l.geometryId);if(!d||d.geometry.type!=="Point")continue;let c={id:l.id,externalId:l.externalId,symbolId:l.symbolKey};s.features.push({type:"Feature",geometry:d.geometry,properties:c})}r[n]=s}return{annotation:r}}o(JO,"buildAnnotations");v();function ZO(e,{nodesByGeometryId:t}){var r,n,i,a,s,l,d;let c={"connection.json":[],entrance:{}},p=(r=e.navigationFlags)==null?void 0:r[Tu.accessible],f=(n=e.navigationFlags)==null?void 0:n[Tu.outdoors],h=new Map(Object.values((i=e.geometry)!=null?i:{}).flatMap(w=>{var N;return(N=w?.features)!=null?N:[]}).map(w=>[w.properties.id,w]));for(let w of(a=e.connections)!=null?a:[]){if(Qc(w,h)){let g=YO(w,h,t,f);for(let[y,I]of g)c.entrance[y]||(c.entrance[y]={type:"FeatureCollection",features:[]}),c.entrance[y].features.push(I);continue}let N=p!=null&&w.entrances.every(g=>_o(g,p))&&w.exits.every(g=>_o(g,p)),k=Array.from(new Set([...w.entrances.map(g=>t.get(g.geometryId)),...w.exits.map(g=>t.get(g.geometryId))].flat().filter(g=>g!=null))),O={id:w.id,externalId:(l=(s=w.details)==null?void 0:s.externalId)!=null?l:"",type:w.type,accessible:N,nodes:k};(d=w.details)!=null&&d.name&&(O.details={name:w.details.name}),w.extra&&(O.extra=w.extra),c["connection.json"].push(O)}return c}o(ZO,"buildConnections");function Qc(e,t){return e.type==hO.door&&e.entrances.every(r=>{let n=t.get(r.geometryId);return n?.geometry.type==="LineString"})}o(Qc,"isLineDoor");function YO(e,t,r,n){var i,a;if(e.type!==hO.door)return[];let s=[];for(let l of e.entrances){let d=t.get(l.geometryId);if(d?.geometry.type==="LineString"){let c={type:"Feature",geometry:d.geometry,properties:{id:e.id,externalId:(a=(i=e.details)==null?void 0:i.externalId)!=null?a:"",isExterior:QO(e,n)}},p=e.details;p&&(c.properties.details={name:p.name,description:p.description},p.icon&&(c.properties.details.images=[{url:p.icon,altText:"".concat(p.name," icon")}]));let f=r.get(l.geometryId);f&&f.length>0&&(c.properties.node=f[0]),s.push([l.floorId,c])}}return s}o(YO,"buildEntranceFeaturesFromConnection");function QO(e,t){return e.entrances.some(r=>_o(r,t))||e.exits.some(r=>_o(r,t))}o(QO,"isExterior");v();function XO(e,{geometryMaps:t,nodesByGeometryId:r}){var n,i,a,s,l,d,c,p,f,h,w,N,k,O,g,y,I,m,b,x,P,F,S;if(!e.enterprise)return{};let C={categories:[],locations:[],locationInstances:[],layers:[],venue:{slug:"",name:"",externalId:"",defaultLanguage:{name:"",code:""},languages:[]}},q=(n=e.manifest)==null?void 0:n.features[0];if(q&&(C.venue.defaultFloor=q.properties.defaultFloor,C.venue.tzid=q.properties.tzid,C.venue.name=q.properties.name),e.enterprise.venue){let j=e.enterprise.venue;C.venue=Me(oe({},C.venue),{slug:j.slug,name:(i=j.details.name)!=null?i:C.venue.name,externalId:(a=j.details.externalId)!=null?a:"",defaultLanguage:j.defaultLanguage,languages:j.languages,countrycode:j.countrycode,coverImage:j.coverImage,logo:j.logo,icon:j.details.icon,extra:j.extra,mappedinWebUrl:j.mappedinWebUrl,operationHours:j.operationHours,topLocations:j.topLocations})}let M=new Map,z=new Map,Q=e.locations,ae=e.enterprise.locations;if(Q&&ae){let j=new Map(Q.map(L=>[L.id,L]));for(let L of ae){let G=j.get(L.locationId);if(G){let te=G.details,E={id:L.id,name:te.name,externalId:(s=te.externalId)!=null?s:"",type:L.type,sortOrder:L.sortOrder,amenity:L.amenity,description:te.description,extra:G.extra,links:G.links,operationHours:G.openingHours,gallery:L.gallery,logo:G.logo,shortName:te.shortName,picture:L.picture,showFloatingLabelWhenImagePresent:L.showFloatingLabelWhenImagePresent,showLogo:L.showLogo,siblingGroups:L.siblingGroups,states:L.states,tags:L.tags,spaces:[],nodes:[],polygons:[]};G.phone&&(E.phone={number:G.phone});let V=ws(G.social);G.website&&(V.website=G.website.url),E.social=V;for(let A of G.geometryAnchors){let re=t.space.get(A.geometryId);if(re){let le=new Set(re.features.filter(be=>be.geometry.type==="Polygon").map(be=>be.properties.id));for(let be of re.anchors)E.spaces.push({floor:be.floorId,id:be.geometryId}),le.has(be.geometryId)&&E.polygons.push({map:be.floorId,id:be.geometryId})}let ie=r.get(A.geometryId);for(let le of ie??[])E.nodes.push({map:A.floorId,id:le})}C.locations.push(E);for(let A of G.categories)M.set(A,[...(l=M.get(A))!=null?l:[],L.id]);z.set(L.id,G.categories)}}}let Y=e.enterprise.locationInstances,ne=e.locationInstances;if(Y&&ne){let j=new Map(ne.map(G=>[G.id,G])),L=[];for(let G of Y){let te=j.get(G.locationInstanceId);if(te){let E={id:G.id,parent:G.parentId,name:(d=te.details)==null?void 0:d.name,externalId:(c=te.details)==null?void 0:c.externalId,type:G.type,sortOrder:G.sortOrder,amenity:G.amenity,description:(p=te.details)==null?void 0:p.description,extra:te.extra,links:te.links,operationHours:te.openingHours,gallery:G.gallery,picture:G.picture,showFloatingLabelWhenImagePresent:G.showFloatingLabelWhenImagePresent,showLogo:G.showLogo,siblingGroups:G.siblingGroups,states:G.states,tags:G.tags,logo:te.logo,shortName:(f=te.details)==null?void 0:f.shortName};te.phone&&(E.phone={number:te.phone});let V=ws((h=te.social)!=null?h:[]);if(te.website&&(V.website=te.website.url),Object.keys(V).length>0&&(E.social=V),(w=te.geometryAnchors)!=null&&w.length){let A=te.geometryAnchors.flatMap(re=>{var ie,le;return(le=(ie=t.space.get(re.geometryId))==null?void 0:ie.anchors)!=null?le:[]});A.length>0&&(E.spaces=A.map(re=>({floor:re.floorId,id:re.geometryId})))}if(te.geometryAnchors){E.spaces=[],E.polygons=[],E.nodes=[];for(let A of te.geometryAnchors){let re=t.space.get(A.geometryId);if(re){let le=new Set(re.features.filter(be=>be.geometry.type==="Polygon").map(be=>be.properties.id));for(let be of re.anchors)E.spaces.push({floor:be.floorId,id:be.geometryId}),le.has(be.geometryId)&&E.polygons.push({map:be.floorId,id:be.geometryId})}let ie=r.get(A.geometryId);for(let le of ie??[])E.nodes.push({map:A.floorId,id:le})}}L.push(E)}}L.length>0&&(C.locationInstances=L)}let X=e.locationCategories,J=e.enterprise.categories;if(X&&J){let j=[],L=new Map(X.map(V=>[V.id,V])),G=new Map(J.map(V=>[V.categoryId,V.id])),te=new Map;for(let V of X){let A=G.get(V.parent);if(A){let re=(N=te.get(A))!=null?N:[];re.push(V.id),te.set(A,re)}}for(let V of J){let A=L.get(V.categoryId);if(A){let re=((k=te.get(V.id))!=null?k:[]).map(le=>G.get(le)).filter(le=>le!==void 0),ie={id:V.id,name:A.details.name,externalId:(O=A.details.externalId)!=null?O:"",sortOrder:V.sortOrder,children:re,locations:(g=M.get(V.categoryId))!=null?g:[],icon:A.details.icon,picture:V.picture,color:V.color,extra:A.extra,iconFromDefaultList:V.iconFromDefaultList};j.push(ie)}}C.categories=j;let E={};for(let[V,A]of z.entries())E[V]=A.map(re=>G.get(re)).filter(re=>re!==void 0);C.categoryPriorities=E}let de={};for(let[j,L]of Object.entries((y=e.defaultStyle)!=null?y:{}))if(L.buffer>0){let G=L.geometryAnchors.flatMap(te=>{var E,V;return(V=(E=t.space.get(te.geometryId))==null?void 0:E.anchors)!=null?V:[]});de[j]={edgeOffset:L.buffer,geometryAnchors:G}}Object.keys(de).length>0&&(C.enterpriseStyles=de);let H=new Map;for(let j of Object.values((I=e.enterprise.layers)!=null?I:{}))if(j)for(let[L,G]of gt(j)){if(typeof G!="string")continue;let te=(m=H.get(G))!=null?m:{name:G,id:"ely_".concat(G),spaces:[]};te.spaces.push(...(x=(b=t.space.get(L))==null?void 0:b.anchors.map(E=>({floorId:E.floorId,spaceId:E.geometryId})))!=null?x:[]),H.set(G,te)}H.size>0&&(C.layers=Array.from(H.values()));let $=[];for(let j of Object.values((P=e.enterprise.textures)!=null?P:{}))for(let L of j){let G=(F=t.space.get(L.geometryId))==null?void 0:F.anchors;!G||G.length<1||L.face==="unknown"||L.surface==="unknown"||$.push({repeat:L.repeat,offset:L.offset,rotation:L.rotation,path:L.path,face:L.face,surface:L.surface,bounds:L.bounds,geometryAnchors:G})}$.length>0&&(C.textures=$);let D={};for(let[j,L]of Object.entries((S=e.enterprise.floorText)!=null?S:{})){let G={type:"FeatureCollection",features:[]};for(let te of L.features){if(te.properties.align==="unknown")continue;let E={align:te.properties.align,color:te.properties.color,fontFamily:te.properties.fontFamily,fontSize:te.properties.fontSize,rotation:te.properties.rotation,text:te.properties.text,visible:te.properties.visible};"geometryId"in te.properties?E.geometryId=te.properties.geometryId:E.verticalOffset=te.properties.verticalOffset,G.features.push({type:"Feature",geometry:te.geometry,properties:E})}G.features.length>0&&(D[j]=G)}Object.keys(D).length>0&&(C.floorText=D);let _={enterprise:C};if(e.enterprise.textAreas){let j={};for(let[L,G]of gt(e.enterprise.textAreas)){let te={type:"FeatureCollection",features:[]};for(let E of G.features){if(E.properties.align==="unknown")continue;let V={align:E.properties.align,maxWidth:E.properties.maxWidth,maxHeight:E.properties.maxHeight,rotation:E.properties.rotation};"geometryId"in E.properties?V.anchorId=E.properties.geometryId:V.verticalOffset=E.properties.verticalOffset;let A={type:"Feature",geometry:E.geometry,properties:V};te.features.push(A)}j[L]=te}_.textAreas=j}return _}o(XO,"buildEnterprise");var $j=["facebook","instagram","twitter"];function ws(e){let t={};for(let{name:r,url:n}of e){let i=r.toLowerCase();$j.includes(i)&&(t[i]=n)}return t}o(ws,"convertSocials");v();function eP(e,{geometryMaps:t}){if(!e.facade)return{};let r={},n={};for(let[i,a]of gt(e.facade))a&&(n[i]={id:a.id,spaces:a.geometryAnchors.flatMap(({floorId:s,geometryId:l})=>{var d;return(d=t.space.get(l))==null?void 0:d.ids.map(c=>({floorId:s,spaceId:c}))}).filter(s=>s!==void 0)});return Object.keys(n).length>0&&(r.facade=n),r}o(eP,"buildFacade");v();function tP(e,t={}){var r,n,i,a,s,l,d,c,p,f,h,w;let N={type:"FeatureCollection",features:[]},k=[];for(let O of e.floors.features)k.push({id:O.properties.id.replace(/^f_/,"m_"),externalId:(n=(r=O.properties.details)==null?void 0:r.externalId)!=null?n:"",elevation:O.properties.elevation,name:(a=(i=O.properties.details)==null?void 0:i.name)!=null?a:"",shortName:(l=(s=O.properties.details)==null?void 0:s.shortName)!=null?l:"",subtitle:O.properties.subtitle}),N.features.push({type:"Feature",geometry:O.geometry,properties:{id:O.properties.id,externalId:(c=(d=O.properties.details)==null?void 0:d.externalId)!=null?c:"",elevation:O.properties.elevation,name:(f=(p=O.properties.details)==null?void 0:p.name)!=null?f:"",shortName:(w=(h=O.properties.details)==null?void 0:h.shortName)!=null?w:"",subtitle:O.properties.subtitle}});return{"floor.geojson":N,"map.geojson":k}}o(tP,"buildFloors");v();function rP(e,{geometryMaps:t}){var r,n,i,a,s;let l={},d={};for(let[c,p]of gt((r=e.floorImages)!=null?r:{})){let f={features:[],type:"FeatureCollection"};for(let h of(n=p?.features)!=null?n:[])if("verticalOffset"in h.properties)f.features.push(h);else{let w=h.properties,{geometryId:N}=w,k=xs(w,["geometryId"]),O=(s=(i=t.space.get(N))==null?void 0:i.ids[0])!=null?s:(a=t.obstruction.get(N))==null?void 0:a.ids[0];if(!O)continue;let g={geometry:h.geometry,properties:Me(oe({},k),{anchorId:O}),type:h.type};f.features.push(g)}d[c]=f}return Object.keys(d).length>0&&(l.floorImages=d),l}o(rP,"buildFloorImages");v();function nP(e,t={}){var r,n,i,a,s,l,d;let c=[];for(let p of(r=e?.floorStacks)!=null?r:[]){let f={id:p.id,floors:p.floors,maps:p.floors,externalId:(i=(n=p.details)==null?void 0:n.externalId)!=null?i:"",name:(s=(a=p.details)==null?void 0:a.name)!=null?s:"",shortName:(d=(l=p.details)==null?void 0:l.shortName)!=null?d:"",type:"Building"};p.defaultFloor&&(f.defaultFloor=p.defaultFloor),c.push(f)}if(e.outdoors){let p={id:"outdoors",floors:e.outdoors.floors,maps:e.outdoors.floors,type:"Outdoor",name:"Outdoors",externalId:"outdoors"};c.push(p)}return{"floorstack.json":c,"mapstack.geojson":c}}o(nP,"buildFloorStacks");v();v();var Rj=Os(vE(),1),Cj=o(e=>{let t=e.geometry.coordinates[0],r=0;for(let n=0;n<t.length-1;n++)r+=t[n][0]*t[n+1][1]-t[n+1][0]*t[n][1];return Math.abs(r/2)},"calculateArea"),Mj=o((e,t)=>{let[r,n]=e,i=t.geometry.coordinates[0],a=!1;for(let s=0,l=i.length-1;s<i.length;l=s++){let[d,c]=i[s],[p,f]=i[l];c>n!=f>n&&r<(p-d)*(n-c)/(f-c)+d&&(a=!a)}return a},"pointInPolygon"),Lj=o(e=>{let t=e.geometry.coordinates[0],r=0,n=0;for(let i=0;i<t.length-1;i++)r+=t[i][0],n+=t[i][1];return{geometry:{coordinates:[r/(t.length-1),n/(t.length-1)]}}},"calculateCenterOfMass"),Uj=o(e=>{let t=Cj(e),r=Number.isFinite(t)?Math.max(t,1):1;return Math.sqrt(r)*1e-6},"estimatePrecision"),Xc=o(e=>{try{let t=Lj(e).geometry.coordinates;if(!Mj(t,e)){let r=(0,Rj.default)(e.geometry.coordinates,Uj(e));return Se([r[0],r[1]])}return Se(t)}catch{return Fe(new Error("Unable to calculate center of polygon"))}},"labelCenter");function Fa(e){var t;return((t=e?.geometry)==null?void 0:t.type)==="Polygon"}o(Fa,"isPolygonFeature");function oP(e,{geometryMaps:t,nodesByGeometryId:r}){var n,i,a,s,l,d,c,p,f;let h=cP(e.defaultStyle),w={},N={},k={},O={};for(let y of yt(e.geometry)){let I=e.geometry[y];if(!I)continue;let m=[],b=[],x=[],P=[];for(let F of I.features){let S=F.properties.id,C=h.has(S),q=(n=r.get(S))!=null?n:[];for(let M of(a=(i=t.space.get(S))==null?void 0:i.features)!=null?a:[])m.push(iP(M,q));for(let M of(l=(s=t.obstruction.get(S))==null?void 0:s.features)!=null?l:[])b.push(aP(M,C));for(let M of(c=(d=t.area.get(S))==null?void 0:d.features)!=null?c:[])x.push(sP(M,q));for(let M of(f=(p=t.window.get(S))==null?void 0:p.features)!=null?f:[])P.push(lP(M))}m.length>0&&(w[y]={type:"FeatureCollection",features:m.filter(F=>F!==null)}),b.length>0&&(N[y]={type:"FeatureCollection",features:b.filter(F=>F!==null)}),x.length>0&&(k[y]={type:"FeatureCollection",features:x.filter(F=>F!==null)}),P.length>0&&(O[y]={type:"FeatureCollection",features:P.filter(F=>F!==null)})}let g={space:w,obstruction:N};return Object.keys(k).length>0&&(g.area=k),Object.keys(O).length>0&&(g.window=O),g}o(oP,"buildGeometry");function iP(e,t){var r,n;switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":return null}let i={type:"Feature",geometry:e.geometry,properties:{destinationNodes:t,id:e.properties.id,externalId:(n=(r=e.properties.details)==null?void 0:r.externalId)!=null?n:"",kind:e.properties.kind}};return e.properties.details&&(i.properties.details={name:e.properties.details.name,description:e.properties.details.description,images:e.properties.details.icon?[{url:e.properties.details.icon,altText:e.properties.details.name?"".concat(e.properties.details.name," icon"):"icon"}]:void 0}),Fa(i)&&(i.properties.center=Xc(i).unwrapOr(void 0)),i}o(iP,"buildSpace");function aP(e,t){var r,n;switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"Point":return null}let i=e.properties,a={type:"Feature",geometry:e.geometry,properties:{id:i.id,externalId:(n=(r=i.details)==null?void 0:r.externalId)!=null?n:"",entrances:[],kind:i.kind,footprintComponent:t}};return Fa(a)&&(a.properties.center=Xc(a).unwrapOr(void 0)),i.details&&(a.properties.details={name:i.details.name,description:i.details.description,images:i.details.icon?[{url:i.details.icon,altText:i.details.name?"".concat(i.details.name," icon"):"icon"}]:void 0}),a}o(aP,"buildObstruction");function sP(e,t){var r,n;if(e.geometry.type!=="Polygon")return null;let i=e.properties,a={type:"Feature",geometry:e.geometry,properties:{id:i.id,externalId:(n=(r=i.details)==null?void 0:r.externalId)!=null?n:"",destinationNodes:t}};return Fa(a)&&(a.properties.center=Xc(a).unwrapOr(void 0)),i.details&&(a.properties.details={name:i.details.name,description:i.details.description,images:i.details.icon?[{url:i.details.icon,altText:i.details.name?"".concat(i.details.name," icon"):"icon"}]:void 0}),a}o(sP,"buildArea");function lP(e){return e.geometry.type!=="LineString"?null:{type:"Feature",geometry:e.geometry,properties:{id:e.properties.id}}}o(lP,"buildWindow");function cP(e){var t,r,n,i;let a=[...(r=(t=e?.ExteriorWalls)==null?void 0:t.geometryAnchors)!=null?r:[],...(i=(n=e?.Walls)==null?void 0:n.geometryAnchors)!=null?i:[]];return new Set(a.map(s=>s.geometryId))}o(cP,"calculateFootprintGeometry");v();function uP(e,{geometryMaps:t,geometryFeatureById:r}){var n,i,a,s,l,d,c,p,f,h,w,N,k;if(!e.locationCategories&&!e.locations)return{};let O={};if((n=e.locationCategories)!=null&&n.length){let g=[];for(let y of e.locationCategories){let I={id:y.id,name:y.details.name,icon:(i=y.details.icon)!=null?i:""};y.parent&&(I.parent=y.parent),g.push(I)}O["category.json"]=g}if((a=e.locations)!=null&&a.length){let g=dP(e,{geometryFeatureById:r}),y=[];for(let I of e.locations){let m={id:I.id,name:I.details.name,categories:I.categories,spaces:[],obstructions:[],areas:[],annotations:[],connections:[],entrances:[],links:I.links,openingHoursSpecification:(s=I.openingHours)!=null?s:[],pictures:I.images,social:I.social,description:I.details.description,externalId:I.details.externalId,icon:I.details.icon,logo:I.logo,phone:I.phone,website:I.website};y.push(m);for(let{geometryId:b,floorId:x}of I.geometryAnchors)m.spaces.push(...(d=(l=t.space.get(b))==null?void 0:l.ids.map(P=>({id:P,floor:x})))!=null?d:[]),m.obstructions.push(...(p=(c=t.obstruction.get(b))==null?void 0:c.ids.map(P=>({id:P,floor:x})))!=null?p:[]),m.areas.push(...(h=(f=t.area.get(b))==null?void 0:f.ids.map(P=>({id:P,floor:x})))!=null?h:[]),m.entrances.push(...(w=g.entrancesByGeometryId.get(b))!=null?w:[]),m.connections.push(...(N=g.connectionsByGeometryId.get(b))!=null?N:[]),m.annotations.push(...(k=g.annotationsByGeometryId.get(b))!=null?k:[])}O["location.json"]=y}return O}o(uP,"buildLocations");function dP(e,{geometryFeatureById:t}){var r,n,i;let a={annotationsByGeometryId:new Map,connectionsByGeometryId:new Map,entrancesByGeometryId:new Map};if(e.annotations)for(let[s,l]of gt(e.annotations))for(let d of l??[]){let c=d.geometryId,p=d.id,f=(r=a.annotationsByGeometryId.get(c))!=null?r:[];f.push({floor:s,id:p}),a.annotationsByGeometryId.set(c,f)}if(e.connections)for(let s of e.connections){let l=Qc(s,t),d=Array.from(new Map([...s.entrances,...s.exits].map(c=>["".concat(c.geometryId,"_").concat(c.floorId),c])).values());for(let c of d){let p=c.geometryId;if(l){let f=(n=a.entrancesByGeometryId.get(p))!=null?n:[];f.push({floor:c.floorId,id:s.id}),a.entrancesByGeometryId.set(p,f)}else{let f=(i=a.connectionsByGeometryId.get(p))!=null?i:[];f.push(s.id),a.connectionsByGeometryId.set(p,f)}}}return a}o(dP,"buildLocationAttachmentMaps");v();function fP(e,t){let r={features:[],type:"FeatureCollection"},n={"manifest.geojson":r},i=e.manifest;if(i.features.length>0){let a=i.features[0],s=a.properties,l={type:"Feature",geometry:a.geometry,properties:{folder_struct:[],version:"2.0.0",time:s.time,name:s.name,naturalBearing:s.naturalBearing,tzid:s.tzid,map:s.mapId,org_id:s.orgId,language:s.language}};r.features.push(l)}return n}o(fP,"buildManifest");v();function pP(e,{geometryMaps:t}){var r,n,i,a,s,l,d,c,p,f,h,w,N,k,O;let g={"node.geojson":{type:"FeatureCollection",features:[]}},y=g["node.geojson"].features,I=new Map;for(let x of(n=(r=e.floors)==null?void 0:r.features)!=null?n:[])I.set(x.properties.id,x.properties.elevation);let m=new Map;for(let x of Object.values((i=e.nodes)!=null?i:{}))for(let P of(a=x?.features)!=null?a:[])for(let F of P.properties.geometryIds)m.set(F,[...(s=m.get(F))!=null?s:[],P.properties.id]);let b=new Map;for(let x of(l=e.connections)!=null?l:[]){let P=x.exits.map(F=>{var S;return Me(oe({},F),{nodes:(S=m.get(F.geometryId))!=null?S:[]})});for(let F of x.entrances){let S=(d=m.get(F.geometryId))!=null?d:[];for(let C of S)for(let q of P){let M=Math.abs(((c=I.get(F.floorId))!=null?c:0)-((p=I.get(q.floorId))!=null?p:0))*x.floorCostMultiplier,z=(f=b.get(C))!=null?f:[];z.push(...q.nodes.map(Q=>({id:Q,weight:M+x.entryCost}))),b.set(C,z)}}}for(let[x,P]of gt((h=e.nodes)!=null?h:{}))for(let F of(w=P?.features)!=null?w:[]){let S=(N=t.space.get(F.properties.geometryIds[0]))==null?void 0:N.features[0],C=S?.geometry.type==="Point"&&(k=S?.properties.details)!=null&&k.externalId?S.properties.details.externalId:"",q={type:"Feature",geometry:F.geometry,properties:{id:F.properties.id,floor:x,space:F.properties.geometryIds.map(M=>{var z;return(z=t.space.get(M))==null?void 0:z.ids}).flat().filter(M=>M!==void 0),neighbors:[...F.properties.neighbors.map(M=>({id:M.id,weight:M.extraCost})),...(O=b.get(F.properties.id))!=null?O:[]],map:x,externalId:C}};y.push(q)}return g}o(pP,"buildNodes");v();function mP(e,t){let r={};for(let n of e){let i=t.get(n);i&&(r[i]!=null||(r[i]=[]),r[i].push(n))}return r}o(mP,"groupGeometryByType");function hP(e,{geometryMaps:t}){var r,n,i;if(!e.defaultStyle)return{};let a={},s={};a["styles.json"]=s;let l=[...Array.from(t.space.values()).map(c=>c.features),...Array.from(t.obstruction.values()).map(c=>c.features)],d=new Map(l.flatMap(c=>c.map(p=>[p.properties.id,p.geometry.type])));for(let[c,p]of gt(e.defaultStyle)){let f=mP(p.geometryAnchors.flatMap(h=>{var w,N,k,O;return[...(N=(w=t.space.get(h.geometryId))==null?void 0:w.ids)!=null?N:[],...(O=(k=t.obstruction.get(h.geometryId))==null?void 0:k.ids)!=null?O:[]]}),d);if(f.Point&&f.Point.length>0){let h={points:Array.from(f.Point.values()),showImage:((r=p.extra)==null?void 0:r.showImage)!==void 0?((n=p.extra)==null?void 0:n.showImage)===!0:p.opacity!==0};s["".concat(c,".Point")]=h}if(f.LineString&&f.LineString.length>0){let h={lineStrings:Array.from(f.LineString.values()),altitude:p.altitude,color:p.color,height:p.height,opacity:p.opacity,width:p.buffer};s["".concat(c,".LineString")]=h}if(f.Polygon&&f.Polygon.length>0){let h={polygons:Array.from(f.Polygon.values()),altitude:p.altitude,color:p.color,height:p.height,opacity:p.opacity};((i=p.extra)==null?void 0:i.showImage)!==void 0&&(h.showImage=p.extra.showImage===!0),s["".concat(c,".Polygon")]=h}}return a}o(hP,"buildStyles");var Dj=IT().extendOptional(JT).extendOptional(Oj).extendOptional(ej).extendOptional(bj).extendOptional(_j).extendOptional(nj).extendOptional(aj).extendOptional(Sj).extendOptional(jj).extendOptional(mj).extendOptional(uj).extendOptional(oF).extendOptional(ET).extendOptional(zT).build().expect("Invalid parser, this should never happen. Likely a bug in the MVFv2 library, or one of the extensions.");function yP(e){let t=GO(e),r=tP(e,t),n=oP(e,t),i=pP(e,t),a=ZO(e,t),s=hP(e,t),l=nP(e,t),d=rP(e,t),c=eP(e,t),p=JO(e),f=uP(e,t),h=XO(e,t),w=fP(e);return oe(oe(oe(oe(oe(oe(Me(oe(oe(oe(oe(oe(oe({},r),n),i),a),s),l),{"tileset.json":e.tileset}),d),c),p),f),h),w)}o(yP,"convertUnzippedStandardMVFv3ToParsedMVFv2");async function Bj(e){let t=await Dj.decompress(e);return t.isOk()?Se(yP(t.value)):Fe(t.error)}o(Bj,"extractAndConvertMVFv3");o(e=>{try{return gS(e)?fS(e):!1}catch{return!1}},"check");export{$E as AnchoredFloorTextUnknownObstructionError,_E as AnchoredFloorTextUnknownSpaceError,RE as AnchoredImageUnknownObstructionError,NE as AnchoredImageUnknownSpaceError,PE as ConnectionUnknownNodeError,JE as DuplicateTilesetKeyError,VE as EnterpriseCyclicalCategoryReferenceError,zE as EnterpriseInconsistentMapError,KE as EnterpriseInvalidTimeZoneError,ME as EnterpriseLayerUnknownSpaceError,BE as EnterpriseLocationUnknownSpaceError,LE as EnterpriseStyleGeometryAnchorsUnknownSpaceError,UE as EnterpriseTextureUnknownSpaceError,qE as EnterpriseUnknownCategoryError,cu as EnterpriseUnknownLocationError,uu as EnterpriseUnknownMapError,HE as FacadeUnknownFloorError,GE as FacadeUnknownFloorStackError,WE as FacadeUnknownSpaceError,bE as FloorStackUnknownMapError,Ot as IntegrityError,AE as InvalidStyleError,EE as NodeUnknownFloorError,FE as NodeUnknownNeighborError,SE as NodeUnknownSpaceError,xE as ObstructionCollectionUnknownMapError,OE as ObstructionUnknownEntranceError,IE as SpaceCollectionUnknownMapError,wE as SpaceUnknownNodeError,jE as StyleUnknownLineStringError,kE as StyleUnknownPointError,TE as StyleUnknownPolygonError,DE as TextAreaUnknownObstructionError,CE as TextAreaUnknownSpaceError,Bj as extractAndConvertMVFv3,gS as validateMvf,fS as verifyMvfIntegrity};
