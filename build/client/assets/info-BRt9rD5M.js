import{a as c,p as t,w as Re,A as Se}from"./chunk-UIGDSWPH-CIt85NzU.js";import{c as P,u as J,a as A,m as we}from"./index-LQx0N5oG.js";import{P as Q,g as Fe,d as _e,h as Ne,i as Ee,j as Me,k as z,l as H}from"./sidebar-BCYPihsZ.js";import{c as D,e as O,P as T,f as y,u as L,g as ke,h as Pe}from"./tooltip-BM-lnvOs.js";import{c as Ae,u as W}from"./Combination-BorzZcYL.js";import{u as De}from"./use-click-navigation-C8qDvtLp.js";import{P as Oe}from"./PageHeader-DmSe1-NI.js";import"./index-BP1L8zXC.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ge=P("building",Le);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Be=P("chevron-right",$e);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],Ve=P("trees",Ke);var M="rovingFocusGroup.onEntryFocus",Ue={bubbles:!1,cancelable:!0},w="RovingFocusGroup",[k,X,ze]=Ae(w),[He,ee]=D(w,[ze]),[qe,Ye]=He(w),te=c.forwardRef((e,o)=>t.jsx(k.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(k.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Ze,{...e,ref:o})})}));te.displayName=w;var Ze=c.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:d,currentTabStopId:a,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:b,onEntryFocus:f,preventScrollOnEntryFocus:u=!1,...s}=e,l=c.useRef(null),h=J(o,l),R=W(d),[I,m]=L({prop:a,defaultProp:p??null,onChange:b,caller:w}),[x,g]=c.useState(!1),v=ke(f),j=X(r),N=c.useRef(!1),[Ce,V]=c.useState(0);return c.useEffect(()=>{const C=l.current;if(C)return C.addEventListener(M,v),()=>C.removeEventListener(M,v)},[v]),t.jsx(qe,{scope:r,orientation:n,dir:R,loop:i,currentTabStopId:I,onItemFocus:c.useCallback(C=>m(C),[m]),onItemShiftTab:c.useCallback(()=>g(!0),[]),onFocusableItemAdd:c.useCallback(()=>V(C=>C+1),[]),onFocusableItemRemove:c.useCallback(()=>V(C=>C-1),[]),children:t.jsx(T.div,{tabIndex:x||Ce===0?-1:0,"data-orientation":n,...s,ref:h,style:{outline:"none",...e.style},onMouseDown:y(e.onMouseDown,()=>{N.current=!0}),onFocus:y(e.onFocus,C=>{const ye=!N.current;if(C.target===C.currentTarget&&ye&&!x){const U=new CustomEvent(M,Ue);if(C.currentTarget.dispatchEvent(U),!U.defaultPrevented){const E=j().filter(S=>S.focusable),Te=E.find(S=>S.active),Ie=E.find(S=>S.id===I),je=[Te,Ie,...E].filter(Boolean).map(S=>S.ref.current);re(je,u)}}N.current=!1}),onBlur:y(e.onBlur,()=>g(!1))})})}),oe="RovingFocusGroupItem",ne=c.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:d,children:a,...p}=e,b=O(),f=d||b,u=Ye(oe,r),s=u.currentTabStopId===f,l=X(r),{onFocusableItemAdd:h,onFocusableItemRemove:R,currentTabStopId:I}=u;return c.useEffect(()=>{if(n)return h(),()=>R()},[n,h,R]),t.jsx(k.ItemSlot,{scope:r,id:f,focusable:n,active:i,children:t.jsx(T.span,{tabIndex:s?0:-1,"data-orientation":u.orientation,...p,ref:o,onMouseDown:y(e.onMouseDown,m=>{n?u.onItemFocus(f):m.preventDefault()}),onFocus:y(e.onFocus,()=>u.onItemFocus(f)),onKeyDown:y(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const x=We(m,u.orientation,u.dir);if(x!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=l().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")v.reverse();else if(x==="prev"||x==="next"){x==="prev"&&v.reverse();const j=v.indexOf(m.currentTarget);v=u.loop?Xe(v,j+1):v.slice(j+1)}setTimeout(()=>re(v))}}),children:typeof a=="function"?a({isCurrentTabStop:s,hasTabStop:I!=null}):a})})});ne.displayName=oe;var Je={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qe(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function We(e,o,r){const n=Qe(e.key,r);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Je[n]}function re(e,o=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:o}),document.activeElement!==r))return}function Xe(e,o){return e.map((r,n)=>e[(o+n)%e.length])}var et=te,tt=ne,F="Tabs",[ot,St]=D(F,[ee]),ae=ee(),[nt,G]=ot(F),se=c.forwardRef((e,o)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:d,orientation:a="horizontal",dir:p,activationMode:b="automatic",...f}=e,u=W(p),[s,l]=L({prop:n,onChange:i,defaultProp:d??"",caller:F});return t.jsx(nt,{scope:r,baseId:O(),value:s,onValueChange:l,orientation:a,dir:u,activationMode:b,children:t.jsx(T.div,{dir:u,"data-orientation":a,...f,ref:o})})});se.displayName=F;var ie="TabsList",ce=c.forwardRef((e,o)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,d=G(ie,r),a=ae(r);return t.jsx(et,{asChild:!0,...a,orientation:d.orientation,dir:d.dir,loop:n,children:t.jsx(T.div,{role:"tablist","aria-orientation":d.orientation,...i,ref:o})})});ce.displayName=ie;var le="TabsTrigger",ue=c.forwardRef((e,o)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...d}=e,a=G(le,r),p=ae(r),b=fe(a.baseId,n),f=pe(a.baseId,n),u=n===a.value;return t.jsx(tt,{asChild:!0,...p,focusable:!i,active:u,children:t.jsx(T.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":f,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:b,...d,ref:o,onMouseDown:y(e.onMouseDown,s=>{!i&&s.button===0&&s.ctrlKey===!1?a.onValueChange(n):s.preventDefault()}),onKeyDown:y(e.onKeyDown,s=>{[" ","Enter"].includes(s.key)&&a.onValueChange(n)}),onFocus:y(e.onFocus,()=>{const s=a.activationMode!=="manual";!u&&!i&&s&&a.onValueChange(n)})})})});ue.displayName=le;var de="TabsContent",rt=c.forwardRef((e,o)=>{const{__scopeTabs:r,value:n,forceMount:i,children:d,...a}=e,p=G(de,r),b=fe(p.baseId,n),f=pe(p.baseId,n),u=n===p.value,s=c.useRef(u);return c.useEffect(()=>{const l=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(l)},[]),t.jsx(Q,{present:i||u,children:({present:l})=>t.jsx(T.div,{"data-state":u?"active":"inactive","data-orientation":p.orientation,role:"tabpanel","aria-labelledby":b,hidden:!l,id:f,tabIndex:0,...a,ref:o,style:{...e.style,animationDuration:s.current?"0s":void 0},children:l&&d})})});rt.displayName=de;function fe(e,o){return`${e}-trigger-${o}`}function pe(e,o){return`${e}-content-${o}`}var at=se,st=ce,it=ue;function ct({className:e,...o}){return t.jsx(at,{"data-slot":"tabs",className:A("flex flex-col gap-2",e),...o})}function lt({className:e,...o}){return t.jsx(st,{"data-slot":"tabs-list",className:A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...o})}function q({className:e,...o}){return t.jsx(it,{"data-slot":"tabs-trigger",className:A("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}var _="Collapsible",[ut,wt]=D(_),[dt,$]=ut(_),me=c.forwardRef((e,o)=>{const{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:d,onOpenChange:a,...p}=e,[b,f]=L({prop:n,defaultProp:i??!1,onChange:a,caller:_});return t.jsx(dt,{scope:r,disabled:d,contentId:O(),open:b,onOpenToggle:c.useCallback(()=>f(u=>!u),[f]),children:t.jsx(T.div,{"data-state":K(b),"data-disabled":d?"":void 0,...p,ref:o})})});me.displayName=_;var be="CollapsibleTrigger",ge=c.forwardRef((e,o)=>{const{__scopeCollapsible:r,...n}=e,i=$(be,r);return t.jsx(T.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":K(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:o,onClick:y(e.onClick,i.onOpenToggle)})});ge.displayName=be;var B="CollapsibleContent",ve=c.forwardRef((e,o)=>{const{forceMount:r,...n}=e,i=$(B,e.__scopeCollapsible);return t.jsx(Q,{present:r||i.open,children:({present:d})=>t.jsx(ft,{...n,ref:o,present:d})})});ve.displayName=B;var ft=c.forwardRef((e,o)=>{const{__scopeCollapsible:r,present:n,children:i,...d}=e,a=$(B,r),[p,b]=c.useState(n),f=c.useRef(null),u=J(o,f),s=c.useRef(0),l=s.current,h=c.useRef(0),R=h.current,I=a.open||p,m=c.useRef(I),x=c.useRef(void 0);return c.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),Pe(()=>{const g=f.current;if(g){x.current=x.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const v=g.getBoundingClientRect();s.current=v.height,h.current=v.width,m.current||(g.style.transitionDuration=x.current.transitionDuration,g.style.animationName=x.current.animationName),b(n)}},[a.open,n]),t.jsx(T.div,{"data-state":K(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!I,...d,ref:u,style:{"--radix-collapsible-content-height":l?`${l}px`:void 0,"--radix-collapsible-content-width":R?`${R}px`:void 0,...e.style},children:I&&i})});function K(e){return e?"open":"closed"}var pt=me;function mt({...e}){return t.jsx(pt,{"data-slot":"collapsible",...e})}function bt({...e}){return t.jsx(ge,{"data-slot":"collapsible-trigger",...e})}function gt({...e}){return t.jsx(ve,{"data-slot":"collapsible-content",...e})}function he({children:e,icon:o,label:r}){const[n,i]=c.useState(!0);return t.jsx(mt,{className:"group/collapsible",open:n,onOpenChange:i,children:t.jsxs(Fe,{children:[t.jsx(bt,{asChild:!0,children:t.jsxs(_e,{children:[o,r,t.jsx(Ne,{children:t.jsx(Be,{className:`transition-transform ${n?"rotate-90":""}`})})]})}),t.jsx(gt,{children:t.jsx(Ee,{className:"pr-0 mr-0",children:e})})]})})}const{useMap:xe}=we,Ft=Re(function(){const{mapData:o}=xe();De();const r=o.getByType("floor").sort((s,l)=>s.elevation-l.elevation),n=o.getByType("floor-stack"),i=o.getByType("space").filter(({name:s})=>s.length),d=o.getByType("point-of-interest"),a=r.map(s=>({floor:s,spaces:i.filter(l=>l.floor.id===s.id).sort((l,h)=>l.name.localeCompare(h.name)).sort((l,h)=>l.name.length===0&&h.name.length>0?1:-1),pois:d.filter(l=>l.floor.id===s.id)})),p=n.map(s=>({stack:s,floors:s.floors.map(l=>a.find(h=>h.floor.id===l.id)).filter(l=>l!==void 0)})),b={Building:t.jsx(Ge,{}),Trees:t.jsx(Ve,{})},[f,u]=c.useState("spaces");return t.jsxs(t.Fragment,{children:[t.jsx(Oe,{title:"Info"}),t.jsx("div",{className:"py-2",children:t.jsxs(ct,{value:f,onValueChange:s=>u(s),children:[t.jsxs(lt,{children:[t.jsx(q,{value:"spaces",children:"Spaces"}),t.jsx(q,{value:"pois",children:"Points of Interest"})]}),t.jsx(Me,{children:p.length===1?t.jsx(Y,{floors:p[0].floors,tab:f}):p.map(({stack:s,floors:l})=>t.jsx(he,{icon:b[s.type],label:s.name,children:t.jsx(Y,{floors:l,tab:f})},s.id))})]})})]})});function Y({floors:e,tab:o}){return e.length===1?t.jsx(Z,{spaces:e[0].spaces,pois:e[0].pois,tab:o}):e.filter(r=>r[o].length).map(({floor:r,spaces:n,pois:i})=>t.jsx(he,{icon:t.jsx("div",{className:"bg-primary text-primary-foreground size-4 place-content-center grid rounded-sm text-[0.65rem]",children:r.elevation}),label:r.name,children:t.jsx(Z,{spaces:n,pois:i,tab:o})},r.id))}function Z({spaces:e,pois:o,tab:r}){const{mapView:n}=xe(),i=Se();function d(a){n.setFloor(a.floor.id),n.Camera.focusOn(a),i(`/space/${a.id}`)}return r==="pois"?o.map(a=>t.jsx(z,{children:t.jsxs(H,{onClick:()=>d(a),children:[a.name," - ",a.locationProfiles.length]})},a.id)):r==="spaces"?e.map(a=>t.jsx(z,{children:t.jsx(H,{onClick:()=>d(a),children:t.jsx("span",{children:a.name})})},a.id)):null}export{Ft as default};
